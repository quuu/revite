{"version":3,"file":"version.e2e2960b.js","sources":["../../src/components/common/UpdateIndicator.tsx","../../src/components/native/Titlebar.tsx","../../src/version.ts"],"sourcesContent":["/* eslint-disable react-hooks/rules-of-hooks */\nimport { Download, CloudDownload } from \"@styled-icons/boxicons-regular\";\n\nimport { useContext, useEffect, useState } from \"preact/hooks\";\n\nimport { internalSubscribe } from \"../../lib/eventEmitter\";\n\nimport { ThemeContext } from \"../../context/Theme\";\n\nimport IconButton from \"../ui/IconButton\";\n\nimport { updateSW } from \"../../main\";\nimport Tooltip from \"./Tooltip\";\n\nlet pendingUpdate = false;\ninternalSubscribe(\"PWA\", \"update\", () => (pendingUpdate = true));\n\ninterface Props {\n    style: \"titlebar\" | \"channel\";\n}\n\nexport default function UpdateIndicator({ style }: Props) {\n    const [pending, setPending] = useState(pendingUpdate);\n\n    useEffect(() => {\n        return internalSubscribe(\"PWA\", \"update\", () => setPending(true));\n    });\n\n    if (!pending) return null;\n    const theme = useContext(ThemeContext);\n\n    if (style === \"titlebar\") {\n        return (\n            <div class=\"actions\">\n                <Tooltip\n                    content=\"A new update is available!\"\n                    placement=\"bottom\">\n                    <div onClick={() => updateSW(true)}>\n                        <CloudDownload size={22} color={theme.success} />\n                    </div>\n                </Tooltip>\n            </div>\n        );\n    }\n\n    if (window.isNative) return null;\n\n    return (\n        <IconButton onClick={() => updateSW(true)}>\n            <Download size={22} color={theme.success} />\n        </IconButton>\n    );\n}\n","import { Wrench } from \"@styled-icons/boxicons-solid\";\nimport styled from \"styled-components\";\n\nimport UpdateIndicator from \"../common/UpdateIndicator\";\n\nconst TitlebarBase = styled.div`\n    height: var(--titlebar-height);\n    display: flex;\n    user-select: none;\n    align-items: center;\n\n    .drag {\n        flex-grow: 1;\n        -webkit-app-region: drag;\n        margin-top: 10px;\n        height: 100%;\n    }\n\n    .quick {\n        color: var(--secondary-foreground);\n\n        > div,\n        > div > div {\n            width: var(--titlebar-height) !important;\n        }\n\n        &.disabled {\n            color: var(--error);\n        }\n\n        &.unavailable {\n            background: var(--error);\n        }\n    }\n\n    .title {\n        -webkit-app-region: drag;\n        /*height: var(--titlebar-height);*/\n        font-size: 16px;\n        font-weight: 600;\n        margin-inline-start: 10px;\n        margin-top: 10px;\n        gap: 6px;\n        display: flex;\n        align-items: center;\n        justify-content: flex-start;\n        z-index: 90000;\n        color: var(--titlebar-logo-color);\n\n        svg {\n            margin-bottom: 10px;\n        }\n\n        svg:first-child {\n            height: calc(var(--titlebar-height) / 3);\n        }\n    }\n\n    .actions {\n        z-index: 100;\n        display: flex;\n        align-items: center;\n        margin-inline-start: 6px;\n\n        div {\n            width: calc(\n                var(--titlebar-height) + var(--titlebar-action-padding)\n            );\n            height: var(--titlebar-height);\n\n            display: grid;\n            place-items: center;\n            transition: 0.2s ease color;\n            transition: 0.2s ease background-color;\n\n            &:hover {\n                background: var(--primary-background);\n            }\n\n            &.error:hover {\n                background: var(--error);\n            }\n        }\n    }\n`;\n\nexport function Titlebar() {\n    return (\n        <TitlebarBase>\n            <div class=\"title\">\n                <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    viewBox=\"0 0 193.733 37.438\">\n                    <path\n                        d=\"M23.393,1.382c0,2.787-1.52,4.46-4.764,4.46H13.258V-2.977H18.63C21.873-2.977,23.393-1.254,23.393,1.382Zm-24-11.555,5.2,7.213V25.4h8.666V11.973h2.078l7.4,13.43h9.781l-8.21-14.089A10.355,10.355,0,0,0,32.212,1.027c0-6.183-4.358-11.2-13.075-11.2Zm60.035,0H37.634V25.4H59.426V18.46H46.3v-7.8H57.906V3.966H46.3V-2.969H59.426Zm20.981,26.86-8.818-26.86H62.365L74.984,25.4H85.83L98.449-10.173H89.276Zm56.659-9.173c0-10.693-8.058-18.194-18.194-18.194-10.085,0-18.3,7.5-18.3,18.194a17.9,17.9,0,0,0,18.3,18.244A17.815,17.815,0,0,0,137.066,7.514Zm-27.62,0c0-6.335,3.649-10.338,9.426-10.338,5.676,0,9.376,4,9.376,10.338,0,6.233-3.7,10.338-9.376,10.338C113.095,17.852,109.446,13.747,109.446,7.514ZM141.88-10.173V25.4H161.9v-6.95H150.545V-10.173Zm22.248,7.2h9.426V25.4h8.666V-2.975h9.426v-7.2H164.128Z\"\n                        transform=\"translate(1.586 11.18)\"\n                        fill=\"var(--titlebar-logo-color)\"\n                        stroke=\"var(--titlebar-logo-color)\"\n                        stroke-width=\"1\"\n                    />\n                </svg>\n                {window.native.getConfig().build === \"dev\" && (\n                    <Wrench size=\"12.5\" />\n                )}\n            </div>\n            {/*<div class=\"actions quick\">\n                <Tooltip\n                    content=\"Mute\"\n                    placement=\"bottom\">\n                    <div onClick={window.native.min}>\n                        <Microphone size={15}/>\n                    </div>\n                </Tooltip>\n                <Tooltip\n                    content=\"Deafen\"\n                    placement=\"bottom\">\n                    <div onClick={window.native.min}>\n                        <VolumeFull size={15}/>\n                    </div>\n                </Tooltip>\n            </div>*/}\n            <div class=\"drag\" />\n            <UpdateIndicator style=\"titlebar\" />\n            <div class=\"actions\">\n                <div onClick={window.native.min}>\n                    <svg\n                        aria-hidden=\"false\"\n                        width=\"12\"\n                        height=\"12\"\n                        viewBox=\"0 0 12 12\">\n                        <rect\n                            fill=\"currentColor\"\n                            width=\"10\"\n                            height=\"1\"\n                            x=\"1\"\n                            y=\"6\"\n                        />\n                    </svg>\n                </div>\n                <div onClick={window.native.max}>\n                    <svg\n                        aria-hidden=\"false\"\n                        width=\"12\"\n                        height=\"12\"\n                        viewBox=\"0 0 12 12\">\n                        <rect\n                            width=\"9\"\n                            height=\"9\"\n                            x=\"1.5\"\n                            y=\"1.5\"\n                            fill=\"none\"\n                            stroke=\"currentColor\"\n                        />\n                    </svg>\n                </div>\n                <div onClick={window.native.close} class=\"error\">\n                    <svg\n                        aria-hidden=\"false\"\n                        width=\"12\"\n                        height=\"12\"\n                        viewBox=\"0 0 12 12\">\n                        <polygon\n                            fill=\"currentColor\"\n                            stroke-width=\"1\"\n                            fill-rule=\"evenodd\"\n                            points=\"11 1.576 6.583 6 11 10.424 10.424 11 6 6.583 1.576 11 1 10.424 5.417 6 1 1.576 1.576 1 6 5.417 10.424 1\"\n                            style=\"stroke:currentColor;stroke-width:0.4\"\n                        />\n                    </svg>\n                </div>\n            </div>\n        </TitlebarBase>\n    );\n}\n","export const APP_VERSION = \"__APP_VERSION__\";\n"],"names":["pendingUpdate","style","pending","setPending","useState","internalSubscribe","theme","useContext","ThemeContext","class","Tooltip","content","placement","onClick","updateSW","CloudDownload","size","color","success","window","isNative","IconButton","Download","TitlebarBase","styled","div","xmlns","viewBox","d","transform","fill","stroke","stroke-width","native","getConfig","build","Wrench","UpdateIndicator","min","aria-hidden","width","height","x","y","max","close","fill-rule","points","APP_VERSION"],"mappings":"gMAcA,IAAIA,GAAgB,cAOoBC,MAAEA,UAC/BC,EAASC,GAAcC,EAASJ,SAE7B,IACCK,EAAkB,MAAO,UAAU,IAAMF,GAAW,QAG1DD,SAAgB,WACfI,EAAQC,EAAWC,SAEX,aAAVP,IAEK,MAAD,CAAKQ,MAAM,aACNC,EAAD,CACIC,QAAQ,6BACRC,UAAU,YACT,MAAD,CAAKC,QAAS,IAAMC,GAAS,MACxBC,EAAD,CAAeC,KAAM,GAAIC,MAAOX,EAAMY,aAOtDC,OAAOC,SAAiB,OAGvBC,EAAD,CAAYR,QAAS,IAAMC,GAAS,MAC/BQ,EAAD,CAAUN,KAAM,GAAIC,MAAOX,EAAMY,WAlC7Cb,EAAkB,MAAO,UAAU,IAAOL,GAAgB,ICV1D,MAAMuB,EAAeC,EAAOC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;wBAmFnBF,EAAD,OACK,MAAD,CAAKd,MAAM,WACN,MAAD,CACIiB,MAAM,6BACNC,QAAQ,wBACP,OAAD,CACIC,EAAE,mxBACFC,UAAU,yBACVC,KAAK,6BACLC,OAAO,6BACPC,eAAa,OAGgB,QAApCb,OAAOc,OAAOC,YAAYC,SACtBC,EAAD,CAAQpB,KAAK,YAmBpB,MAAD,CAAKP,MAAM,WACV4B,EAAD,CAAiBpC,MAAM,eACtB,MAAD,CAAKQ,MAAM,aACN,MAAD,CAAKI,QAASM,OAAOc,OAAOK,OACvB,MAAD,CACIC,cAAY,QACZC,MAAM,KACNC,OAAO,KACPd,QAAQ,eACP,OAAD,CACIG,KAAK,eACLU,MAAM,KACNC,OAAO,IACPC,EAAE,IACFC,EAAE,UAIb,MAAD,CAAK9B,QAASM,OAAOc,OAAOW,OACvB,MAAD,CACIL,cAAY,QACZC,MAAM,KACNC,OAAO,KACPd,QAAQ,eACP,OAAD,CACIa,MAAM,IACNC,OAAO,IACPC,EAAE,MACFC,EAAE,MACFb,KAAK,OACLC,OAAO,qBAIlB,MAAD,CAAKlB,QAASM,OAAOc,OAAOY,MAAOpC,MAAM,WACpC,MAAD,CACI8B,cAAY,QACZC,MAAM,KACNC,OAAO,KACPd,QAAQ,eACP,UAAD,CACIG,KAAK,eACLE,eAAa,IACbc,YAAU,UACVC,OAAO,0GACP9C,MAAM,mDCtKrB+C,EAAc"}