var e=Object.defineProperty,n=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(n,t,r)=>t in n?e(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,s=(e,n)=>{for(var t in n||(n={}))i.call(n,t)&&o(e,t,n[t]);if(r)for(var t of r(n))a.call(n,t)&&o(e,t,n[t]);return e},l=(e,r)=>n(e,t(r)),c=e=>"symbol"==typeof e?e:e+"",u=(e,n)=>{var t={};for(var o in e)i.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&r)for(var o of r(e))n.indexOf(o)<0&&a.call(e,o)&&(t[o]=e[o]);return t};import{b as d,ad as p,y as f,o as h,f as v,p as g,T as m,s as _,F as y,u as b,aK as w,aL as x,a8 as k,aM as C,aN as z,aO as S,aP as T,aQ as N,aR as I,aS as E,aT as O,aC as R,aU as A,aV as L,aW as M,aX as j,aY as B,ai as D,i as P,l as U,G as $,S as F,aZ as H,Q as G,R as V,a_ as W,a$ as q,b0 as K,a1 as Y,Y as J,b1 as Z,O as Q,a6 as X,L as ee,b2 as ne,b3 as te,aF as re,a4 as ie,Z as ae,ap as oe,ao as se,m as le,A as ce,z as ue,d as de,b4 as pe,C as fe,b5 as he,b6 as ve,b7 as ge,b8 as me,b9 as _e,am as ye,ba as be,bb as we,bc as xe,bd as ke,be as Ce,bf as ze,D as Se,bg as Te,bh as Ne,ag as Ie,bi as Ee,H as Oe,bj as Re,a7 as Ae,a9 as Le,bk as Me,a2 as je,bl as Be,h as De,bm as Pe,bn as Ue,bo as $e,af as Fe,bp as He,bq as Ge,V as Ve,br as We,bs as qe,bt as Ke,aJ as Ye,bu as Je,an as Ze,aA as Qe,bv as Xe,bw as en,B as nn,aa as tn,g as rn,bx as an,by as on,bz as sn,bA as ln,bB as cn,bC as un,bD as dn,bE as pn,bF as fn,bG as hn,bH as vn,bI as gn,bJ as mn,bK as _n,bL as yn,bM as bn,bN as wn,bO as xn,c as kn,bP as Cn,bQ as zn,bR as Sn,bS as Tn,bT as Nn,bU as In,aD as En,bV as On,bW as Rn,bX as An,bY as Ln,bZ as Mn,b_ as jn,b$ as Bn}from"./vendor.182b0579.js";import{c as Dn,f as Pn,d as Un,O as $n,_ as Fn,I as Hn,B as Gn,h as Vn,i as Wn,s as qn,g as Kn,E as Yn,T as Jn,j as Zn,M as Qn,k as Xn,l as et,F as nt,m as tt,n as rt,A as it,o as at,e as ot,D as st,a as lt,p as ct}from"./Radio.cb2de5b8.js";import{T as ut,a as dt,A as pt,S as ft,C as ht,I as vt,b as gt,t as mt,g as _t,M as yt,c as bt,F as wt,s as xt,d as kt,e as Ct,f as zt,U as St,h as Tt,P as Nt,j as It,k as Et,l as Ot,m as Rt,n as At,o as Lt,p as Mt,q as jt,r as Bt,v as Dt,x as Pt,i as Ut,y as $t,R as Ft,z as Ht,B as Gt,D as Vt,E as Wt,G as qt,H as Kt,J as Yt,K as Jt,L as Zt,N as Qt,Q as Xt,w as er,V as nr,W as tr,O as rr,X as ir}from"./main.10b8a2b2.js";import{C as ar,B as or,T as sr,a as lr}from"./Tip.2159a1b9.js";import{U as cr,A as ur,T as dr}from"./version.e2e2960b.js";import{C as pr}from"./ComboBox.ad5d9601.js";var fr,hr,vr,gr,mr="_11Ivv",_r="_3LgFW",yr="_3IMWP",br="_2PvlZ",wr="_3qYJ8";(hr=fr||(fr={}))[hr.None=0]="None",hr[hr.Left=1]="Left",hr[hr.Right=2]="Right",hr[hr.Both=3]="Both",(gr=vr||(vr={}))[gr.Left=1]="Left",gr[gr.Right=2]="Right",gr[gr.Both=3]="Both",gr[gr.Always=4]="Always";var xr=function(e){var n=e.width,t=e.height,r=e.docked,i=e.leftPanel,a=e.children,o=e.rightPanel,s=e.bottomNav;if(r)return d("div",{className:mr,style:{width:n,height:t}},1&r&&i?i.component:void 0,d("div",{className:_r},a),2&r&&o?o.component:void 0);var l=p(null),c=p(null);f((function(){if(s&&l.current){var e=l.current;return n(),e.addEventListener("scroll",n),function(){return e.removeEventListener("scroll",n)}}function n(){var n=c.current;if(n){var t=void 0===s.showIf?vr.Both:s.showIf;if(t&vr.Always)n.style.top="";else{var r=(null==i?void 0:i.width)||0,a=(null==o?void 0:o.width)||0,l=s.height+"px";if(e.scrollLeft<r){if(t&vr.Left)return void(n.style.top=e.scrollLeft/r*s.height+"px");if(n.style.top===l)return}if(e.scrollLeft>r){if(t&vr.Right)return void(n.style.top=(e.scrollLeft-r)/a*-s.height+s.height+"px");if(n.style.top===l)return}n.style.top=l}}}}),[l,i,o,null==s?void 0:s.showIf]);var u=(i?i.width+"px":"")+" "+n+" "+(o?o.width+"px":"");return d("div",{className:yr},d("div",{style:{width:n,height:t,gridTemplateColumns:u},className:br,ref:l},i&&d("div",{style:{height:t}},i.component),a,o&&d("div",{style:{height:t}},o.component)),s&&d("div",{className:wr,style:{bottom:t}},d("div",{style:{width:n,height:t},ref:c},d("div",null,s.component))))},kr=h((({user:e,tooltip:n})=>{var t,r,i,a;return(null==e?void 0:e.online)?(null==(t=e.status)?void 0:t.text)?n?d(ut,{arrow:void 0,content:e.status.text},e.status.text):d(v,null,e.status.text):(null==(r=e.status)?void 0:r.presence)===g.Busy?d(m,{id:"app.status.busy"}):(null==(i=e.status)?void 0:i.presence)===g.Idle?d(m,{id:"app.status.idle"}):(null==(a=e.status)?void 0:a.presence)===g.Invisible?d(m,{id:"app.status.offline"}):d(m,{id:"app.status.online"}):d(m,{id:"app.status.offline"})})),Cr=_.div`
    height: 0px;
    opacity: 0.6;
    flex-shrink: 0;
    margin: 8px 10px;
    border-top: 1px solid var(--tertiary-foreground);
`;var zr=Dn((function(e){const{openScreen:n,writeClipboard:t}=dt(),r=y(pt),i=r.user._id,a=y(ft)===ht.ONLINE,o=b();function c(e){void 0!==e&&(async()=>{var i,a,c,d,p,f,h,v;switch(e.action){case"copy_id":t(e.id);break;case"copy_message_link":{let n=`/channel/${e.message.channel_id}/${e.message._id}`;const r=e.message.channel;"TextChannel"===(null==r?void 0:r.channel_type)&&(n=`/server/${r.server_id}${n}`),t(window.origin+n)}break;case"copy_selection":t(null!=(a=null==(i=document.getSelection())?void 0:i.toString())?a:"");break;case"mark_as_read":if("SavedMessages"===e.channel.channel_type||"VoiceChannel"===e.channel.channel_type)return;Un({type:"UNREADS_MARK_READ",channel:e.channel._id,message:e.channel.last_message_id}),e.channel.ack(void 0,!0);break;case"mark_server_as_read":Un({type:"UNREADS_MARK_MULTIPLE_READ",channels:e.server.channel_ids}),e.server.ack();break;case"retry_message":{const n=e.message.id,t=e=>Un({type:"QUEUE_FAIL",nonce:n,error:e});r.channels.get(e.message.channel).sendMessage({nonce:e.message.id,content:e.message.data.content,replies:e.message.data.replies}).catch(t),Un({type:"QUEUE_START",nonce:n})}break;case"cancel_message":Un({type:"QUEUE_REMOVE",nonce:e.message.id});break;case"mention":gt("MessageBox","append",`<@${e.user}>`,"mention");break;case"copy_text":t(e.content);break;case"reply_message":gt("ReplyBar","add",e.target);break;case"quote_message":gt("MessageBox","append",e.content,"quote");break;case"edit_message":gt("MessageRenderer","edit_message",e.id);break;case"open_file":null==(c=window.open(r.generateFileURL(e.attachment),"_blank"))||c.focus();break;case"save_file":window.open(null==(d=r.generateFileURL(e.attachment))?void 0:d.replace("attachments","attachments/download"),"_blank");break;case"copy_file_link":{const{filename:n}=e.attachment;t(`${r.generateFileURL(e.attachment)}/${encodeURI(n)}`)}break;case"open_link":null==(p=window.open(e.link,"_blank"))||p.focus();break;case"copy_link":t(e.link);break;case"remove_member":e.channel.removeMember(e.user._id);break;case"view_profile":n({id:"profile",user_id:e.user._id});break;case"message_user":{const n=await e.user.openDM();n&&o.push(`/channel/${n._id}`)}break;case"add_friend":await e.user.addFriend();break;case"block_user":n({id:"special_prompt",type:"block_user",target:e.user});break;case"unblock_user":await e.user.unblockUser();break;case"remove_friend":n({id:"special_prompt",type:"unfriend_user",target:e.user});break;case"cancel_friend":await e.user.removeFriend();break;case"set_presence":await r.users.edit({status:l(s({},null==(f=r.user)?void 0:f.status),{presence:e.presence})});break;case"set_status":n({id:"special_input",type:"set_custom_status"});break;case"clear_status":{const e=null!=(v=null==(h=r.user)?void 0:h.status)?v:{},{text:n}=e,t=u(e,["text"]);await r.users.edit({status:t})}break;case"leave_group":case"close_dm":case"leave_server":case"delete_channel":case"delete_server":case"delete_message":case"create_channel":case"create_category":case"create_invite":n({id:"special_prompt",type:e.action,target:e.target});break;case"edit_identity":n({id:"server_identity",server:e.target});break;case"ban_member":case"kick_member":n({id:"special_prompt",type:e.action,target:e.target,user:e.user});break;case"open_notification_options":E("NotificationOptions",{channel:e.channel});break;case"open_settings":o.push("/settings");break;case"open_channel_settings":o.push(`/channel/${e.id}/settings`);break;case"open_server_channel_settings":o.push(`/server/${e.server}/channel/${e.id}/settings`);break;case"open_server_settings":o.push(`/server/${e.id}/settings`);break;case"set_notification_state":{const{key:n,state:t}=e;Un(t?{type:"NOTIFICATIONS_SET",key:n,state:t}:{type:"NOTIFICATIONS_REMOVE",key:n});break}}})().catch((e=>{n({id:"error",error:mt(e)})}))}return d(v,null,d(w,{id:"Menu",onClose:c},(({user:e,channel:n,server:t,message:a,server_list:o,queued:s,unread:l,contextualChannel:c})=>{var u,p,f,h,v,g;const _=[];let y=!1;function b(e,n,t,r){y=!1,_.push(d(C,{data:e,disabled:t},d(m,{id:`app.context_menu.${null!=n?n:e.action}`}),r&&d("div",{className:"tip"},r)))}function w(){y||0===_.length||(y=!0,_.push(d(Cr,null)))}if(o){const e=r.servers.get(o),n=e.permission;return e&&(n&x.ServerPermission.ManageChannels&&(b({action:"create_category",target:e}),b({action:"create_channel",target:e})),n&x.ServerPermission.ManageServer&&b({action:"open_server_settings",id:o})),_}null!=(p=null==(u=document.getSelection())?void 0:u.toString().length)&&p&&(b({action:"copy_selection"},void 0,void 0,d(m,{id:"shortcuts.ctrlc"})),w());const z=n?r.channels.get(n):void 0,S=c?r.channels.get(c):void 0,T=null!=z?z:S,N=e?r.users.get(e):void 0,I=!T||"TextChannel"!==T.channel_type&&"VoiceChannel"!==T.channel_type?void 0:T,E=I?I.server_id:t,O=E?r.servers.get(E):void 0,R=(null==T?void 0:T.permission)||0,A=(O?O.permission:I?null==(f=I.server)?void 0:f.permission:0)||0,L=(N?N.permission:0)||0;if(l&&(z?b({action:"mark_as_read",channel:z}):O&&b({action:"mark_server_as_read",server:O},"mark_as_read")),S&&N&&N._id!==i&&(b({action:"mention",user:N._id}),w()),N&&!N.bot){let e;switch(N.relationship){case k.User:e=[];break;case k.Friend:e=["remove_friend","block_user"];break;case k.Incoming:e=["add_friend","cancel_friend","block_user"];break;case k.Outgoing:e=["cancel_friend","block_user"];break;case k.Blocked:e=["unblock_user"];break;case k.BlockedOther:e=["block_user"];break;case k.None:default:e=N.flags||N.flags?["block_user"]:["add_friend","block_user"]}L&x.UserPermission.ViewProfile&&b({action:"view_profile",user:N}),N._id!==i&&L&x.UserPermission.SendMessage&&b({action:"message_user",user:N});for(let n=0;n<e.length;n++)b({action:e[n],user:N})}if(S&&("Group"===S.channel_type&&e&&S.owner_id===i&&i!==e&&b({action:"remove_member",channel:S,user:N}),O&&e&&i!==e&&e!==O.owner&&(A&x.ServerPermission.KickMembers&&b({action:"kick_member",target:O,user:N}),A&x.ServerPermission.BanMembers&&b({action:"ban_member",target:O,user:N}))),s&&(b({action:"retry_message",message:s}),b({action:"cancel_message",message:s})),a&&!s){if(b({action:"reply_message",target:a}),"string"==typeof a.content&&a.content.length>0&&(b({action:"quote_message",content:a.content}),b({action:"copy_text",content:a.content})),a.author_id===i&&b({action:"edit_message",id:a._id}),(a.author_id===i||R&x.ChannelPermission.ManageMessages)&&b({action:"delete_message",target:a}),a.attachments){w();const{metadata:e}=a.attachments[0],{type:n}=e;b({action:"open_file",attachment:a.attachments[0]},"Image"===n?"open_image":"Video"===n?"open_video":"open_file"),b({action:"save_file",attachment:a.attachments[0]},"Image"===n?"save_image":"Video"===n?"save_video":"save_file"),b({action:"copy_file_link",attachment:a.attachments[0]},"copy_link")}if("A"===(null==(h=document.activeElement)?void 0:h.tagName)){const e=document.activeElement.getAttribute("href");e&&(w(),b({action:"open_link",link:e}),b({action:"copy_link",link:e}))}}const M=null!=(g=null!=(v=null!=t?t:n)?v:e)?g:null==a?void 0:a._id;if(M){if(w(),z)switch("VoiceChannel"!==z.channel_type&&b({action:"open_notification_options",channel:z},void 0,void 0,d(B,{size:24})),z.channel_type){case"Group":b({action:"open_channel_settings",id:z._id},"open_group_settings"),b({action:"leave_group",target:z},"leave_group");break;case"DirectMessage":b({action:"close_dm",target:z});break;case"TextChannel":case"VoiceChannel":R&x.ChannelPermission.InviteOthers&&b({action:"create_invite",target:z}),A&x.ServerPermission.ManageServer&&b({action:"open_server_channel_settings",server:z.server_id,id:z._id},"open_channel_settings"),A&x.ServerPermission.ManageChannels&&b({action:"delete_channel",target:z})}t&&O&&(void 0!==O.channels[0]&&b({action:"create_invite",target:O.channels[0]},"create_invite"),(A&x.ServerPermission.ChangeNickname||A&x.ServerPermission.ChangeAvatar)&&b({action:"edit_identity",target:O},"edit_identity"),A&x.ServerPermission.ManageServer&&b({action:"open_server_settings",id:O._id},"open_server_settings"),i===O.owner?b({action:"delete_server",target:O},"delete_server"):b({action:"leave_server",target:O},"leave_server")),a&&b({action:"copy_message_link",message:a}),b({action:"copy_id",id:M},t?"copy_sid":n?"copy_cid":a?"copy_mid":"copy_uid")}return _})),d(w,{id:"Status",onClose:c,className:"Status"},(()=>{var e;const n=r.user;return d(v,null,d("div",{className:"header"},d("div",{className:"main"},d("div",{className:"username",onClick:()=>t(r.user.username)},d(ut,{content:d(m,{id:"app.special.copy_username"})},"@",n.username)),d("div",{className:"status",onClick:()=>c({action:"set_status"})},d(kr,{user:n}))),d(vt,null,d(C,{data:{action:"open_settings"}},d(z,{size:22})))),d(Cr,null),d(C,{data:{action:"set_presence",presence:g.Online},disabled:!a},d("div",{className:"indicator online"}),d(m,{id:"app.status.online"})),d(C,{data:{action:"set_presence",presence:g.Idle},disabled:!a},d("div",{className:"indicator idle"}),d(m,{id:"app.status.idle"})),d(C,{data:{action:"set_presence",presence:g.Busy},disabled:!a},d("div",{className:"indicator busy"}),d(m,{id:"app.status.busy"})),d(C,{data:{action:"set_presence",presence:g.Invisible},disabled:!a},d("div",{className:"indicator invisible"}),d(m,{id:"app.status.invisible"})),d(Cr,null),d(C,{data:{action:"set_status"},disabled:!a},d(S,{size:18}),d(m,{id:"app.context_menu.custom_status"}),(null==(e=r.user.status)?void 0:e.text)&&d(vt,null,d(C,{data:{action:"clear_status"}},d(T,{size:18})))))})),d(w,{id:"NotificationOptions",onClose:c},(({channel:n})=>{const t=e.notifications[n._id],r=Pn(e.notifications,n),i=[d(C,{key:"notif",data:{action:"set_notification_state",key:n._id}},d(m,{id:"app.main.channel.notifications.default"}),d("div",{className:"tip"},void 0!==t&&d(N,{size:20}),void 0===t&&d(I,{size:20})))];function a(e,a){i.push(d(C,{key:e,data:{action:"set_notification_state",key:n._id,state:e}},a,d(m,{id:`app.main.channel.notifications.${e}`}),void 0===t&&r===e&&d("div",{className:"tip"},d(O,{size:20})),t===e&&d("div",{className:"tip"},d(R,{size:20}))))}return a("all",d(A,{size:24})),a("mention",d(L,{size:24})),a("muted",d(M,{size:24})),a("none",d(j,{size:24})),i})))}),(e=>({notifications:e.notifications})));var Sr="_info_odjml_1",Tr="_header_odjml_1";const Nr=h((({channel:e,onClose:n})=>"DirectMessage"===e.channel_type||"SavedMessages"===e.channel_type?(n(),null):d(bt,{visible:!0,onClose:n},d("div",{className:Sr},d("div",{className:Tr},d("h1",null,_t(e,!0)),d("div",{onClick:n},d(D,{size:36}))),d("p",null,d(yt,{content:e.description}))))));function Ir({onClose:e,onCreate:n}){var t;const r=y(pt),{handleSubmit:i,register:a,errors:o}=P(),[s,l]=U(void 0),c=async({name:t})=>{try{const{bot:i}=await r.bots.create({name:t});n(i),e()}catch(i){l(mt(i))}};return d(bt,{visible:!0,onClose:e,title:d(m,{id:"app.special.popovers.create_bot.title"}),actions:[{confirmation:!0,contrast:!0,accent:!0,onClick:i(c),children:d(m,{id:"app.special.modals.actions.create"})},{plain:!0,onClick:e,children:d(m,{id:"app.special.modals.actions.cancel"})}]},d("form",{onSubmit:e=>{e.preventDefault(),i(c)(e)}},d(wt,{type:"username",name:"name",register:a,showOverline:!0,error:null==(t=o.name)?void 0:t.message}),s&&d($n,{type:"error",error:s},d(m,{id:"app.special.popovers.create_bot.failed"}))))}var Er="_viewer_16slo_1";function Or({embed:e}){const n=e.url.split("/").pop();return d("div",{className:xt.actions},d("span",{className:xt.filename},n),d("span",{className:xt.filesize},`${e.width}x${e.height}`),d("a",{href:e.url,class:xt.openIcon,target:"_blank",rel:"noreferrer"},d(vt,null,d($,{size:24}))))}function Rr({attachment:e,embed:n,onClose:t}){if(e&&"Image"!==e.metadata.type)return console.warn(`Attempted to use a non valid attatchment type in the image viewer: ${e.metadata.type}`),null;const r=kt();return d(bt,{visible:!0,onClose:t,noBackground:!0},d("div",{className:Er},e&&d(v,null,d("img",{loading:"eager",src:r.generateFileURL(e),width:e.metadata.width,height:e.metadata.height}),d(Ct,{attachment:e})),n&&d(v,null,d("img",{loading:"eager",src:r.proxyFile(n.url),width:n.width,height:n.height}),d(Or,{embed:n}))))}function Ar({onClose:e,field:n}){var t,r,i,a;const o=y(pt),[s,l]=U(!1),{handleSubmit:c,register:u,errors:p}=P(),[f,h]=U(void 0),v=async({password:t,new_username:r,new_email:i,new_password:a})=>{l(!0);try{"email"===n?(await o.req("PATCH","/auth/account/change/email",{current_password:t,email:i}),e()):"password"===n?(await o.req("PATCH","/auth/account/change/password",{current_password:t,password:a}),e()):"username"===n&&(await o.req("PATCH","/users/id/username",{username:r,password:t}),e())}catch(s){h(mt(s)),l(!1)}};return d(bt,{visible:!0,onClose:e,title:d(m,{id:`app.special.modals.account.change.${n}`}),disabled:s,actions:[{confirmation:!0,onClick:c(v),children:d(m,"email"===n?{id:"app.special.modals.actions.send_email"}:{id:"app.special.modals.actions.update"})},{onClick:e,children:d(m,{id:"app.special.modals.actions.close"})}]},d("form",{onSubmit:e=>{e.preventDefault(),c(v)(e)}},"email"===n&&d(wt,{type:"email",name:"new_email",register:u,showOverline:!0,error:null==(t=p.new_email)?void 0:t.message}),"password"===n&&d(wt,{type:"password",name:"new_password",register:u,showOverline:!0,error:null==(r=p.new_password)?void 0:r.message}),"username"===n&&d(wt,{type:"username",name:"new_username",register:u,showOverline:!0,error:null==(i=p.new_username)?void 0:i.message}),d(wt,{type:"current_password",register:u,showOverline:!0,error:null==(a=p.current_password)?void 0:a.message}),f&&d($n,{type:"error",error:f},d(m,{id:"app.special.modals.account.failed"}))))}var Lr="_list_1raae_1";var Mr="_title_gx39s_1",jr="_actions_gx39s_7",Br="_list_gx39s_13",Dr="_friend_gx39s_34",Pr="_name_gx39s_48",Ur="_subtext_gx39s_63",$r="_button_gx39s_45",Fr="_error_gx39s_79",Hr="_success_gx39s_82",Gr="_pending_gx39s_96",Vr="_avatars_gx39s_109",Wr="_details_gx39s_118",qr="_remove_gx39s_168";const Kr=(e,n)=>(e.preventDefault(),e.stopPropagation(),!0);var Yr,Jr,Zr=Object.defineProperty,Qr=Object.getOwnPropertyDescriptor,Xr=(e,n,t,r)=>{for(var i,a=r>1?void 0:r?Qr(n,t):n,o=e.length-1;o>=0;o--)(i=e[o])&&(a=(r?i(n,t,a):i(a))||a);return r&&a&&Zr(n,t,a),a};(Jr=Yr||(Yr={}))[Jr.LOADING=0]="LOADING",Jr[Jr.UNAVAILABLE=1]="UNAVAILABLE",Jr[Jr.ERRORED=2]="ERRORED",Jr[Jr.READY=3]="READY",Jr[Jr.CONNECTING=4]="CONNECTING",Jr[Jr.UNLOADED=5]="UNLOADED",Jr[Jr.AUTHENTICATING=6]="AUTHENTICATING",Jr[Jr.RTC_CONNECTING=7]="RTC_CONNECTING",Jr[Jr.CONNECTED=8]="CONNECTED";class ei{constructor(){this.roomId=null,this.status=5,this.participants=new Map,this.syncState=this.syncState.bind(this),this.connect=this.connect.bind(this),this.disconnect=this.disconnect.bind(this),F(this,{client:!1,connecting:!1})}syncState(){this.client&&(this.roomId=H.toNullable(this.client.roomId),this.participants.clear(),this.client.participants.forEach(((e,n)=>this.participants.set(n,e))))}async loadVoice(){if(5===this.status){this.status=0;try{const{default:e}=await Fn((()=>import("./VoiceClient.5abf25e5.js")),["/revite/refs/pull/288/merge/assets/VoiceClient.5abf25e5.js","/revite/refs/pull/288/merge/assets/vendor.182b0579.js"]),n=new e;n.on("startProduce",this.syncState),n.on("stopProduce",this.syncState),n.on("userJoined",this.syncState),n.on("userLeft",this.syncState),n.on("userStartProduce",this.syncState),n.on("userStopProduce",this.syncState),G((()=>{n.supported()?(this.status=3,this.client=n):this.status=1}))}catch(e){console.error("Failed to load voice library!",e),G((()=>{this.status=1}))}}}async connect(e){var n;if(!(null==(n=this.client)?void 0:n.supported()))throw new Error("RTC is unavailable");this.connecting=!0,this.status=4;try{const n=await e.joinCall();await this.client.connect(e.client.configuration.features.voso.ws,e._id),G((()=>{this.status=6})),await this.client.authenticate(n.token),this.syncState(),G((()=>{this.status=7})),await this.client.initializeTransports()}catch(t){return console.error(t),G((()=>{this.status=3})),e}return G((()=>{this.status=8,this.connecting=!1})),e}disconnect(){var e;this.connecting=!1,this.status=3,null==(e=this.client)||e.disconnect(),this.syncState()}isProducing(e){var n;switch(e){case"audio":return void 0!==(null==(n=this.client)?void 0:n.audioProducer)}}isDeaf(){return!!this.client&&this.client.isDeaf}async startDeafen(){var e;if(!this.client)return console.log("No client object");this.client.isDeaf=!0,null==(e=this.client)||e.consumers.forEach((e=>{var n;null==(n=e.audio)||n.pause()}))}async stopDeafen(){var e;if(!this.client)return console.log("No client object");this.client.isDeaf=!1,null==(e=this.client)||e.consumers.forEach((e=>{var n;null==(n=e.audio)||n.resume()}))}async startProducing(e){var n,t;switch(e){case"audio":{if(void 0!==(null==(n=this.client)?void 0:n.audioProducer))return console.log("No audio producer.");if(void 0===navigator.mediaDevices)return console.log("No media devices.");const e=window.localStorage.getItem("audioInputDevice"),r=await navigator.mediaDevices.getUserMedia({audio:!e||{deviceId:e}});await(null==(t=this.client)?void 0:t.startProduce(r.getAudioTracks()[0],"audio"))}}}stopProducing(e){var n;null==(n=this.client)||n.stopProduce(e)}}Xr([V],ei.prototype,"syncState",1),Xr([V],ei.prototype,"loadVoice",1),Xr([V],ei.prototype,"connect",1),Xr([V],ei.prototype,"disconnect",1);const ni=new ei,ti=h((({user:e})=>{const n=b(),{openScreen:t}=dt(),r=[];let i=null;return e.relationship===k.Friend&&(i=d(kr,{user:e}),r.push(d(v,null,d(vt,{type:"circle",className:zt($r,Hr),onClick:t=>Kr(t,e.openDM().then(ni.connect).then((e=>n.push(`/channel/${e._id}`))))},d(q,{size:20})),d(vt,{type:"circle",className:$r,onClick:t=>Kr(t,e.openDM().then((e=>n.push(`/channel/${e._id}`))))},d(W,{size:20}))))),e.relationship===k.Incoming&&(r.push(d(vt,{type:"circle",className:$r,onClick:n=>Kr(n,e.addFriend())},d(K,{size:24}))),i=d(m,{id:"app.special.friends.incoming"})),e.relationship===k.Outgoing&&(i=d(m,{id:"app.special.friends.outgoing"})),e.relationship!==k.Friend&&e.relationship!==k.Outgoing&&e.relationship!==k.Incoming||r.push(d(vt,{type:"circle",className:zt($r,qr,Fr),onClick:n=>Kr(n,e.relationship===k.Friend?t({id:"special_prompt",type:"unfriend_user",target:e}):e.removeFriend())},d(D,{size:24}))),e.relationship===k.Blocked&&r.push(d(vt,{type:"circle",className:zt($r,Fr),onClick:n=>Kr(n,e.unblockUser())},d(Y,{size:24}))),d("div",{className:Dr,onClick:()=>t({id:"profile",user_id:e._id}),onContextMenu:J("Menu",{user:e._id})},d(St,{target:e,size:36,status:!0}),d("div",{className:Pr},d("span",null,e.username),i&&d("span",{className:Ur},i)),d("div",{className:jr},r))})),ri=h((({users:e,onClose:n})=>d(bt,{visible:!0,title:d(m,{id:"app.special.friends.pending"}),onClose:n},d("div",{className:Lr},e.map((e=>d(ti,{user:e,key:e._id})))))));var ii="_identityMain_1j1po_1",ai="_buttons_1j1po_11";var oi="_uploader_1m2vo_1",si="_icon_1m2vo_5",li="_image_1m2vo_5",ci="_banner_1m2vo_8",ui="_modify_1m2vo_11",di="_uploading_1m2vo_22",pi="_edit_1m2vo_29",fi="_desaturate_1m2vo_35",hi="_small_1m2vo_59";async function vi(e,n,t,r){const i=new FormData;i.append("file",t);return(await Q.post(`${e}/${n}`,i,s({headers:{"Content-Type":"multipart/form-data"}},r))).data.id}function gi(e,n,t,r){const i=document.createElement("input");i.type="file",i.multiple=null!=r&&r,i.onchange=async r=>{var i;const a=null==(i=r.currentTarget)?void 0:i.files;if(a){for(const n of a)if(n.size>e)return t();n(Array.from(a))}},i.click()}function mi(e){const{fileType:n,maxFileSize:t,remove:r}=e,{openScreen:i}=dt(),a=y(pt),[o,s]=U(!1);function l(){o||gi(t,(async t=>{s(!0);try{"multi"===e.behaviour?e.onChange(t):"ask"===e.behaviour?e.onChange(t[0]):await e.onUpload(await vi(a.configuration.features.autumn.url,n,t[0]))}catch(r){return i({id:"error",error:mt(r)})}finally{s(!1)}}),(()=>i({id:"error",error:"FileTooLarge"})),"multi"===e.behaviour)}if("multi"===e.behaviour&&e.append&&f((()=>{function n(n){var t;const r=null==(t=n.clipboardData)?void 0:t.items;if(void 0===r)return;if("multi"!==e.behaviour||!e.append)return;const a=[];for(const o of r)if(!o.type.startsWith("text/")){const n=o.getAsFile();n&&(n.size>e.maxFileSize&&i({id:"error",error:"FileTooLarge"}),a.push(n))}e.append(a)}function t(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy")}function r(n){var t;if(n.preventDefault(),"multi"!==e.behaviour||!e.append)return;const r=null==(t=n.dataTransfer)?void 0:t.files;if(r){const n=[];for(const t of r)t.size>e.maxFileSize&&i({id:"error",error:"FileTooLarge"}),n.push(t);e.append(n)}}return document.addEventListener("paste",n),document.addEventListener("dragover",t),document.addEventListener("drop",r),()=>{document.removeEventListener("paste",n),document.removeEventListener("dragover",t),document.removeEventListener("drop",r)}}),[i,e,e.append]),"icon"===e.style||"banner"===e.style){const{style:n,previewURL:r,defaultPreview:i,width:a,height:s}=e;return d("div",{className:zt(oi,{[si]:"icon"===n,[ci]:"banner"===n}),"data-uploading":o},d("div",{className:zt(li,e.desaturateDefault&&null==r&&fi),style:{backgroundImage:"icon"===n?`url('${null!=r?r:i}')`:r?`linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url('${r}')`:"black",width:a,height:s},onClick:l},o?d("div",{className:di},d(Nt,{type:"ring"})):d("div",{className:pi},d(Z,{size:30}))),d("div",{className:ui},d("span",{onClick:function(){o||("attachment"===e.style?e.attached?e.remove():l():e.previewURL?e.remove():l())}},o?d(m,{id:"app.main.channel.uploading_file"}):e.previewURL?d(m,{id:"app.settings.actions.remove"}):d(m,{id:"app.settings.actions.upload"})),d("span",{className:hi},d(m,{id:"app.settings.actions.max_filesize",fields:{filesize:Tt(t)}}))))}if("attachment"===e.style){const{attached:n,uploading:t,cancel:i,size:a}=e;return d(vt,{onClick:()=>t?i():n?r():void l(),rotate:t||n?"45deg":void 0},d(K,{size:a}))}return null}const _i=h((({server:e,onClose:n})=>{var t,r;const i=kt(),a=i.members.getKey({server:e._id,user:i.user._id});if(!a)return null;const[o,s]=U(""),[l,c]=U("");return f((()=>{var e,n;s(null!=(e=a.nickname)?e:""),c(null!=(n=a.nickname)?n:"")}),[a.nickname]),d(bt,{visible:!0,title:d(m,{id:"app.special.popovers.server_identity.title",fields:{server:e.name}}),onClose:n},d("div",{className:ii},d("div",null,d($n,{type:"subtle"},d(m,{id:"app.special.popovers.server_identity.avatar"})),d(mi,{width:80,height:80,style:"icon",fileType:"avatars",behaviour:"upload",maxFileSize:4e6,onUpload:e=>a.edit({avatar:e}),remove:()=>a.edit({remove:"Avatar"}),defaultPreview:null==(t=i.user)?void 0:t.generateAvatarURL({max_side:256},!1),previewURL:i.generateFileURL(null!=(r=a.avatar)?r:void 0,{max_side:256},!0),desaturateDefault:!0})),d("div",null,d($n,{type:"subtle"},d(m,{id:"app.special.popovers.server_identity.nickname"})),d(Hn,{value:o,placeholder:i.user.username,onChange:e=>s(e.currentTarget.value)}),d("div",{className:ai},d(Gn,{disabled:o===l,onClick:()=>a.edit({nickname:o})},d(m,{id:"app.special.modals.actions.save"})),""!==l&&d(Gn,{plain:!0,onClick:()=>a.edit({remove:"Nickname"})},d(m,{id:"app.special.modals.actions.remove"}))))))}));function yi(e){var n=e,{user:t}=n,r=u(n,["user"]);return d(ar,s({},r),d(St,{target:t,size:32}),d(It,{user:t}))}function bi(e){const[n,t]=U([]),r=[...e.omit||[],"00000000000000000000000000"],i=kt();return d(bt,{visible:!0,title:d(m,{id:"app.special.popovers.user_picker.select"}),onClose:e.onClose,actions:[{children:d(m,{id:"app.special.modals.actions.ok"}),onClick:()=>e.callback(n).then(e.onClose)}]},d("div",{className:Lr},[...i.users.values()].filter((e=>e&&e.relationship===k.Friend&&!r.includes(e._id))).map((e=>d(yi,{key:e._id,user:e,checked:n.includes(e._id),onChange:r=>{t(r?[...n,e._id]:n.filter((n=>n!==e._id)))}})))))}var wi,xi,ki="_header_jxnjw_8",Ci="_profile_jxnjw_21",zi="_details_jxnjw_30",Si="_username_jxnjw_42",Ti="_status_jxnjw_46",Ni="_tabs_jxnjw_50",Ii="_content_jxnjw_70",Ei="_empty_jxnjw_82",Oi="_category_jxnjw_87",Ri="_badges_jxnjw_101",Ai="_entries_jxnjw_112",Li="_entry_jxnjw_121";(xi=wi||(wi={}))[xi.Developer=1]="Developer",xi[xi.Translator=2]="Translator",xi[xi.Supporter=4]="Supporter",xi[xi.ResponsibleDisclosure=8]="ResponsibleDisclosure",xi[xi.EarlyAdopter=256]="EarlyAdopter";const Mi=h((({user_id:e,onClose:n,dummy:t,dummyProfile:r})=>{var i,a,o;const{openScreen:s,writeClipboard:l}=dt(),[c,u]=U(void 0),[p,h]=U(void 0),g=b(),_=kt(),w=y(ft),[C,z]=U("profile"),S=_.users.get(e);if(!S)return n&&f(n,[]),null;const T=null==p?void 0:p.users.map((e=>_.users.get(e))),N=[..._.channels.values()].filter((n=>"Group"===(null==n?void 0:n.channel_type)&&n.recipient_ids.includes(e))),I=null==p?void 0:p.servers.map((e=>_.servers.get(e)));X((()=>{e&&(void 0!==c&&u(void 0),void 0!==p&&h(void 0))}),[e]),f((()=>{t&&u(r)}),[t,r]),f((()=>{t||w===ht.ONLINE&&void 0===p&&(h(null),S.fetchMutual().then(h))}),[p,w,t,S]),f((()=>{t||w===ht.ONLINE&&void 0===c&&(u(null),S.permission&x.UserPermission.ViewProfile&&S.fetchProfile().then(u))}),[c,w,t,S]);const E=c&&_.generateFileURL(c.background,{width:1e3},!0),O=null!=(i=S.badges)?i:0,R=null!=(a=S.flags)?a:0;return d(bt,{visible:!0,border:t,padding:!1,onClose:n,dontModal:t},d("div",{className:ki,"data-force":(null==c?void 0:c.background)?"light":void 0,style:{backgroundImage:E&&`linear-gradient( rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7) ), url('${E}')`}},d("div",{className:Ci},d(St,{size:80,target:S,status:!0,animate:!0,hover:void 0!==S.avatar,onClick:()=>S.avatar&&s({id:"image_viewer",attachment:S.avatar})}),d("div",{className:zi},d(ee,null,d("span",{className:Si,onClick:()=>l(S.username)},"@",S.username)),(null==(o=S.status)?void 0:o.text)&&d("span",{className:Ti},d(kr,{user:S,tooltip:!0}))),S.relationship===k.Friend&&d(ee,null,d(ut,{content:d(m,{id:"app.context_menu.message_user"})},d(vt,{onClick:()=>{null==n||n(),g.push(`/open/${e}`)}},d(W,{size:30})))),S.relationship===k.User&&d(vt,{onClick:()=>{null==n||n(),t||g.push("/settings/profile")}},d(ie,{size:28})),!S.bot&&2!=R&&4!=R&&(S.relationship===k.Incoming||S.relationship===k.None)&&d(vt,{onClick:()=>S.addFriend()},d(ae,{size:28}))),d("div",{className:Ni},d("div",{"data-active":"profile"===C,onClick:()=>z("profile")},d(m,{id:"app.special.popovers.user_profile.profile"})),S.relationship!==k.User&&d(v,null,d("div",{"data-active":"friends"===C,onClick:()=>z("friends")},d(m,{id:"app.special.popovers.user_profile.mutual_friends"})),d("div",{"data-active":"groups"===C,onClick:()=>z("groups")},d(m,{id:"app.special.popovers.user_profile.mutual_groups"})),d("div",{"data-active":"servers"===C,onClick:()=>z("servers")},d(m,{id:"app.special.popovers.user_profile.mutual_servers"}))))),d("div",{className:Ii},"profile"===C&&d("div",null,!((null==c?void 0:c.content)||O>0||R>0||S.bot)&&d("div",{className:Ei},d(m,{id:"app.special.popovers.user_profile.empty"})),1&R?d($n,{type:"error",block:!0},"User is suspended"):void 0,2&R?d($n,{type:"error",block:!0},"User deleted their account"):void 0,4&R?d($n,{type:"error",block:!0},"User is banned"):void 0,S.bot?d(v,null,d("div",{className:Oi},"bot owner"),d("div",{onClick:()=>S.bot&&s({id:"profile",user_id:S.bot.owner}),className:Li,key:S.bot.owner},d(St,{size:32,target:_.users.get(S.bot.owner)}),d("span",null,d(It,{user:_.users.get(S.bot.owner)})))):void 0,O>0&&d("div",{className:Oi},d(m,{id:"app.special.popovers.user_profile.sub.badges"})),O>0&&d("div",{className:Ri},d(ee,null,1&O?d(ut,{content:d(m,{id:"app.navigation.tabs.dev"})},d("img",{src:"/assets/badges/developer.svg"})):d(v,null),2&O?d(ut,{content:d(m,{id:"app.special.popovers.user_profile.badges.translator"})},d("img",{src:"/assets/badges/translator.svg",style:{cursor:"pointer"},onClick:()=>{window.open("https://weblate.insrt.uk/projects/revolt/web-app/","_blank")}})):d(v,null),256&O?d(ut,{content:d(m,{id:"app.special.popovers.user_profile.badges.early_adopter"})},d("img",{src:"/assets/badges/early_adopter.svg"})):d(v,null),4&O?d(ut,{content:d(m,{id:"app.special.popovers.user_profile.badges.supporter"})},d(ne,{size:32,color:"#efab44",style:{cursor:"pointer"},onClick:()=>{window.open("https://insrt.uk/donate","_blank")}})):d(v,null),8&O?d(ut,{content:d(m,{id:"app.special.popovers.user_profile.badges.responsible_disclosure"})},d(te,{size:32,color:"gray"})):d(v,null))),(null==c?void 0:c.content)&&d("div",{className:Oi},d(m,{id:"app.special.popovers.user_profile.sub.information"})),d(yt,{content:null==c?void 0:c.content})),"friends"===C&&(T?d("div",{className:Ai},0===T.length?d("div",{className:Ei},d(m,{id:"app.special.popovers.user_profile.no_users"})):T.map((e=>e&&d("div",{onClick:()=>s({id:"profile",user_id:e._id}),className:Li,key:e._id},d(St,{size:32,target:e}),d("span",null,e.username))))):d(Nt,{type:"ring"})),"groups"===C&&d("div",{className:Ai},0===N.length?d("div",{className:Ei},d(m,{id:"app.special.popovers.user_profile.no_groups"})):N.map((e=>"Group"===(null==e?void 0:e.channel_type)&&d(re,{to:`/channel/${e._id}`},d("div",{className:Li,key:e._id},d(Et,{target:e,size:32}),d("span",null,e.name)))))),"servers"===C&&d("div",{className:Ai},I&&0!==I.length?I.map((e=>e&&d(re,{to:`/server/${e._id}`},d("div",{className:Li,key:e._id},d(Ot,{target:e,size:32}),d("span",null,e.name))))):d("div",{className:Ei},d(m,{id:"app.special.popovers.user_profile.no_servers"})))))}));function ji(){const{screen:e}=y(Rt),{openScreen:n}=dt(),t=()=>Mt?n({id:"none"}):gt("Modal","close");switch(e.id){case"profile":return d(Mi,l(s({},e),{onClose:t}));case"user_picker":return d(bi,l(s({},e),{onClose:t}));case"image_viewer":return d(Rr,l(s({},e),{onClose:t}));case"channel_info":return d(Nr,l(s({},e),{onClose:t}));case"pending_requests":return d(ri,l(s({},e),{onClose:t}));case"modify_account":return d(Ar,s({onClose:t},e));case"create_bot":return d(Ir,s({onClose:t},e));case"special_prompt":return d(Lt,s({onClose:t},e));case"special_input":return d(At,s({onClose:t},e));case"server_identity":return d(_i,s({onClose:t},e))}return null}const Bi={};async function Di(e,n){try{return new Notification(e,n)}catch(t){const r=await navigator.serviceWorker.getRegistration();null==r||r.showNotification(e,n)}}const Pi=Dn((function({options:e,notifs:n}){var t,r,i;const a=jt(),o=null!=(t=null==e?void 0:e.desktopEnabled)&&t,s=y(pt),{guild:l,channel:c}=le(),u=b(),d=y(Bt),p=ce((async e=>{var t,r,i,l,p,f,h,v,m,_,y,b,w,x;if(e.author_id===s.user._id)return;if(e.channel_id===c&&document.hasFocus())return;if((null==(t=s.user.status)?void 0:t.presence)===g.Busy)return;if((null==(r=e.author)?void 0:r.relationship)===k.Blocked)return;const C=Pn(n,e.channel);if(!Vn(C,e,s.user._id))return;if(d("message"),!o)return;let z,S,T,N;switch(null==(i=e.channel)?void 0:i.channel_type){case"SavedMessages":return;case"DirectMessage":z=`@${null==(l=e.author)?void 0:l.username}`;break;case"Group":z="00000000000000000000000000"===(null==(p=e.author)?void 0:p._id)?e.channel.name:`@${null==(f=e.author)?void 0:f.username} - ${e.channel.name}`;break;case"TextChannel":z=`@${null==(h=e.author)?void 0:h.username} (#${e.channel.name}, ${null==(v=e.channel.server)?void 0:v.name})`;break;default:z=null==(m=e.channel)?void 0:m._id}if(e.attachments){const n=e.attachments.find((e=>"Image"===e.metadata.type));n&&(S=s.generateFileURL(n,{max_side:720}))}if("string"==typeof e.content)T=s.markdownToText(e.content),N=null==(_=e.author)?void 0:_.generateAvatarURL({max_side:256});else{const n=s.users;switch(e.content.type){case"user_added":case"user_remove":{const t=n.get(e.content.id);T=a("app.main.channel.system."+("user_added"===e.content.type?"added_by":"removed_by"),{user:null==t?void 0:t.username,other_user:null==(y=n.get(e.content.by))?void 0:y.username}),N=null==t?void 0:t.generateAvatarURL({max_side:256})}break;case"user_joined":case"user_left":case"user_kicked":case"user_banned":{const t=n.get(e.content.id);T=a(`app.main.channel.system.${e.content.type}`,{user:null==t?void 0:t.username}),N=null==t?void 0:t.generateAvatarURL({max_side:256})}break;case"channel_renamed":{const t=n.get(e.content.by);T=a("app.main.channel.system.channel_renamed",{user:null==(b=n.get(e.content.by))?void 0:b.username,name:e.content.name}),N=null==t?void 0:t.generateAvatarURL({max_side:256})}break;case"channel_description_changed":case"channel_icon_changed":{const t=n.get(e.content.by);T=a(`app.main.channel.system.${e.content.type}`,{user:null==(w=n.get(e.content.by))?void 0:w.username}),N=null==t?void 0:t.generateAvatarURL({max_side:256})}}}const I=await Di(z,{icon:N,image:S,body:T,timestamp:ue(e._id),tag:null==(x=e.channel)?void 0:x._id,badge:"/assets/icons/android-chrome-512x512.png",silent:!0});I&&(I.addEventListener("click",(()=>{window.focus();const n=e.channel_id;if(n!==c){const e=s.channels.get(n);e&&("TextChannel"===e.channel_type?u.push(`/server/${e.server_id}/channel/${n}`):u.push(`/channel/${n}`))}})),Bi[e.channel_id]=I,I.addEventListener("close",(()=>delete Bi[e.channel_id])))}),[u,o,a,c,s,n,d]),h=ce((async e=>{var n,t;if((null==(t=null==(n=s.user)?void 0:n.status)?void 0:t.presence)===g.Busy)return;if(!o)return;let r;switch(e.relationship){case k.Incoming:r=a("notifications.sent_request",{person:e.username});break;case k.Friend:r=a("notifications.now_friends",{person:e.username});break;default:return}const i=await Di(r,{icon:e.generateAvatarURL({max_side:256}),badge:"/assets/icons/android-chrome-512x512.png",timestamp:+new Date});null==i||i.addEventListener("click",(()=>{u.push("/friends")}))}),[null==(i=null==(r=s.user)?void 0:r.status)?void 0:i.presence,u,o,a]);return f((()=>(s.addListener("message",p),s.addListener("user/relationship",h),()=>{s.removeListener("message",p),s.removeListener("user/relationship",h)})),[s,d,l,c,o,n,p,h]),f((()=>{function e(){"visible"===document.visibilityState&&Bi[c]&&Bi[c].close()}return e(),document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)}),[l,c]),null}),(e=>({options:e.settings.notification,notifs:e.notifications})),!0);function Ui(){return d(se,null,d(oe,{path:"/server/:server/channel/:channel"},d(Pi,null)),d(oe,{path:"/channel/:channel"},d(Pi,null)),d(oe,{path:"/"},d(Pi,null)))}var $i=Dn((function(e){const n=y(pt);return f((()=>{Un({type:"QUEUE_DROP_ALL"})}),[]),f((()=>{function t(n){n.nonce&&e.messages.find((e=>e.id===n.nonce))&&Un({type:"QUEUE_REMOVE",nonce:n.nonce})}return n.addListener("message",t),()=>n.removeListener("message",t)}),[n,e.messages]),null}),(e=>({messages:[...e.queue]})));const Fi={};function Hi(e,n){const t={};for(const r of Object.keys(e)){const[i,a]=e[r];if(i<(null!=n?n:{})[r])continue;let o;o="{"===a[0]?JSON.parse(a):a,Fi[r]=o,t[r]=[i,o]}return t}var Gi=Dn((function(e){var n;const t=y(pt),r=y(ft);f((()=>{r===ht.ONLINE&&(t.syncFetchSettings(Wn.filter((n=>{var t,r;return!(null==(r=null==(t=e.sync)?void 0:t.disabled)?void 0:r.includes(n))}))).then((e=>{Un({type:"SYNC_UPDATE",update:Hi(e)})})),t.syncFetchUnreads().then((e=>Un({type:"UNREADS_SET",unreads:e}))))}),[t,null==(n=e.sync)?void 0:n.disabled,r]);const i=ce(((e,n)=>{const r=+new Date;Un({type:"SYNC_SET_REVISION",key:e,timestamp:r}),t.syncSetSettings({[e]:n},r)}),[t]),a=de((()=>{var n;return null!=(n=e.sync.disabled)?n:[]}),[e.sync.disabled]);for(const[o,s]of[["appearance",e.settings.appearance],["theme",e.settings.theme],["locale",e.locale],["notifications",e.notifications]])f((()=>{-1===a.indexOf(o)&&void 0!==Fi[o]&&(pe(Fi[o],s)||i(o,s)),Fi[o]=s}),[o,i,a,s]);return f((()=>{function n(n){if("UserSettingsUpdate"===n.type){const t=Hi(n.update,e.sync.revision);Un({type:"SYNC_UPDATE",update:t})}}return t.addListener("packet",n),()=>t.removeListener("packet",n)}),[t,a,e.sync]),null}),(e=>({settings:e.settings,locale:e.locale,sync:e.sync,notifications:e.notifications})));function Vi(e){const n=e,{active:t}=n,r=u(n,["active"]);return t?d("a",{onClick:r.onClick},e.children):d(re,s({},r))}const Wi=_.div`
    background: var(--secondary-background);
`,qi=_.div`
    z-index: 100;
    max-width: 500px;
    margin: 0 auto;
    display: flex;
    height: var(--bottom-navigation-height);
`,Ki=_.a`
    flex: 1;

    > a,
    > div,
    > a > div {
        width: 100%;
        height: 100%;
    }

    > div,
    > a > div {
        padding: 0 20px;
    }

    ${e=>e.active&&fe`
            background: var(--hover);
        `}
`;var Yi=Dn(h((({lastOpened:e})=>{const n=kt(),t=n.users.get(n.user._id),r=b(),i=he().pathname,a=e.home,o=i.startsWith("/friends"),s=i.startsWith("/settings");return d(Wi,null,d(qi,null,d(Ki,{active:!(o||s)},d(vt,{onClick:()=>{s&&r.length>0&&r.goBack(),a?r.push(`/channel/${a}`):r.push("/")}},d(ve,{size:24}))),d(Ki,{active:o},d(Vi,{active:o,to:"/friends"},d(vt,null,d(ge,{size:25})))),d(Ki,{active:s},d(Vi,{active:s,to:"/settings"},d(vt,null,d(St,{target:t,size:26,status:!0}))))))})),(e=>({lastOpened:e.lastOpened}))),Ji=_.div`
    height: 100%;
    display: flex;
    user-select: none;
    flex-direction: row;
    align-items: stretch;
`;const Zi=_.div`
    height: 100%;
    width: 240px;
    display: flex;
    flex-shrink: 0;
    flex-direction: column;
    border-end-start-radius: 8px;
    background: var(--secondary-background);

    ${e=>e.mobilePadding&&Dt&&fe`
            padding-bottom: 50px;
        `}
`,Qi=_.div`
    padding: 6px;
    flex-grow: 1;
    overflow-y: scroll;

    > img {
        width: 100%;
    }
`,Xi={};function ea({small:e,always:n}){var t;if(!n)return null;const[r]=U(`${Math.random()}`),i=null!=(t=Xi[r])?t:0;return Xi[r]=i+1,d("div",{style:{textAlign:"center",fontSize:"0.8em"}},e?d(v,null,"P: ",i+1):d(v,null,"Painted ",i+1," time(s)."))}const na=_.div`
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;

    margin-top: 4px;
    padding: 6px 0 6px 8px;
    margin-bottom: 4px;
    white-space: nowrap;

    display: flex;
    align-items: center;
    flex-direction: row;
    justify-content: space-between;

    svg {
        cursor: pointer;
    }

    &:first-child {
        margin-top: 0;
        padding-top: 0;
    }

    ${e=>"uniform"===e.variant&&fe`
            padding-top: 6px;
        `}
`;function ta(e){const n=e,{text:t,action:r}=n,i=u(n,["text","action"]);return d(na,s({},i),t,r&&d(K,{size:16,onClick:r}))}function ra({channel:e,unreads:n}){const t=p(!0);X((()=>{function r(r){var i;if(!r)return;if(r._id!==e._id)return;if("SavedMessages"===r.channel_type||"VoiceChannel"===r.channel_type)return;const a=null==(i=n[e._id])?void 0:i.last_id;if(r.last_message){const n="string"==typeof r.last_message?r.last_message:r.last_message._id;(!a||a&&n.localeCompare(a)>0)&&(Un({type:"UNREADS_MARK_READ",channel:e._id,message:n}),e.ack(n,t.current),t.current=!1)}}return r(e),me((()=>e.last_message),(()=>r(e)))}),[e,n])}function ia(e,n){const t=e.last_message_id;let r,i;if(t&&n){const a=n[e._id];a?a.mentions&&a.mentions.length>0?(i=a.mentions.length,r="mention"):a.last_id&&t.localeCompare(a.last_id)>0&&(r="unread"):r="unread"}return{channel:e,timestamp:null!=t?t:e._id,unread:r,alertCount:i}}var aa={item:"_item_15670_1",normal:"_normal_15670_16",compact:"_compact_15670_19",user:"_user_15670_23",content:"_content_15670_40",avatar:"_avatar_15670_56",name:"_name_15670_60",subText:"_subText_15670_67",button:"_button_15670_73",alert:"_alert_15670_81",unread:"_unread_15670_92"};const oa=h((e=>{var n,t;const r=e,{active:i,alert:a,margin:o,alertCount:c,user:p,context:f,channel:h}=r,v=u(r,["active","alert","margin","alertCount","user","context","channel"]),{openScreen:_}=dt();return d("div",l(s({},v),{className:zt(aa.item,aa.user),"data-active":i,"data-margin":o,"data-alert":"string"==typeof a,"data-online":void 0!==h||p.online&&(null==(n=p.status)?void 0:n.presence)!==g.Invisible,onContextMenu:J("Menu",{user:p._id,channel:null==h?void 0:h._id,unread:a,contextualChannel:null==f?void 0:f._id})}),d(St,{className:aa.avatar,target:p,size:32,status:!0,showServerIdentity:!0}),d("div",{className:aa.name},d("div",null,d(It,{user:p,showServerIdentity:!0})),d("div",{className:aa.subText},"string"==typeof(null==(t=null==h?void 0:h.last_message)?void 0:t.content)&&a?h.last_message.content.slice(0,32):d(kr,{user:p}))),d("div",{className:aa.button},"Group"===(null==f?void 0:f.channel_type)&&f.owner_id===p._id&&d(ee,null,d(ut,{content:d(m,{id:"app.main.groups.owner"})},d(_e,{size:20}))),a&&d("div",{className:aa.alert,"data-style":a},c),!Dt&&h&&d(vt,{className:aa.icon,onClick:e=>Kr(e)&&_({id:"special_prompt",type:"close_dm",target:h})},d(D,{size:24}))))})),sa=h((e=>{var n;const t=e,{active:r,alert:i,alertCount:a,channel:o,user:c,compact:p}=t,f=u(t,["active","alert","alertCount","channel","user","compact"]);if("SavedMessages"===o.channel_type)throw"Invalid channel type.";if("DirectMessage"===o.channel_type){if(void 0===c)throw"No user provided.";return d(oa,s({},{active:r,alert:i,channel:o,user:c}))}const{openScreen:h}=dt();return d("div",l(s({},f),{"data-active":r,"data-alert":"string"==typeof i,"aria-label":o.name,className:zt(aa.item,{[aa.compact]:p}),onContextMenu:J("Menu",{channel:o._id,unread:void 0!==i})}),d(Et,{className:aa.avatar,target:o,size:p?24:32}),d("div",{className:aa.name},d("div",null,o.name),"Group"===o.channel_type&&d("div",{className:aa.subText},"string"==typeof(null==(n=o.last_message)?void 0:n.content)&&i?o.last_message.content.slice(0,32):d(m,{id:"quantities.members",plural:o.recipients.length,fields:{count:o.recipients.length}}))),d("div",{className:aa.button},i&&d("div",{className:aa.alert,"data-style":i},a),!Dt&&"Group"===o.channel_type&&d(vt,{className:aa.icon,onClick:()=>h({id:"special_prompt",type:"leave_group",target:o})},d(D,{size:24}))))}));function la(e){const n=e,{active:t,alert:r,alertCount:i,onClick:a,className:o,children:c,compact:p}=n,f=u(n,["active","alert","alertCount","onClick","className","children","compact"]);return d("div",l(s({},f),{className:zt(aa.item,{[aa.compact]:p,[aa.normal]:!p},o),onClick:a,"data-active":t,"data-alert":"string"==typeof r}),d("div",{className:aa.content},c),r&&d("div",{className:aa.alert,"data-style":r},i))}function ca(){const e=y(ft);return e===ht.OFFLINE?d(or,null,d(m,{id:"app.special.status.offline"})):e===ht.DISCONNECTED?d(or,null,d(m,{id:"app.special.status.disconnected"})):e===ht.CONNECTING?d(or,null,d(m,{id:"app.special.status.connecting"})):e===ht.RECONNECTING?d(or,null,d(m,{id:"app.special.status.reconnecting"})):null}var ua=Dn(h((e=>{const{pathname:n}=he(),t=y(pt),{channel:r}=le(),{openScreen:i}=dt(),a=[...t.channels.values()].filter((e=>"DirectMessage"===e.channel_type||"Group"===e.channel_type)).map((n=>ia(n,e.unreads))),o=t.channels.get(r);return r&&!o?d(ye,{to:"/"}):(o&&ra(l(s({},e),{channel:o})),f((()=>{r&&Un({type:"LAST_OPENED_SET",parent:"home",child:r})}),[r]),a.sort(((e,n)=>n.timestamp.localeCompare(e.timestamp))),d(Zi,{mobilePadding:!0},d(ca,null),d(Qi,null,d(Vi,{active:"/"===n,to:"/"},d(la,{active:"/"===n},d(be,{size:20}),d("span",null,d(m,{id:"app.navigation.tabs.home"})))),!Dt&&d(v,null,d(Vi,{active:"/friends"===n,to:"/friends"},d(la,{active:"/friends"===n,alert:void 0!==[...t.users.values()].find((e=>(null==e?void 0:e.relationship)===k.Incoming))?"unread":void 0},d(we,{size:20}),d("span",null,d(m,{id:"app.navigation.tabs.friends"}))))),d(Vi,{active:"SavedMessages"===(null==o?void 0:o.channel_type),to:"/open/saved"},d(la,{active:"SavedMessages"===(null==o?void 0:o.channel_type)},d(xe,{size:20}),d("span",null,d(m,{id:"app.navigation.tabs.saved"})))),!1,d(ta,{text:d(m,{id:"app.main.categories.conversations"}),action:()=>i({id:"special_input",type:"create_group"})}),0===a.length&&d("img",{src:"/revite/refs/pull/288/merge/assets/placeholder.a8e8f04f.svg",loading:"eager"}),a.map((e=>{let n;if("DirectMessage"===e.channel.channel_type){if(!e.channel.active)return null;if(n=e.channel.recipient,!n)return console.warn(`Skipped DM ${e.channel._id} because user was missing.`),null}return d(Vi,{key:e.channel._id,active:e.channel._id===r,to:`/channel/${e.channel._id}`},d(sa,{user:n,channel:e.channel,alert:e.unread,alertCount:e.alertCount,active:e.channel._id===r}))})),d(ea,null))))})),(e=>({unreads:e.unreads})),!0);const da=_.div`
    display: flex;
    flex-direction: column;

    .username {
        font-size: 13px;
        font-weight: 600;
    }

    .status {
        font-size: 11px;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    .tip {
        display: flex;
        align-items: center;
        gap: 4px;
        margin-top: 2px;
        color: var(--secondary-foreground);
    }
`;function pa({user:e,children:n}){return d(ut,{placement:"right-end",content:d(da,null,d(It,{className:"username",user:e,showServerIdentity:!0}),d("span",{className:"status"},d(kr,{user:e})))},n)}function fa({children:e,unread:n,count:t,size:r}){return d("svg",{width:r,height:r,"aria-hidden":"true",viewBox:"0 0 32 32"},d("use",{href:"#serverIndicator"}),d("foreignObject",{x:"0",y:"0",width:"32",height:"32",mask:n?"url(#server)":void 0},e),"unread"===n&&d("circle",{cx:"27",cy:"5",r:"5",fill:"white"}),"mention"===n&&d(v,null,d("circle",{cx:"27",cy:"5",r:"5",fill:"var(--error)"}),d("text",{x:"27",y:"5",r:"5",fill:"white",style:"text-align:center;","text-anchor":"middle",fontSize:"7.5",alignmentBaseline:"middle","dominant-baseline":"middle"},t<10?t:"9+")))}const ha=_.div`
    width: 56px;
    height: 100%;
    padding-left: 2px;
    display: flex;
    flex-direction: column;

    ${Dt&&fe`
        padding-bottom: 50px;
    `}
`,va=_.div`
    flex-grow: 1;
    display: flex;
    overflow-y: scroll;
    padding-bottom: 20px;
    flex-direction: column;

    scrollbar-width: none;

    > :first-child > svg {
        margin: 6px 0 6px 4px;
    }

    &::-webkit-scrollbar {
        width: 0px;
    }
`,ga=_.div`
    height: 58px;
    display: flex;
    align-items: center;

    :focus {
        outline: 3px solid blue;
    }

    > div {
        height: 42px;
        padding-inline-start: 6px;

        display: grid;
        place-items: center;

        border-start-start-radius: 50%;
        border-end-start-radius: 50%;

        &:active {
            transform: translateY(1px);
        }

        ${e=>e.active&&fe`
                &:active {
                    transform: none;
                }
            `}
    }

    > span {
        width: 0;
        display: relative;

        ${e=>!e.active&&fe`
                display: none;
            `}

        svg {
            margin-top: 5px;
            pointer-events: none;
        }
    }

    ${e=>(!e.active||e.home)&&fe`
            cursor: pointer;
        `}
`,ma=_.div`
    width: 50px;
    height: 56px;
    display: grid;
    place-items: center;
`;function _a(){return d("span",null,d("svg",{width:"54",height:"106",viewBox:"0 0 54 106",xmlns:"http://www.w3.org/2000/svg"},d("path",{d:"M54 53C54 67.9117 41.9117 80 27 80C12.0883 80 0 67.9117 0 53C0 38.0883 12.0883 26 27 26C41.9117 26 54 38.0883 54 53Z",fill:"var(--sidebar-active)"}),d("path",{d:"M27 80C4.5 80 54 53 54 53L54.0001 106C54.0001 106 49.5 80 27 80Z",fill:"var(--sidebar-active)"}),d("path",{d:"M27 26C4.5 26 54 53 54 53L53.9999 0C53.9999 0 49.5 26 27 26Z",fill:"var(--sidebar-active)"})))}var ya=Dn(h((({unreads:e,lastOpened:n})=>{var t,r,i;const a=kt(),{server:o}=le(),s=o?a.servers.get(o):void 0,l=[...a.servers.values()],c=[...a.channels.values()].map((n=>ia(n,e))),u=c.filter((e=>e.unread)).map((e=>{var n;return null==(n=e.channel)?void 0:n._id})),p=l.map((e=>{let n=0;for(const t of e.channel_ids){const e=c.find((e=>{var n;return(null==(n=e.channel)?void 0:n._id)===t}));(null==e?void 0:e.alertCount)&&(n+=e.alertCount)}return{server:e,unread:void 0!==e.channel_ids.find((e=>u.includes(e)))?n>0?"mention":"unread":void 0,alertCount:n}})),f=b(),h=he().pathname,{openScreen:v}=dt();let g,_=0;for(const d of c)"Group"===(null==(t=d.channel)?void 0:t.channel_type)&&d.unread&&(g="unread",_+=null!=(r=d.alertCount)?r:0),"DirectMessage"===(null==(i=d.channel)?void 0:i.channel_type)&&d.channel.active&&d.unread&&_++;_+=[...a.users.values()].filter((e=>e.relationship===k.Incoming)).length,_>0&&(g="mention");const y=void 0===s&&!h.startsWith("/invite");return d(ha,null,d(va,null,d(Vi,{active:y,to:n.home?`/channel/${n.home}`:"/"},d(ga,{home:!0,active:y},d(_a,null),d("div",{onContextMenu:J("Status"),onClick:()=>y&&f.push("/settings")},d(pa,{user:a.user},d(fa,{size:42,unread:g,count:_},d(St,{target:a.user,size:32,status:!0,hover:!0})))))),d(Cr,null),p.map((e=>{const t=e.server._id===(null==s?void 0:s._id),r=n[e.server._id];return d(Vi,{key:e.server._id,active:t,to:`/server/${e.server._id}${r?`/channel/${r}`:""}`},d(ga,{active:t,onContextMenu:J("Menu",{server:e.server._id,unread:e.unread})},d(_a,null),d(ut,{content:e.server.name,placement:"right"},d(fa,{size:42,unread:e.unread,count:e.alertCount},d(Ot,{size:32,target:e.server})))))})),d(vt,{onClick:()=>v({id:"special_input",type:"create_server"})},d(K,{size:36})),d(ea,{small:!0})),!Dt&&d(ma,null,d(re,{to:"/settings"},d(ut,{content:d(m,{id:"app.settings.title"}),placement:"right"},d(vt,null,d(z,{size:32,strokeWidth:"0.5"}))))))})),(e=>({unreads:e.unreads,lastOpened:e.lastOpened}))),ba=_.details`
    summary {
        ${e=>e.sticky&&fe`
                top: -1px;
                z-index: 10;
                position: sticky;
            `}

        ${e=>e.large&&fe`
                /*padding: 5px 0;*/
                background: var(--primary-background);
                color: var(--secondary-foreground);

                .padding {
                    /*TOFIX: make this applicable only for the friends list menu, DO NOT REMOVE.*/
                    display: flex;
                    align-items: center;
                    padding: 5px 0;
                    margin: 0.8em 0px 0.4em;
                    cursor: pointer;
                }
            `}

        outline: none;
        cursor: pointer;
        list-style: none;
        user-select: none;
        align-items: center;
        transition: 0.2s opacity;

        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;

        &::marker,
        &::-webkit-details-marker {
            display: none;
        }

        .title {
            flex-grow: 1;
            margin-top: 1px;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
        }

        .padding {
            display: flex;
            align-items: center;

            > svg {
                flex-shrink: 0;
                margin-inline-end: 4px;
                transition: 0.2s ease transform;
            }
        }
    }

    &:not([open]) {
        summary {
            opacity: 0.7;
        }

        summary svg {
            transform: rotateZ(-90deg);
        }
    }
`;function wa(e){var n,t=e,{id:r,defaultValue:i,summary:a,children:o}=t,l=u(t,["id","defaultValue","summary","children"]);const c=qn.getState();return d(ba,s({open:null!=(n=c.sectionToggle[r])?n:i,onToggle:e=>{var n;(n=e.currentTarget.open)===i?qn.dispatch({type:"SECTION_TOGGLE_UNSET",id:r}):qn.dispatch({type:"SECTION_TOGGLE_SET",id:r,state:n})}},l),d("summary",null,d("div",{class:"padding"},d(ke,{size:20}),a)),o)}var xa=_.div`
    gap: 6px;
    height: 48px;
    flex: 0 auto;
    display: flex;
    flex-shrink: 0;
    padding: 0 16px;
    font-weight: 600;
    user-select: none;
    align-items: center;

    background-size: cover !important;
    background-position: center !important;
    background-color: var(--primary-header);

    svg {
        flex-shrink: 0;
    }

    .menu {
        margin-inline-end: 8px;
        color: var(--secondary-foreground);
    }

    /*@media only screen and (max-width: 768px) {
        padding: 0 12px;
    }*/

    ${()=>Dt&&fe`
            height: 56px;
        `}

    ${e=>e.background&&fe`
            height: 120px !important;
            align-items: flex-end;

            text-shadow: 0px 0px 1px black;
        `}

    ${e=>"secondary"===e.placement&&fe`
            background-color: var(--secondary-header);
            padding: 14px;
        `}

    ${e=>e.borders&&fe`
            border-start-start-radius: 8px;
        `}
`;function ka(){if(!Dt)return null;return d("div",{className:"menu",onClick:function(){var e;null==(e=document.querySelector("#app > div > div"))||e.scrollTo({behavior:"smooth",left:0})}},d(Ce,{size:27}))}const Ca=_.div`
    flex-grow: 1;
`;var za=h((({server:e})=>{const n=e.generateBannerURL({width:480});return d(xa,{borders:!0,placement:"secondary",background:void 0!==n,style:{background:n?`url('${n}')`:void 0}},e.flags&&1&e.flags?d(ut,{content:"Official Server",placement:"bottom-start"},d("svg",{width:"20",height:"20"},d("image",{xlinkHref:"/assets/badges/verified.svg",height:"20",width:"20"}),d("image",{xlinkHref:"/assets/badges/revolt_r.svg",height:"15",width:"15",x:"2",y:"3",style:"justify-content: center; align-items: center; filter: brightness(0);"}))):void 0,e.flags&&2&e.flags?d(ut,{content:"Verified Server",placement:"bottom-start"},d("svg",{width:"20",height:"20"},d("image",{xlinkHref:"/assets/badges/verified.svg",height:"20",width:"20"}),d("foreignObject",{x:"2",y:"2",width:"15",height:"15"},d(R,{size:15,color:"black",strokeWidth:8})))):void 0,d(Ca,null,e.name),(e.permission&x.ServerPermission.ManageServer)>0&&d("div",{className:"actions"},d(re,{to:`/server/${e._id}/settings`},d(vt,null,d(z,{size:24})))))}));const Sa=_.div`
    height: 100%;
    width: 240px;
    display: flex;
    flex-shrink: 0;
    flex-direction: column;
    background: var(--secondary-background);
    border-start-start-radius: 8px;
    overflow: hidden;

    ${Dt&&fe`
        padding-bottom: 50px;
    `}
`,Ta=_.div`
    padding: 6px;
    flex-grow: 1;
    overflow-y: scroll;

    > svg {
        width: 100%;
    }
`;var Na=Dn(h((e=>{const n=kt(),{server:t,channel:r}=le(),i=n.servers.get(t);if(!i)return d(ye,{to:"/"});const a=r?n.channels.get(r):void 0;if(!a&&i.channel_ids.length>0)return d(ye,{to:`/server/${t}/channel/${i.channel_ids[0]}`});if(r&&!a)return d(ye,{to:`/server/${t}`});a&&ra(l(s({},e),{channel:a})),f((()=>{r&&Un({type:"LAST_OPENED_SET",parent:t,child:r})}),[r,t]);const o=new Set(i.channel_ids),c=[];function u(t){const r=n.channels.get(t);if(!r)return;const o=(null==a?void 0:a._id)===r._id;return d(Vi,{onClick:e=>{e.shiftKey&&(gt("MessageBox","append",`<#${r._id}>`,"channel_mention"),e.preventDefault())},key:r._id,active:o,to:`/server/${i._id}/channel/${r._id}`},d(sa,{channel:r,active:o,alert:ia(r,e.unreads).unread,compact:!0}))}if(i.categories)for(const s of i.categories){const e=[];for(const n of s.channels)o.delete(n),e.push(u(n));c.push(d(wa,{id:`category_${s.id}`,defaultValue:!0,summary:d(ta,{text:s.title})},e))}for(const s of Array.from(o).reverse())c.unshift(u(s));return d(Sa,null,d(za,{server:i}),d(ca,null),d(Ta,{onContextMenu:J("Menu",{server_list:i._id})},c),d(ea,{small:!0}))})),(e=>({unreads:e.unreads})));function Ia(){const e=ze((e=>{var n;return null==(n=e.sectionToggle.sidebar_channels)||n}));return d(Ji,null,d(se,null,d(oe,{path:"/settings"}),d(oe,{path:"/server/:server/channel/:channel"},d(ya,null),e&&d(Na,null)),d(oe,{path:"/server/:server"},d(ya,null),e&&d(Na,null)),d(oe,{path:"/channel/:channel"},d(ya,null),e&&d(ua,null)),d(oe,{path:"/"},d(ya,null),e&&d(ua,null))))}function Ea(e,n){return function(t){return e(n(t))}}function Oa(e,n){return n(e)}function Ra(e,n){return function(t){return e(n,t)}}function Aa(e,n){return function(){return e(n)}}function La(e){return function(n){return n[e]}}function Ma(e,n){return n(e),e}function ja(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n}function Ba(e){e()}function Da(e){return function(){return e}}function Pa(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(){n.map(Ba)}}function Ua(){}function $a(e,n){return e(1,n)}function Fa(e,n){e(0,n)}function Ha(e){e(2)}function Ga(e){return e(4)}function Va(e,n){return $a(e,Ra(n,0))}function Wa(e,n){var t=e(1,(function(e){t(),n(e)}));return t}function qa(){var e=[];return function(n,t){switch(n){case 2:return void e.splice(0,e.length);case 1:return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)};case 0:return void e.slice().forEach((function(e){e(t)}));default:throw new Error("unrecognized action "+n)}}}function Ka(e){var n=e,t=qa();return function(e,r){switch(e){case 1:r(n);break;case 0:n=r;break;case 4:return n}return t(e,r)}}function Ya(e){return Ma(qa(),(function(n){return Va(e,n)}))}function Ja(e,n){return Ma(Ka(n),(function(n){return Va(e,n)}))}function Za(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){return n.reduceRight(Oa,e)}}function Qa(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var i=Za.apply(void 0,t);return function(n,t){switch(n){case 1:return $a(e,i(t));case 2:return void Ha(e);default:throw new Error("unrecognized action "+n)}}}function Xa(e,n){return e===n}function eo(e){var n;return void 0===e&&(e=Xa),function(t){return function(r){e(n,r)||(n=r,t(r))}}}function no(e){return function(n){return function(t){e(t)&&n(t)}}}function to(e){return function(n){return Ea(n,e)}}function ro(e){return function(n){return function(){return n(e)}}}function io(e,n){return function(t){return function(r){return t(n=e(n,r))}}}function ao(e){return function(n){return function(t){e>0?e--:n(t)}}}function oo(e){var n,t;return function(r){return function(i){n=i,t||(t=setTimeout((function(){t=void 0,r(n)}),e))}}}function so(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=new Array(n.length),i=0,a=Math.pow(2,n.length)-1;return n.forEach((function(e,n){var t=Math.pow(2,n);$a(e,(function(e){i|=t,r[n]=e}))})),function(e){return function(n){i===a&&e([n].concat(r))}}}function lo(e,n){return void 0===n&&(n=Xa),Qa(e,eo(n))}function co(){for(var e=qa(),n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];var i=new Array(t.length),a=0,o=Math.pow(2,t.length)-1;return t.forEach((function(n,t){var r=Math.pow(2,t);$a(n,(function(n){i[t]=n,(a|=r)===o&&Fa(e,i)}))})),function(n,t){switch(n){case 1:return a===o&&t(i),$a(e,t);case 2:return Ha(e);default:throw new Error("unrecognized action "+n)}}}function uo(e,n,t){void 0===n&&(n=[]);var r=(void 0===t?{singleton:!0}:t).singleton;return{id:po(),constructor:e,dependencies:n,singleton:r}}var po=function(){return Symbol()};function fo(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ho(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return fo(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?fo(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}var vo="undefined"!=typeof document?X:f;function go(e,n,t){var r=Object.keys(n.required||{}),i=Object.keys(n.optional||{}),a=Object.keys(n.methods||{}),o=Object.keys(n.events||{}),s=Se({});function l(e,t){e.propsReady&&Fa(e.propsReady,!1);for(var a,o=ho(r);!(a=o()).done;){var s=a.value;Fa(e[n.required[s]],t[s])}for(var l,c=ho(i);!(l=c()).done;){var u=l.value;if(u in t)Fa(e[n.optional[u]],t[u])}e.propsReady&&Fa(e.propsReady,!0)}function c(e){return o.reduce((function(t,r){var i,a,o,s;return t[r]=(i=e[n.events[r]],s=function(){return a&&a()},function(e,n){switch(e){case 1:if(n){if(o===n)return;return s(),o=n,a=$a(i,n)}return s(),Ua;case 2:return s(),void(o=null);default:throw new Error("unrecognized action "+e)}}),t}),{})}return{Component:Te((function(u,p){var f=u.children,h=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(u,["children"]),v=U((function(){return Ma(function(e){var n=new Map;return function e(t){var r=t.id,i=t.constructor,a=t.dependencies,o=t.singleton;if(o&&n.has(r))return n.get(r);var s=i(a.map((function(n){return e(n)})));return o&&n.set(r,s),s}(e)}(e),(function(e){return l(e,h)}))}))[0],g=U(Aa(c,v))[0];return vo((function(){for(var e,n=ho(o);!(e=n()).done;){var t=e.value;t in h&&$a(g[t],h[t])}return function(){Object.values(g).map(Ha)}}),[h,g,v]),vo((function(){l(v,h)})),Ne(p,Da(function(e){return a.reduce((function(t,r){return t[r]=function(t){Fa(e[n.methods[r]],t)},t}),{})}(v))),d(s.Provider,{value:v},t?d(t,function(e,n){for(var t={},r={},i=0,a=e.length;i<a;)r[e[i]]=1,i+=1;for(var o in n)r.hasOwnProperty(o)||(t[o]=n[o]);return t}([].concat(r,i,o),h),f):f)})),usePublisher:function(e){return ce(Ra(Fa,y(s)[e]),[e])},useEmitterValue:function(e){var n=y(s)[e],t=U(Aa(Ga,n)),r=t[0],i=t[1];return vo((function(){return $a(n,(function(e){e!==r&&i(Da(e))}))}),[n,r]),r},useEmitter:function(e,n){var t=y(s)[e];vo((function(){return $a(t,n)}),[n,t])}}}var mo=function(){if("undefined"!=typeof Map)return Map;function e(e,n){var t=-1;return e.some((function(e,r){return e[0]===n&&(t=r,!0)})),t}return function(){function n(){this.__entries__=[]}return Object.defineProperty(n.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),n.prototype.get=function(n){var t=e(this.__entries__,n),r=this.__entries__[t];return r&&r[1]},n.prototype.set=function(n,t){var r=e(this.__entries__,n);~r?this.__entries__[r][1]=t:this.__entries__.push([n,t])},n.prototype.delete=function(n){var t=this.__entries__,r=e(t,n);~r&&t.splice(r,1)},n.prototype.has=function(n){return!!~e(this.__entries__,n)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(e,n){void 0===n&&(n=null);for(var t=0,r=this.__entries__;t<r.length;t++){var i=r[t];e.call(n,i[1],i[0])}},n}()}(),_o="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,yo="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),bo="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(yo):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var wo=["top","right","bottom","left","width","height","size","weight"],xo="undefined"!=typeof MutationObserver,ko=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,n){var t=!1,r=!1,i=0;function a(){t&&(t=!1,e()),r&&s()}function o(){bo(a)}function s(){var e=Date.now();if(t){if(e-i<2)return;r=!0}else t=!0,r=!1,setTimeout(o,n);i=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var n=this.observers_,t=n.indexOf(e);~t&&n.splice(t,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){_o&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),xo?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){_o&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var n=e.propertyName,t=void 0===n?"":n;wo.some((function(e){return!!~t.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Co=function(e,n){for(var t=0,r=Object.keys(n);t<r.length;t++){var i=r[t];Object.defineProperty(e,i,{value:n[i],enumerable:!1,writable:!1,configurable:!0})}return e},zo=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||yo},So=Ro(0,0,0,0);function To(e){return parseFloat(e)||0}function No(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return n.reduce((function(n,t){return n+To(e["border-"+t+"-width"])}),0)}function Io(e){var n=e.clientWidth,t=e.clientHeight;if(!n&&!t)return So;var r=zo(e).getComputedStyle(e),i=function(e){for(var n={},t=0,r=["top","right","bottom","left"];t<r.length;t++){var i=r[t],a=e["padding-"+i];n[i]=To(a)}return n}(r),a=i.left+i.right,o=i.top+i.bottom,s=To(r.width),l=To(r.height);if("border-box"===r.boxSizing&&(Math.round(s+a)!==n&&(s-=No(r,"left","right")+a),Math.round(l+o)!==t&&(l-=No(r,"top","bottom")+o)),!function(e){return e===zo(e).document.documentElement}(e)){var c=Math.round(s+a)-n,u=Math.round(l+o)-t;1!==Math.abs(c)&&(s-=c),1!==Math.abs(u)&&(l-=u)}return Ro(i.left,i.top,s,l)}var Eo="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof zo(e).SVGGraphicsElement}:function(e){return e instanceof zo(e).SVGElement&&"function"==typeof e.getBBox};function Oo(e){return _o?Eo(e)?function(e){var n=e.getBBox();return Ro(0,0,n.width,n.height)}(e):Io(e):So}function Ro(e,n,t,r){return{x:e,y:n,width:t,height:r}}var Ao=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ro(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=Oo(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Lo=function(e,n){var t,r,i,a,o,s,l,c=(r=(t=n).x,i=t.y,a=t.width,o=t.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),Co(l,{x:r,y:i,width:a,height:o,top:i,right:r+a,bottom:o+i,left:r}),l);Co(this,{target:e,contentRect:c})},Mo=function(){function e(e,n,t){if(this.activeObservations_=[],this.observations_=new mo,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=t}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof zo(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new Ao(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof zo(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(n){n.isActive()&&e.activeObservations_.push(n)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map((function(e){return new Lo(e.target,e.broadcastRect())}));this.callback_.call(e,n,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),jo="undefined"!=typeof WeakMap?new WeakMap:new mo,Bo=function e(n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=ko.getInstance(),r=new Mo(n,t,this);jo.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){Bo.prototype[e]=function(){var n;return(n=jo.get(this))[e].apply(n,arguments)}}));var Do=void 0!==yo.ResizeObserver?yo.ResizeObserver:Bo;function Po(){return(Po=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Uo(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n.indexOf(t=a[r])>=0||(i[t]=e[t]);return i}function $o(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Fo(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return $o(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$o(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function Ho(e,n){return!(!e||e[0]!==n[0]||e[1]!==n[1])}function Go(e,n){return!(!e||e.startIndex!==n.startIndex||e.endIndex!==n.endIndex)}var Vo,Wo,qo,Ko="up",Yo=uo((function(){var e=qa(),n=Ka(0),t=qa(),r=Ka(0),i=qa(),a=Ka(0),o=Ka(0),s=qa(),l=qa(),c=Ka(!1);Va(e,r);var u=Ka("down");return Va(Qa(e,io((function(e,n){return{direction:n<e.prevScrollTop?Ko:"down",prevScrollTop:n}}),{direction:"down",prevScrollTop:0}),to((function(e){return e.direction}))),u),{scrollTop:e,viewportHeight:i,headerHeight:a,footerHeight:o,smoothScrollTargetReached:t,scrollTo:s,scrollBy:l,scrollDirection:u,statefulScrollTop:r,deviation:n,scrollingInProgress:c}}),[],{singleton:!0}),Jo=uo((function(){var e=Ka(!1);return{propsReady:e,didMount:Ya(Qa(e,no((function(e){return e})),eo()))}}),[],{singleton:!0}),Zo={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,totalHeight:0}},Qo=uo((function(e){var n,t,r,i=e[0],a=i.scrollTop,o=i.viewportHeight,s=Ka(!1),l=Ka(!0),c=qa(),u=qa(),d=qa(),p=Ya(Qa(function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t){switch(e){case 1:return Pa.apply(void 0,n.map((function(e){return $a(e,t)})));case 2:return;default:throw new Error("unrecognized action "+e)}}}(Qa(lo(a),ao(1),ro(!0)),Qa(lo(a),ao(1),ro(!1),(n=100,function(e){return function(i){t=i,r&&clearTimeout(r),r=setTimeout((function(){e(t)}),n)}}))),eo()));Va(Qa(lo(a),to((function(e){return 0===e})),eo()),l),Va(l,u);var f=Ya(Qa(co(d,lo(a),lo(o)),io((function(e,n){var t=n[0],r=t.bottom,i=t.offsetBottom,a=n[1],o=n[2],s={viewportHeight:o,scrollTop:a,offsetBottom:i,totalHeight:r+i};return 0===i&&a+o-r>-4?{atBottom:!0,state:s}:{atBottom:!1,notAtBottomBecause:s.totalHeight>e.state.totalHeight?"SIZE_INCREASED":0!==i?"NOT_SHOWING_LAST_ITEM":o<e.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":a<e.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:s}}),Zo),eo((function(e,n){return e&&e.atBottom===n.atBottom}))));return Va(Qa(f,to((function(e){return e.atBottom}))),s),$a(s,(function(e){setTimeout((function(){return Fa(c,e)}))})),{isScrolling:p,isAtTop:l,isAtBottom:s,atBottomState:f,atTopStateChange:u,atBottomStateChange:c,listStateListener:d}}),ja(Yo)),Xo=uo((function(e){var n=e[0].scrollTop,t=e[1].isScrolling,r=Ka(0),i=Ka(!1),a=qa(),o=Ka(!1);return Va(Qa(t,no((function(e){return!e})),ro(0)),r),Va(Qa(n,oo(100),so(t),no((function(e){return!!e[1]})),io((function(e,n){return[e[1],n[0]]}),[0,0]),to((function(e){return e[1]-e[0]}))),r),Va(Qa(r,so(o,i,a),no((function(e){return!!e[1]})),to((function(e){var n=e[0],t=e[1],r=e[2],i=e[3],a=t.enter;if(r){if((0,t.exit)(n,i))return!1}else if(a(n,i))return!0;return r})),eo()),i),$a(Qa(co(i,r,a),so(o)),(function(e){var n=e[0],t=e[1];return n[0]&&t&&t.change&&t.change(n[1],n[2])})),{isSeeking:i,scrollSeekConfiguration:o,scrollVelocity:r,scrollSeekRangeChanged:a}}),ja(Yo,Qo),{singleton:!0}),es={lvl:0};function ns(e,n,t,r,i){return void 0===r&&(r=es),void 0===i&&(i=es),{k:e,v:n,lvl:t,l:r,r:i}}function ts(e){return e===es}function rs(){return es}function is(e,n){if(ts(e))return es;var t=e.k,r=e.l,i=e.r;if(n===t){if(ts(r))return i;if(ts(i))return r;var a=cs(r);return fs(ds(e,{k:a[0],v:a[1],l:us(r)}))}return fs(ds(e,n<t?{l:is(r,n)}:{r:is(i,n)}))}function as(e,n,t){if(void 0===t&&(t="k"),ts(e))return[-1/0,void 0];if(e[t]===n)return[e.k,e.v];if(e[t]<n){var r=as(e.r,n,t);return r[0]===-1/0?[e.k,e.v]:r}return as(e.l,n,t)}function os(e,n,t){return ts(e)?ns(n,t,1):n===e.k?ds(e,{k:n,v:t}):gs(ms(ds(e,n<e.k?{l:os(e.l,n,t)}:{r:os(e.r,n,t)})))}function ss(e,n,t){if(ts(e))return[];var r=e.k,i=e.v,a=e.r,o=[];return r>n&&(o=o.concat(ss(e.l,n,t))),r>=n&&r<=t&&o.push({k:r,v:i}),r<=t&&(o=o.concat(ss(a,n,t))),o}function ls(e){return ts(e)?[]:[].concat(ls(e.l),[{k:e.k,v:e.v}],ls(e.r))}function cs(e){return ts(e.r)?[e.k,e.v]:cs(e.r)}function us(e){return ts(e.r)?e.l:fs(ds(e,{r:us(e.r)}))}function ds(e,n){return ns(void 0!==n.k?n.k:e.k,void 0!==n.v?n.v:e.v,void 0!==n.lvl?n.lvl:e.lvl,void 0!==n.l?n.l:e.l,void 0!==n.r?n.r:e.r)}function ps(e){return ts(e)||e.lvl>e.r.lvl}function fs(e){var n=e.l,t=e.r,r=e.lvl;if(t.lvl>=r-1&&n.lvl>=r-1)return e;if(r>t.lvl+1){if(ps(n))return ms(ds(e,{lvl:r-1}));if(ts(n)||ts(n.r))throw new Error("Unexpected empty nodes");return ds(n.r,{l:ds(n,{r:n.r.l}),r:ds(e,{l:n.r.r,lvl:r-1}),lvl:r})}if(ps(e))return gs(ds(e,{lvl:r-1}));if(ts(t)||ts(t.l))throw new Error("Unexpected empty nodes");var i=t.l,a=ps(i)?t.lvl-1:t.lvl;return ds(i,{l:ds(e,{r:i.l,lvl:r-1}),r:gs(ds(t,{l:i.r,lvl:a})),lvl:i.lvl+1})}function hs(e,n,t){return ts(e)?[]:vs(ss(e,as(e,n)[0],t),(function(e){return{index:e.k,value:e.v}}))}function vs(e,n){var t=e.length;if(0===t)return[];for(var r=n(e[0]),i=r.index,a=r.value,o=[],s=1;s<t;s++){var l=n(e[s]),c=l.index,u=l.value;o.push({start:i,end:c-1,value:a}),i=c,a=u}return o.push({start:i,end:1/0,value:a}),o}function gs(e){var n=e.r,t=e.lvl;return ts(n)||ts(n.r)||n.lvl!==t||n.r.lvl!==t?e:ds(n,{l:ds(e,{r:n.l}),lvl:t+1})}function ms(e){var n=e.l;return ts(n)||n.lvl!==e.lvl?e:ds(n,{r:ds(e,{l:n.r})})}function _s(e,n,t,r){void 0===r&&(r=0);for(var i=e.length-1;r<=i;){var a=Math.floor((r+i)/2),o=t(e[a],n);if(0===o)return a;if(-1===o){if(i-r<2)return a-1;i=a-1}else{if(i===r)return a;r=a+1}}throw new Error("Failed binary finding record in array - "+e.join(",")+", searched for "+n)}function ys(e,n,t){return e[_s(e,n,t)]}function bs(e,n){return e.getBoundingClientRect()[n]}(qo=Wo||(Wo={}))[qo.DEBUG=0]="DEBUG",qo[qo.INFO=1]="INFO",qo[qo.WARN=2]="WARN",qo[qo.ERROR=3]="ERROR";var ws=((Vo={})[Wo.DEBUG]="debug",Vo[Wo.INFO]="log",Vo[Wo.WARN]="warn",Vo[Wo.ERROR]="error",Vo),xs=uo((function(){var e=Ka(Wo.ERROR);return{log:Ka((function(n,t,r){var i;void 0===r&&(r=Wo.INFO),r>=(null!=(i=globalThis.VIRTUOSO_LOG_LEVEL)?i:Ga(e))&&console[ws[r]]("%creact-virutoso: %c%s %o","color: #0253b3; font-weight: bold","color: black",n,t)})),logLevel:e}}),[],{singleton:!0});function ks(e){var n=e.size,t=e.startIndex,r=e.endIndex;return function(e){return e.start===t&&(e.end===r||e.end===1/0)&&e.value===n}}function Cs(e,n){var t=e.index;return n===t?0:n<t?-1:1}function zs(e,n){var t=e.offset;return n===t?0:n<t?-1:1}function Ss(e){return{index:e.index,value:e}}function Ts(e,n){var t=n[0],r=n[1];(0,n[2])("received item sizes",t,Wo.DEBUG);var i=e.sizeTree,a=e.offsetTree,o=i,s=0;if(r.length>0&&ts(i)&&2===t.length){var l=t[0].size,c=t[1].size;o=r.reduce((function(e,n){return os(os(e,n,l),n+1,c)}),o)}else{var u=function(e,n){for(var t,r=ts(e)?0:1/0,i=Fo(n);!(t=i()).done;){var a=t.value,o=a.size,s=a.startIndex,l=a.endIndex;if(r=Math.min(r,s),ts(e))e=os(e,0,o);else{var c=hs(e,s-1,l+1);if(!c.some(ks(a))){for(var u,d=!1,p=!1,f=Fo(c);!(u=f()).done;){var h=u.value,v=h.start,g=h.end,m=h.value;d?(l>=v||o===m)&&(e=is(e,v)):(p=m!==o,d=!0),g>l&&l>=v&&m!==o&&(e=os(e,l+1,m))}p&&(e=os(e,s,o))}}}return[e,r]}(o,t);o=u[0],s=u[1]}if(o===i)return e;var d=0,p=0,f=0,h=0;if(0!==s){h=_s(a,s-1,Cs),f=a[h].offset;var v=as(o,s-1);d=v[0],p=v[1],a.length&&a[h].size===as(o,s)[1]&&(h-=1),a=a.slice(0,h+1)}else a=[];for(var g,m=Fo(hs(o,s,1/0));!(g=m()).done;){var _=g.value,y=_.start,b=_.value,w=(y-d)*p+f;a.push({offset:w,size:b,index:y}),d=y,f=w,p=b}return{sizeTree:o,offsetTree:a,groupOffsetTree:r.reduce((function(e,n){return os(e,n,Ns(n,a))}),rs()),lastIndex:d,lastOffset:f,lastSize:p,groupIndices:r}}function Ns(e,n){if(0===n.length)return 0;var t=ys(n,e,Cs);return t.size*(e-t.index)+t.offset}function Is(e,n){if(!Es(n))return e;for(var t=0;n.groupIndices[t]<=e+t;)t++;return e+t}function Es(e){return!ts(e.groupOffsetTree)}var Os={offsetHeight:"height",offsetWidth:"width"},Rs=uo((function(e){var n=e[0].log,t=qa(),r=qa(),i=qa(),a=Ka(0),o=Ka([]),s=Ka(void 0),l=Ka(void 0),c=Ka((function(e,n){return bs(e,Os[n])})),u=Ka(void 0),d={offsetTree:[],sizeTree:rs(),groupOffsetTree:rs(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},p=Ja(Qa(t,so(o,n),io(Ts,d),eo()),d);Va(Qa(o,no((function(e){return e.length>0})),so(p),to((function(e){var n=e[0],t=e[1],r=n.reduce((function(e,n,r){return os(e,n,Ns(n,t.offsetTree)||r)}),rs());return Po({},t,{groupIndices:n,groupOffsetTree:r})}))),p),Va(Qa(r,so(p),no((function(e){return e[0]<e[1].lastIndex})),to((function(e){var n=e[1];return[{startIndex:e[0],endIndex:n.lastIndex,size:n.lastSize}]}))),t),Va(s,l);var f=Ja(Qa(s,to((function(e){return void 0===e}))),!0);Va(Qa(l,no((function(e){return void 0!==e})),to((function(e){return[{startIndex:0,endIndex:0,size:e}]}))),t);var h=Ya(Qa(t,so(p),io((function(e,n){var t=n[1];return{changed:t!==e.sizes,sizes:t}}),{changed:!1,sizes:d}),to((function(e){return e.changed}))));Va(Qa(a,io((function(e,n){return{diff:e.prev-n,prev:n}}),{diff:0,prev:0}),to((function(e){return e.diff})),no((function(e){return e>0}))),i),$a(Qa(a,so(n)),(function(e){e[0]<0&&(0,e[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:a},Wo.ERROR)}));var v=Ya(i);return Va(Qa(i,so(p),to((function(e){var n=e[0],t=e[1];if(t.groupIndices.length>0)throw new Error("Virtuoso: prepending items does not work with groups");return ls(t.sizeTree).reduce((function(e,t){var r=t.k,i=t.v;return{ranges:[].concat(e.ranges,[{startIndex:e.prevIndex,endIndex:r+n-1,size:e.prevSize}]),prevIndex:r+n,prevSize:i}}),{ranges:[],prevIndex:0,prevSize:t.lastSize}).ranges}))),t),{data:u,totalCount:r,sizeRanges:t,groupIndices:o,defaultItemSize:l,fixedItemSize:s,unshiftWith:i,beforeUnshiftWith:v,firstItemIndex:a,sizes:p,listRefresh:h,trackItemSizes:f,itemSize:c}}),ja(xs),{singleton:!0}),As="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style;function Ls(e){var n="number"==typeof e?{index:e}:e;return n.align||(n.align="start"),n.behavior&&As||(n.behavior="auto"),n.offset||(n.offset=0),n}var Ms=uo((function(e){var n=e[0],t=n.sizes,r=n.totalCount,i=n.listRefresh,a=e[1],o=a.scrollingInProgress,s=a.viewportHeight,l=a.scrollTo,c=a.smoothScrollTargetReached,u=a.headerHeight,d=a.footerHeight,p=qa(),f=Ka(0),h=null,v=null,g=null,m=function(){h&&(h(),h=null),g&&(g(),g=null),v&&(clearTimeout(v),v=null),Fa(o,!1)};return Va(Qa(p,so(t,s,r,f,u,d),to((function(e){var n=e[0],t=e[1],r=e[2],a=e[3],s=e[4],l=e[5],u=e[6],d=Ls(n),f=d.align,_=d.behavior,y=d.offset,b=a-1,w=d.index;w=Is(w,t);var x=Ns(w=Math.max(0,w,Math.min(b,w)),t.offsetTree)+l;"end"===f?(x=Math.round(x-r+as(t.sizeTree,w)[1]),w===b&&(x+=u)):"center"===f?x=Math.round(x-r/2+as(t.sizeTree,w)[1]/2):x-=s,y&&(x+=y);var k,C,z=function(e){m(),e&&Fa(p,n)};if(m(),"smooth"===_){var S=!1;g=$a(i,(function(e){S=S||e})),h=Wa(c,(function(){z(S)}))}else h=Wa(Qa(i,(function(e){return function(n){k=k||n,C||(C=setTimeout((function(){C=void 0,e(k)}),0))}})),z);return v=setTimeout((function(){m()}),1200),Fa(o,!0),{top:x,behavior:_}}))),l),{scrollToIndex:p,topListHeight:f}}),ja(Rs,Yo),{singleton:!0}),js=function(e,n,t){return"number"==typeof e?t===Ko&&"top"===n||"down"===t&&"bottom"===n?e:0:t===Ko?"top"===n?e.main:e.reverse:"bottom"===n?e.main:e.reverse},Bs=uo((function(e){var n=e[0],t=n.scrollTop,r=n.viewportHeight,i=n.deviation,a=n.headerHeight,o=qa(),s=Ka(0),l=Ka(0);return{listBoundary:o,overscan:l,topListHeight:s,visibleRange:Ja(Qa(co(lo(t),lo(r),lo(a),lo(o,Ho),lo(l),lo(s),lo(i)),to((function(e){var n=e[0],t=e[1],r=e[2],i=e[3],a=i[0],o=i[1],s=e[4],l=e[5],c=e[6],u=n-c,d=Math.max(r-u,0),p="none";return a-=c,o+=r,(a+=r)>n+l&&(p=Ko),(o-=c)<n-d+t&&(p="down"),"none"!==p?[Math.max(u-r-js(s,"top",p),0),u-d+t+js(s,"bottom",p)]:null})),no((function(e){return null!=e})),eo(Ho)),[0,0])}}),ja(Yo),{singleton:!0}),Ds=uo((function(e){var n=e[0],t=n.scrollTop,r=n.scrollTo,i=qa(),a=qa(),o=qa(),s=Ka(!1);return Va(Qa(co(a,i),to((function(e){return Math.max(0,e[0]-e[1].offsetTop)}))),t),Va(Qa(r,so(i),to((function(e){var n=e[0];return Po({},n,{top:n.top+e[1].offsetTop})}))),o),{useWindowScroll:s,windowScrollTop:a,windowViewportRect:i,windowScrollTo:o}}),ja(Yo)),Ps={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Us={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},$s=Math.ceil,Fs=Math.floor,Hs=Math.min,Gs=Math.max;function Vs(e){return $s(e)-e<.03?$s(e):Fs(e)}function Ws(e,n){return Array.from({length:n-e+1}).map((function(n,t){return{index:t+e}}))}var qs=uo((function(e){var n=e[0],t=n.overscan,r=n.visibleRange,i=n.listBoundary,a=e[1],o=a.scrollTop,s=a.viewportHeight,l=a.scrollBy,c=a.scrollTo,u=a.smoothScrollTargetReached,d=e[2],p=e[3],f=e[4],h=f.propsReady,v=f.didMount,g=e[5],m=g.windowViewportRect,_=g.windowScrollTo,y=g.useWindowScroll,b=g.windowScrollTop,w=Ka(0),x=Ka(0),k=Ka(Ps),C=Ka({height:0,width:0}),z=Ka({height:0,width:0}),S=qa();Va(Qa(v,so(x),no((function(e){return 0!==e[1]})),to((function(e){return{items:Ws(0,e[1]-1),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}}))),k),Va(Qa(co(lo(w),r,lo(z,(function(e,n){return e&&e.width===n.width&&e.height===n.height}))),so(C),to((function(e){var n=e[0],t=n[0],r=n[1],i=r[0],a=r[1],o=n[2],s=e[1],l=o.height,c=o.width,u=s.width;if(0===t||0===u)return Ps;if(0===c)return Us;var d=Vs(u/c),p=d*Fs(i/l),f=d*$s(a/l)-1;f=Hs(t-1,f);var h=Ws(p=Hs(f,Gs(0,p)),f),v=Ks(s,o,h),g=v.top,m=v.bottom;return{items:h,offsetTop:g,offsetBottom:$s(t/d)*l-m,top:g,bottom:m,itemHeight:l,itemWidth:c}}))),k),Va(Qa(C,to((function(e){return e.height}))),s),Va(Qa(co(C,z,k),to((function(e){var n=Ks(e[0],e[1],e[2].items);return[n.top,n.bottom]})),eo(Ho)),i),Va(Qa(i,so(k),to((function(e){return{bottom:e[0][1],offsetBottom:e[1].offsetBottom}}))),d.listStateListener);var T=Ya(Qa(lo(k),no((function(e){return e.items.length>0})),so(w),no((function(e){var n=e[0].items;return n[n.length-1].index===e[1]-1})),to((function(e){return e[1]-1})),eo())),N=Ya(Qa(lo(k),no((function(e){var n=e.items;return n.length>0&&0===n[0].index})),ro(0),eo())),I=Ya(Qa(lo(k),no((function(e){return e.items.length>0})),to((function(e){var n=e.items;return{startIndex:n[0].index,endIndex:n[n.length-1].index}})),eo(Go)));Va(I,p.scrollSeekRangeChanged),Va(Qa(S,so(C,z,w),to((function(e){var n=e[1],t=e[2],r=e[3],i=Ls(e[0]),a=i.align,o=i.behavior,s=i.offset,l=i.index,c=Ys(n,t,l=Math.max(0,l,Math.min(r-1,l)));return"end"===a?c=Math.round(c-n.height+t.height):"center"===a&&(c=Math.round(c-n.height/2+t.height/2)),s&&(c+=s),{top:c,behavior:o}}))),c);var E=Ja(Qa(k,to((function(e){return e.offsetBottom+e.bottom}))),0);return Va(Qa(m,to((function(e){return{width:e.visibleWidth,height:e.visibleHeight}}))),C),Po({totalCount:w,viewportDimensions:C,itemDimensions:z,scrollTop:o,overscan:t,scrollBy:l,scrollTo:c,scrollToIndex:S,smoothScrollTargetReached:u,windowViewportRect:m,windowScrollTo:_,useWindowScroll:y,windowScrollTop:b,initialItemCount:x},p,{gridState:k,totalListHeight:E},d,{startReached:N,endReached:T,rangeChanged:I,propsReady:h})}),ja(Bs,Yo,Qo,Xo,Jo,Ds));function Ks(e,n,t){var r=n.height;return void 0===r||0===t.length?{top:0,bottom:0}:{top:Ys(e,n,t[0].index),bottom:Ys(e,n,t[t.length-1].index)+r}}function Ys(e,n,t){var r=Vs(e.width/n.width);return Fs(t/r)*n.height}function Js(e,n){void 0===n&&(n=!0);var t=p(null),r=new Do((function(n){var t=n[0].target;null!==t.offsetParent&&e(t)}));return{ref:t,callbackRef:function(e){e&&n?(r.observe(e),t.current=e):(t.current&&r.unobserve(t.current),t.current=null)}}}function Zs(e,n){return void 0===n&&(n=!0),Js(e,n).callbackRef}function Qs(e){var n=p(null),t=ce((function(t){if(null!==t){var r=t.getBoundingClientRect(),i=window.innerHeight-Math.max(0,r.top),a=r.top+window.pageYOffset;n.current={offsetTop:a,visibleHeight:i,visibleWidth:r.width},e(n.current)}}),[e]),r=Js(t),i=r.callbackRef,a=r.ref,o=ce((function(){t(a.current)}),[t,a]);return f((function(){return window.addEventListener("scroll",o),window.addEventListener("resize",o),function(){window.removeEventListener("scroll",o),window.removeEventListener("resize",o)}}),[o]),i}var Xs="undefined"!=typeof document?X:f;function el(e,n,t,r){void 0===r&&(r=Ua);var i=p(null),a=p(null),o=p(null),s=ce((function(t){var r=t.target,i=r===window||r===document?window.pageYOffset||document.documentElement.scrollTop:r.scrollTop;e(Math.max(i,0)),null!==a.current&&(i===a.current||i<=0||i===r.scrollHeight-bs(r,"height"))&&(a.current=null,n(!0),o.current&&(clearTimeout(o.current),o.current=null))}),[e,n]);return f((function(){var e=i.current;return r(i.current),s({target:e}),e.addEventListener("scroll",s,{passive:!0}),function(){r(null),e.removeEventListener("scroll",s)}}),[i,s,t,r]),{scrollerRef:i,scrollByCallback:function(e){null===a.current&&i.current.scrollBy(e)},scrollToCallback:function(t){var r=i.current;if(r){var s,l,c,u="smooth"===t.behavior;if(r===window?(l=Math.max(bs(document.documentElement,"height"),document.documentElement.scrollHeight),s=window.innerHeight,c=document.documentElement.scrollTop):(l=r.scrollHeight,s=bs(r,"height"),c=r.scrollTop),s===l||t.top===c)return e(c),void(u&&n(!0));t.top=Math.max(Math.min(l-s,t.top),0),u?(a.current=t.top,o.current&&clearTimeout(o.current),o.current=setTimeout((function(){o.current=null,a.current=null,n(!0)}),1e3)):a.current=null,r.scrollTo(t)}}}}var nl=uo((function(e){var n=e[0],t=n.sizes,r=n.listRefresh,i=e[1].scrollTop,a=e[2].scrollToIndex,o=e[3].didMount,s=Ka(!0),l=Ka(0);return Va(Qa(o,so(l),no((function(e){return 0!==e[1]})),ro(!1)),s),$a(Qa(r,so(s,t),no((function(e){var n=e[1];return!ts(e[2].sizeTree)&&!n})),so(l)),(function(e){var n=e[1];Wa(i,(function(){Fa(s,!0)})),setTimeout((function(){Fa(a,n)}))})),{scrolledToInitialItem:s,initialTopMostItemIndex:l}}),ja(Rs,Yo,Ms,Jo),{singleton:!0});function tl(e){return!!e&&("smooth"===e?"smooth":"auto")}var rl=uo((function(e){var n=e[0],t=n.totalCount,r=n.listRefresh,i=e[1],a=i.isAtBottom,o=i.atBottomState,s=e[2].scrollToIndex,l=e[3].scrolledToInitialItem,c=e[4],u=c.propsReady,d=c.didMount,p=Ka(!1),f=null;function h(e,n){Fa(s,{index:e-1,align:"end",behavior:n})}return $a(Qa(co(Qa(lo(t),ao(1)),d),so(lo(p),a,l),to((function(e){var n,t,r=e[0],i=r[0],a=r[1]&&e[3],o="auto";return a&&(n=e[1],t=e[2],o="function"==typeof n?tl(n(t)):t&&tl(n),a=a&&!!o),{totalCount:i,shouldFollow:a,followOutputBehavior:o}})),no((function(e){return e.shouldFollow}))),(function(e){var n=e.totalCount,t=e.followOutputBehavior;f&&(f(),f=null),f=Wa(r,(function(){h(n,t),f=null}))})),$a(Qa(co(lo(p),t,u),no((function(e){return e[0]&&e[2]})),io((function(e,n){var t=n[1];return{refreshed:e.value===t,value:t}}),{refreshed:!1,value:0}),no((function(e){return e.refreshed})),so(p,t)),(function(e){var n=e[1],t=e[2],r=Wa(o,(function(e){!n||e.atBottom||"SIZE_INCREASED"!==e.notAtBottomBecause||f||h(t,"auto")}));setTimeout(r,100)})),$a(Qa(co(lo(p),o),so(t)),(function(e){var n=e[0],t=n[1];n[0]&&!t.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===t.notAtBottomBecause&&h(e[1],"auto")})),{followOutput:p}}),ja(Rs,Qo,Ms,nl,Jo));function il(e){return e.reduce((function(e,n){return e.groupIndices.push(e.totalCount),e.totalCount+=n+1,e}),{totalCount:0,groupIndices:[]})}var al=uo((function(e){var n=e[0],t=n.totalCount,r=n.groupIndices,i=n.sizes,a=e[1],o=a.scrollTop,s=a.headerHeight,l=qa(),c=qa(),u=Ya(Qa(l,to(il)));return Va(Qa(u,to(La("totalCount"))),t),Va(Qa(u,to(La("groupIndices"))),r),Va(Qa(co(o,i,s),no((function(e){return Es(e[1])})),to((function(e){return as(e[1].groupOffsetTree,Math.max(e[0]-e[2],0),"v")[0]})),eo(),to((function(e){return[e]}))),c),{groupCounts:l,topItemsIndexes:c}}),ja(Rs,Yo)),ol={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0};function sl(e,n,t){if(0===e.length)return[];if(!Es(n))return e.map((function(e){return Po({},e,{index:e.index+t,originalIndex:e.index})}));for(var r,i=[],a=hs(n.groupOffsetTree,e[0].index,e[e.length-1].index),o=void 0,s=0,l=Fo(e);!(r=l()).done;){var c=r.value;(!o||o.end<c.index)&&(o=a.shift(),s=n.groupIndices.indexOf(o.start)),i.push(Po({},c.index===o.start?{type:"group",index:s}:{index:c.index-(s+1)+t,groupIndex:s},{size:c.size,offset:c.offset,originalIndex:c.index,data:c.data}))}return i}function ll(e,n,t,r,i){var a=0,o=0;if(e.length>0){a=e[0].offset;var s=e[e.length-1];o=s.offset+s.size}var l=a,c=r.lastOffset+(t-r.lastIndex)*r.lastSize-o;return{items:sl(e,r,i),topItems:sl(n,r,i),topListHeight:n.reduce((function(e,n){return n.size+e}),0),offsetTop:a,offsetBottom:c,top:l,bottom:o,totalCount:t}}var cl,ul,dl,pl=uo((function(e){var n=e[0],t=n.sizes,r=n.totalCount,i=n.data,a=n.firstItemIndex,o=e[1],s=e[2],l=s.visibleRange,c=s.listBoundary,u=s.topListHeight,d=e[3],p=d.scrolledToInitialItem,f=d.initialTopMostItemIndex,h=e[4].topListHeight,v=e[5],g=e[6].didMount,m=Ka([]),_=qa();Va(o.topItemsIndexes,m);var y=Ja(Qa(co(g,lo(l),lo(r),lo(t),lo(f),p,lo(m),lo(a),i),no((function(e){return e[0]})),to((function(e){var n=e[1],t=n[0],r=n[1],i=e[2],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[3],d=u.sizeTree,p=u.offsetTree;if(0===i||0===t&&0===r)return ol;if(ts(d))return ll(function(e,n,t){if(Es(n)){var r=Is(e,n);return[{index:as(n.groupOffsetTree,r)[0],size:0,offset:0},{index:r,size:0,offset:0,data:t&&t[0]}]}return[{index:e,size:0,offset:0,data:t&&t[0]}]}(a,u,c),[],i,u,l);var f=[];if(s.length>0)for(var h,v=s[0],g=s[s.length-1],m=0,_=Fo(hs(d,v,g));!(h=_()).done;)for(var y=h.value,b=y.value,w=Math.max(y.start,v),x=Math.min(y.end,g),k=w;k<=x;k++)f.push({index:k,size:b,offset:m,data:c&&c[k]}),m+=b;if(!o)return ll([],f,i,u,l);var C,z,S,T,N,I,E,O,R,A=s.length>0?s[s.length-1]+1:0,L=(C=p,z=t,S=r,void 0===(T=A)&&(T=0),T>0&&(z=Math.max(z,ys(C,T,Cs).offset)),vs((I=S,O=_s(N=C,z,E=zs),R=_s(N,I,E,O),N.slice(O,R+1)),Ss));if(0===L.length)return null;var M=i-1;return ll(Ma([],(function(e){for(var n,i=Fo(L);!(n=i()).done;){var a=n.value,o=a.value,s=o.offset,l=a.start,u=o.size;o.offset<t&&(s+=((l+=Math.floor((t-o.offset)/u))-a.start)*u),l<A&&(s+=(A-l)*u,l=A);for(var d=Math.min(a.end,M),p=l;p<=d&&!(s>=r);p++)e.push({index:p,size:u,offset:s,data:c&&c[p]}),s+=u}})),f,i,u,l)})),no((function(e){return null!==e})),eo()),ol);return Va(Qa(i,no((function(e){return void 0!==e})),to((function(e){return e.length}))),r),Va(Qa(y,to(La("topListHeight"))),h),Va(h,u),Va(y,v.listStateListener),Va(Qa(y,to((function(e){return[e.top,e.bottom]}))),c),Va(Qa(y,to((function(e){return e.items}))),_),Po({listState:y,topItemsIndexes:m,endReached:Ya(Qa(y,no((function(e){return e.items.length>0})),so(r,i),no((function(e){var n=e[0].items;return n[n.length-1].originalIndex===e[1]-1})),to((function(e){return[e[1]-1,e[2]]})),eo(Ho),to((function(e){return e[0]})))),startReached:Ya(Qa(y,oo(200),no((function(e){var n=e.items;return n.length>0&&n[0].originalIndex===e.topItems.length})),to((function(e){return e.items[0].index})),eo())),rangeChanged:Ya(Qa(y,no((function(e){return e.items.length>0})),to((function(e){var n=e.items;return{startIndex:n[0].index,endIndex:n[n.length-1].index}})),eo(Go))),itemsRendered:_},v)}),ja(Rs,al,Bs,nl,Ms,Qo,Jo),{singleton:!0}),fl=uo((function(e){var n=e[0],t=n.sizes,r=n.firstItemIndex,i=n.data,a=e[1].listState,o=e[2].didMount,s=Ka(0);return Va(Qa(o,so(s),no((function(e){return 0!==e[1]})),so(t,r,i),to((function(e){var n=e[0][1],t=e[1],r=e[2],i=e[3],a=void 0===i?[]:i,o=0;if(t.groupIndices.length>0)for(var s,l=Fo(t.groupIndices);!((s=l()).done||s.value-o>=n);)o++;var c=n+o;return ll(Array.from({length:c}).map((function(e,n){return{index:n,size:0,offset:0,data:a[n]}})),[],c,t,r)}))),a),{initialItemCount:s}}),ja(Rs,pl,Jo),{singleton:!0}),hl=uo((function(e){var n=e[0].topItemsIndexes,t=Ka(0);return Va(Qa(t,no((function(e){return e>0})),to((function(e){return Array.from({length:e}).map((function(e,n){return n}))}))),n),{topItemCount:t}}),ja(pl)),vl=uo((function(e){var n=e[0],t=n.footerHeight,r=n.headerHeight,i=e[1].listState,a=qa(),o=Ja(Qa(co(t,r,i),to((function(e){var n=e[2];return e[0]+e[1]+n.offsetBottom+n.bottom}))),0);return Va(lo(o),a),{totalListHeight:o,totalListHeightChanged:a}}),ja(Yo,pl),{singleton:!0}),gl=uo((function(e){var n=e[0],t=n.scrollBy,r=n.scrollTop,i=n.scrollDirection,a=n.deviation,o=n.scrollingInProgress,s=e[1].isScrolling,l=e[3],c=l.beforeUnshiftWith,u=l.sizes,d=Ya(Qa(e[2].listState,io((function(e,n){var t=e[1],r=n.items,i=0;if(t.length>0&&r.length>0){var a=r[0].originalIndex,o=t[0].originalIndex;if(0!==a||0!==o)if(a===o)i=r[0].size-t[0].size;else for(var s=function(e){var n=r[e],a=t.find((function(e){return e.originalIndex===n.originalIndex}));return a?n.offset!==a.offset?(i=n.offset-a.offset,"break"):void 0:"continue"},l=r.length-1;l>=0;l--){var c=s(l);if("continue"!==c&&"break"===c)break}}return[i,r]}),[0,[]]),no((function(e){return 0!==e[0]})),so(r,i,o),no((function(e){return!e[3]&&0!==e[1]&&e[2]===Ko})),to((function(e){return e[0][0]}))));return Va(Qa(d,so(a),to((function(e){return e[1]-e[0]}))),a),$a(Qa(co(Ja(s,!1),a),no((function(e){return!e[0]&&0!==e[1]})),to((function(e){return e[1]})),oo(1)),(function(e){e>0?(Fa(t,{top:-e,behavior:"auto"}),Fa(a,0)):(Fa(a,0),Fa(t,{top:-e,behavior:"auto"}))})),Va(Qa(c,so(u),to((function(e){return e[0]*e[1].lastSize}))),d),{deviation:a}}),ja(Yo,Qo,pl,Rs)),ml=uo((function(e){var n=e[0].totalListHeight,t=e[1].didMount,r=e[2].scrollTo,i=Ka(0);return $a(Qa(t,so(i),no((function(e){return 0!==e[1]})),to((function(e){return{top:e[1]}}))),(function(e){Wa(Qa(n,no((function(e){return 0!==e}))),(function(){setTimeout((function(){Fa(r,e)}))}))})),{initialScrollTop:i}}),ja(vl,Jo,Yo),{singleton:!0}),_l=uo((function(e){var n=e[0].viewportHeight,t=e[1].totalListHeight,r=Ka(!1);return{alignToBottom:r,paddingTopAddition:Ja(Qa(co(r,n,t),no((function(e){return e[0]})),to((function(e){return Math.max(0,e[1]-e[2])})),eo()),0)}}),ja(Yo,vl),{singleton:!0}),yl=uo((function(e){return Po({},e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7])}),ja(Bs,fl,Jo,Xo,vl,ml,_l,Ds)),bl=uo((function(e){var n=e[0],t=n.totalCount,r=n.sizeRanges,i=n.fixedItemSize,a=n.defaultItemSize,o=n.trackItemSizes,s=n.itemSize,l=n.data,c=n.firstItemIndex,u=n.groupIndices,d=e[1],p=d.initialTopMostItemIndex,f=d.scrolledToInitialItem,h=e[2],v=e[3],g=e[4],m=g.listState,_=g.topItemsIndexes,y=Uo(g,["listState","topItemsIndexes"]),b=e[5].scrollToIndex,w=e[7].topItemCount,x=e[8].groupCounts,k=e[9],C=e[10];return Va(y.rangeChanged,k.scrollSeekRangeChanged),Va(Qa(k.windowViewportRect,to(La("visibleHeight"))),h.viewportHeight),Po({totalCount:t,data:l,firstItemIndex:c,sizeRanges:r,initialTopMostItemIndex:p,scrolledToInitialItem:f,topItemsIndexes:_,topItemCount:w,groupCounts:x,fixedItemHeight:i,defaultItemHeight:a},v,{listState:m,scrollToIndex:b,trackItemSizes:o,itemSize:s,groupIndices:u},y,k,h,C)}),ja(Rs,nl,Yo,rl,pl,Ms,gl,hl,al,yl,xs)),wl=(cl=function(){if("undefined"==typeof document)return"sticky";var e=document.createElement("div");return e.style.position="-webkit-sticky","-webkit-sticky"===e.style.position?"-webkit-sticky":"sticky"},dl=!1,function(){return dl||(dl=!0,ul=cl()),ul});function xl(e){return e}var kl=uo((function(){var e=Ka((function(e){return"Item "+e})),n=Ka((function(e){return"Group "+e})),t=Ka({}),r=Ka(xl),i=Ka("div"),a=Ka(Ua),o=function(e,n){return void 0===n&&(n=null),Ja(Qa(t,to((function(n){return n[e]})),eo()),n)};return{itemContent:e,groupContent:n,components:t,computeItemKey:r,headerFooterTag:i,scrollerRef:a,FooterComponent:o("Footer"),HeaderComponent:o("Header"),TopItemListComponent:o("TopItemList"),ListComponent:o("List","div"),ItemComponent:o("Item","div"),GroupComponent:o("Group","div"),ScrollerComponent:o("Scroller","div"),EmptyPlaceholder:o("EmptyPlaceholder"),ScrollSeekPlaceholder:o("ScrollSeekPlaceholder")}}));function Cl(e,n){var t=qa();return $a(t,(function(){return console.warn("react-virtuoso: You are using a deprecated property. "+n,"color: red;","color: inherit;","color: blue;")})),Va(t,e),t}var zl=uo((function(e){var n=e[0],t=e[1],r={item:Cl(t.itemContent,"Rename the %citem%c prop to %citemContent."),group:Cl(t.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Cl(n.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Cl(n.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Cl(n.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:qa(),maxHeightCacheSize:qa(),footer:qa(),header:qa(),HeaderContainer:qa(),FooterContainer:qa(),ItemContainer:qa(),ScrollContainer:qa(),GroupContainer:qa(),ListContainer:qa(),emptyComponent:qa(),scrollSeek:qa()};function i(e,n,r){Va(Qa(e,so(t.components),to((function(e){var t,i=e[0],a=e[1];return console.warn("react-virtuoso: "+r+" property is deprecated. Pass components."+n+" instead."),Po({},a,((t={})[n]=i,t))}))),t.components)}return $a(r.adjustForPrependedItems,(function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")})),$a(r.maxHeightCacheSize,(function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")})),$a(r.HeaderContainer,(function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")})),$a(r.FooterContainer,(function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")})),$a(r.scrollSeek,(function(e){var r=e.placeholder,i=Uo(e,["placeholder"]);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),Fa(t.components,Po({},Ga(t.components),{ScrollSeekPlaceholder:r})),Fa(n.scrollSeekConfiguration,i)})),i(r.footer,"Footer","footer"),i(r.header,"Header","header"),i(r.ItemContainer,"Item","ItemContainer"),i(r.ListContainer,"List","ListContainer"),i(r.ScrollContainer,"Scroller","ScrollContainer"),i(r.emptyComponent,"EmptyPlaceholder","emptyComponent"),i(r.GroupContainer,"Group","GroupContainer"),Po({},n,t,r)}),ja(bl,kl)),Sl=function(e){return d("div",{style:{height:e.height}})},Tl={position:wl(),zIndex:1},Nl=Ie((function(e){var n,t,r,i,a=e.showTopList,o=void 0!==a&&a,s=Fl("listState"),l=Fl("deviation"),c=$l("sizeRanges"),u=Fl("itemContent"),p=Fl("groupContent"),f=Fl("trackItemSizes"),h=(n=c,t=Fl("itemSize"),r=f,i=Fl("log"),Zs((function(e){var r=function(e,n,t,r){var i=e.length;if(0===i)return null;for(var a=[],o=0;o<i;o++){var s=e.item(o);if(s&&void 0!==s.dataset.index){var l=parseInt(s.dataset.index),c=parseInt(s.dataset.knownSize),u=n(s,"offsetHeight");if(0===u&&r("Zero-sized element, this should not happen",{child:s},Wo.ERROR),u!==c){var d=a[a.length-1];0===a.length||d.size!==u||d.endIndex!==l-1?a.push({startIndex:l,endIndex:l,size:u}):a[a.length-1].endIndex++}}}return a}(e.children,t,0,i);null!==r&&n(r)}),r)),v=Fl("EmptyPlaceholder"),g=Fl("ScrollSeekPlaceholder")||Sl,m=Fl("ListComponent"),_=Fl("ItemComponent"),y=Fl("GroupComponent"),b=Fl("computeItemKey"),w=Fl("isSeeking"),x=Fl("groupIndices").length>0,k=Fl("paddingTopAddition"),C=Fl("scrolledToInitialItem"),z=o?{}:{boxSizing:"border-box",paddingTop:s.offsetTop+k,paddingBottom:s.offsetBottom,marginTop:l};return!o&&0===s.items.length&&v&&C?d(v):d(m,{ref:h,style:z},(o?s.topItems:s.items).map((function(e){var n=e.originalIndex,t=b(n,e.data);return w?d(g,{key:t,index:e.index,height:e.size}):"group"===e.type?d(y,{key:t,"data-index":n,"data-known-size":e.size,"data-item-index":e.index,style:Tl},p(e.index)):d(_,{key:t,"data-index":n,"data-known-size":e.size,"data-item-index":e.index,"data-item-group-index":e.groupIndex},x?u(e.index,e.groupIndex,e.data):u(e.index,e.data))})))})),Il={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},El={width:"100%",height:"100%",position:"absolute",top:0},Ol={width:"100%",position:wl(),top:0},Rl=Ie((function(){var e=Fl("HeaderComponent"),n=$l("headerHeight"),t=Fl("headerFooterTag"),r=Zs((function(e){return n(bs(e,"height"))}));return e?d(t,{ref:r},d(e)):null})),Al=Ie((function(){var e=Fl("FooterComponent"),n=$l("footerHeight"),t=Fl("headerFooterTag"),r=Zs((function(e){return n(bs(e,"height"))}));return e?d(t,{ref:r},d(e)):null}));function Ll(e){var n=e.usePublisher,t=e.useEmitter,r=e.useEmitterValue;return Ie((function(e){var i=e.style,a=e.children,o=Uo(e,["style","children"]),s=n("scrollTop"),l=r("ScrollerComponent"),c=el(s,n("smoothScrollTargetReached"),l,r("scrollerRef")),u=c.scrollerRef,p=c.scrollByCallback;return t("scrollTo",c.scrollToCallback),t("scrollBy",p),d(l,Po({ref:u,style:Po({},Il,i),tabIndex:0},o),a)}))}function Ml(e){var n=e.usePublisher,t=e.useEmitter,r=e.useEmitterValue;return Ie((function(e){var i=e.style,a=e.children,o=Uo(e,["style","children"]),s=n("windowScrollTop"),l=r("ScrollerComponent"),c=n("smoothScrollTargetReached"),u=r("totalListHeight"),p=el(s,c,l),f=p.scrollerRef,h=p.scrollByCallback,v=p.scrollToCallback;return Xs((function(){return f.current=window,function(){f.current=null}}),[f]),t("windowScrollTo",v),t("scrollBy",h),d(l,Po({style:Po({position:"relative"},i,0!==u?{height:u}:{})},o),a)}))}var jl=function(e){var n=e.children,t=Zs(Ea($l("viewportHeight"),(function(e){return bs(e,"height")})));return d("div",{style:El,ref:t},n)},Bl=function(e){var n=e.children,t=Qs($l("windowViewportRect"));return d("div",{ref:t,style:El},n)},Dl=function(e){var n=e.children,t=Fl("TopItemListComponent"),r=Fl("headerHeight"),i=Po({},Ol,{marginTop:r+"px"});return d(t||"div",{style:i},n)},Pl=go(zl,{required:{},optional:{followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",scrollerRef:"scrollerRef",logLevel:"logLevel",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Ie((function(e){var n=Fl("useWindowScroll"),t=Fl("topItemsIndexes").length>0,r=n?Bl:jl;return d(n?Vl:Gl,Object.assign({},e),d(r,null,d(Rl,null),d(Nl,null),d(Al,null)),t&&d(Dl,null,d(Nl,{showTopList:!0})))}))),Ul=Pl.Component,$l=Pl.usePublisher,Fl=Pl.useEmitterValue,Hl=Pl.useEmitter,Gl=Ll({usePublisher:$l,useEmitterValue:Fl,useEmitter:Hl}),Vl=Ml({usePublisher:$l,useEmitterValue:Fl,useEmitter:Hl}),Wl=uo((function(){var e=Ka((function(e){return"Item "+e})),n=Ka({}),t=Ka("virtuoso-grid-item"),r=Ka("virtuoso-grid-list"),i=Ka(xl),a=Ka(Ua),o=function(e,t){return void 0===t&&(t=null),Ja(Qa(n,to((function(n){return n[e]})),eo()),t)};return{itemContent:e,components:n,computeItemKey:i,itemClassName:t,listClassName:r,scrollerRef:a,ListComponent:o("List","div"),ItemComponent:o("Item","div"),ScrollerComponent:o("Scroller","div"),ScrollSeekPlaceholder:o("ScrollSeekPlaceholder","div")}})),ql=uo((function(e){var n=e[0],t=e[1],r={item:Cl(t.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:qa(),ScrollContainer:qa(),ListContainer:qa(),emptyComponent:qa(),scrollSeek:qa()};function i(e,n,r){Va(Qa(e,so(t.components),to((function(e){var t,i=e[0],a=e[1];return console.warn("react-virtuoso: "+r+" property is deprecated. Pass components."+n+" instead."),Po({},a,((t={})[n]=i,t))}))),t.components)}return $a(r.scrollSeek,(function(e){var r=e.placeholder,i=Uo(e,["placeholder"]);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),Fa(t.components,Po({},Ga(t.components),{ScrollSeekPlaceholder:r})),Fa(n.scrollSeekConfiguration,i)})),i(r.ItemContainer,"Item","ItemContainer"),i(r.ListContainer,"List","ListContainer"),i(r.ScrollContainer,"Scroller","ScrollContainer"),Po({},n,t,r)}),ja(qs,Wl)),Kl=Ie((function(){var e=Xl("gridState"),n=Xl("listClassName"),t=Xl("itemClassName"),r=Xl("itemContent"),i=Xl("computeItemKey"),a=Xl("isSeeking"),o=Xl("ItemComponent"),s=Xl("ListComponent"),l=Xl("ScrollSeekPlaceholder"),c=Ql("itemDimensions"),u=Zs((function(e){var n=e.firstChild;n&&c(n.getBoundingClientRect())}));return d(s,{ref:u,className:n,style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom}},e.items.map((function(n){var s=i(n.index);return a?d(l,{key:s,style:{height:e.itemHeight,width:e.itemWidth}}):d(o,{className:t,"data-index":n.index,key:s},r(n.index))})))})),Yl=function(e){var n=e.children,t=Ql("viewportDimensions"),r=Zs((function(e){t(e.getBoundingClientRect())}));return d("div",{style:El,ref:r},n)},Jl=function(e){var n=e.children,t=Qs(Ql("windowViewportRect"));return d("div",{ref:t,style:El},n)},Zl=go(ql,{optional:{totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},Ie((function(e){var n=Po({},e),t=Xl("useWindowScroll"),r=t?Jl:Yl;return d(t?tc:nc,Object.assign({},n),d(r,null,d(Kl,null)))}))),Ql=Zl.usePublisher,Xl=Zl.useEmitterValue,ec=Zl.useEmitter,nc=Ll({usePublisher:Ql,useEmitterValue:Xl,useEmitter:ec}),tc=Ml({usePublisher:Ql,useEmitterValue:Xl,useEmitter:ec}),rc=Ul;const ic=_.div`
    opacity: 0.8;
    font-size: 0.8em;
    font-weight: 600;
    user-select: none;

    padding: 4px 14px;
    padding-top: 12px;

    color: var(--secondary-foreground);
    background: var(--secondary-background);

    ${e=>!e.first&&fe`
            padding-top: 16px;
        `}
`,ac=Ie((({item:e,context:n,openScreen:t})=>d(oa,{key:e._id,user:e,margin:!0,context:n,onClick:n=>{n.shiftKey?gt("MessageBox","append",`<@${e._id}>`,"mention"):t({id:"profile",user_id:e._id})}})));function oc({entries:e,context:n}){const{openScreen:t}=dt();return d(rc,{groupCounts:e.map((e=>e.users.length)),groupContent:n=>{const t=e[n].type;return d(ic,{first:0===n},"role"===t?d(v,null,e[n].name):d(m,"online"===t?{id:"app.status.online"}:{id:"app.status.offline"})," - ",e[n].users.length)},itemContent:(r,i)=>{const a=r-e.slice(0,i).reduce(((e,n)=>e+n.users.length),0),o=e[i].users[a];return o?d("div",null,d(ac,{item:o,context:n,openScreen:t})):null}})}function sc(){const e=kt().channels.get(le().channel);switch(null==e?void 0:e.channel_type){case"Group":return d(cc,{channel:e});case"TextChannel":return d(uc,{channel:e});default:return null}}function lc(e,n,t){const r=e.client;return de((()=>{var i;const a={online:[],offline:[]},o={};let s,l;if(("TextChannel"===e.channel_type||"VoiceChannel"===e.channel_type)&&(s=null==(i=e.server)?void 0:i.roles,s)){const e=Object.keys(s).map((e=>{var n;return[e,s[e],null!=(n=s[e].rank)?n:0]})).filter((([,e])=>e.hoist));e.sort(((e,n)=>e[2]-n[2])),e.forEach((([e,n])=>{a[e]||(a[e]=[],o[e]=n.name)})),l=e.map((e=>e[0]))}n.forEach((n=>{var i,o;let c;if(t){const{server:t,user:i}=JSON.parse(n);if(t!==e.server_id)return;c=r.users.get(i)}else c=r.users.get(n);if(!c)return;const u=r.members.get(n),d=[c,null!=(i=null==u?void 0:u.nickname)?i:c.username];if(c.online&&(null==(o=c.status)?void 0:o.presence)!==g.Invisible){if(t&&(null==u?void 0:u.roles)&&s){let e=!1;for(const n of l)if(u.roles.includes(n)){a[n].push(d),e=!0;break}if(e)return}a.online.push(d)}else a.offline.push(d)})),Object.keys(a).forEach((e=>a[e].sort(((e,n)=>e[1].localeCompare(n[1])))));const c=[];return Object.keys(o).forEach((e=>{a[e].length>0&&c.push({type:"role",name:o[e],users:a[e].map((e=>e[0]))})})),a.online.length>0&&c.push({type:"online",users:a.online.map((e=>e[0]))}),a.offline.length>0&&c.push({type:"offline",users:a.offline.map((e=>e[0]))}),c}),[n])}const cc=h((({channel:e})=>{const n=lc(e,[...e.recipient_ids]);return d(Zi,null,d(oc,{entries:n,context:e}))})),uc=h((({channel:e})=>{const n=kt(),t=y(ft);f((()=>{t===ht.ONLINE&&e.server.fetchMembers()}),[t,e.server_id]);const r=[...n.members.keys()],i=lc(e,r,!0);return d(Zi,null,d(oc,{entries:i,context:e}))})),dc=_.div`
    padding: 6px;

    input {
        width: 100%;
    }

    .list {
        gap: 4px;
        margin: 8px 0;
        display: flex;
        flex-direction: column;
    }

    .message {
        margin: 2px;
        padding: 6px;
        overflow: hidden;
        border-radius: var(--border-radius);

        color: var(--foreground);
        background: var(--primary-background);

        &:hover {
            background: var(--hover);
        }

        > * {
            pointer-events: none;
        }
    }

    .sort {
        gap: 4px;
        margin: 6px 0;
        display: flex;

        > * {
            flex: 1;
            min-width: 0;
        }
    }
`;function pc({close:e}){const n=kt().channels.get(le().channel),[t,r]=U("Latest"),[i,a]=U(""),[o,s]=U({type:"waiting"});async function l(){if(!i)return;s({type:"loading"});const e=await n.searchWithUsers({query:i,sort:t});s({type:"results",results:e.messages})}return f((()=>{l()}),[t]),d(Zi,null,d(Qi,null,d(dc,null,d($n,{type:"error",onClick:e,block:!0},"« back to members"),d($n,{type:"subtle",block:!0},d(m,{id:"app.main.channel.search.title"})),d(Hn,{value:i,onKeyDown:e=>"Enter"===e.key&&l(),onChange:e=>a(e.currentTarget.value)}),d("div",{class:"sort"},["Latest","Oldest","Relevance"].map((e=>d(Gn,{key:e,compact:!0,error:t===e,onClick:()=>r(e)},d(m,{id:`app.main.channel.search.sort.${e.toLowerCase()}`}))))),"loading"===o.type&&d(Nt,{type:"ring"}),"results"===o.type&&d("div",{class:"list"},o.results.map((e=>{let t="";return"TextChannel"===(null==n?void 0:n.channel_type)&&(t+=`/server/${n.server_id}`),t+=`/channel/${e.channel_id}/${e._id}`,d(re,{to:t,key:e._id},d("div",{class:"message"},d(Pt,{message:e,head:!0,hideReply:!0})))}))))))}function fc(){const[e,n]=U();f((()=>Ut("RightSidebar","open",n)),[n]);const t="search"===e?d(pc,{close:()=>n(void 0)}):d(sc,null);return d(Ji,null,d(se,null,d(oe,{path:"/server/:server/channel/:channel"},t),d(oe,{path:"/channel/:channel"},t)))}function hc(){const e=b(),n=y(pt),t=y(ft),{id:r}=le(),{openScreen:i}=dt();return t!==ht.ONLINE||f((()=>{var t,a;if("saved"===r){for(const t of[...n.channels.values()])if("SavedMessages"===(null==t?void 0:t.channel_type))return void e.push(`/channel/${t._id}`);return void n.user.openDM().then((n=>e.push(`/channel/${null==n?void 0:n._id}`))).catch((e=>i({id:"error",error:e})))}if(n.users.get(r)){const o=null==(t=[...n.channels.values()].find((e=>"DirectMessage"===(null==e?void 0:e.channel_type)&&e.recipient_ids.includes(r))))?void 0:t._id;o?e.push(`/channel/${o}`):null==(a=n.users.get(r))||a.openDM().then((n=>e.push(`/channel/${null==n?void 0:n._id}`))).catch((e=>i({id:"error",error:e})))}else e.push("/")})),d(xa,{placement:"primary"},d(m,{id:"general.loading"}))}const vc=_.div`
    display: flex;
    flex-grow: 1;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    user-select: none;
    padding: 12px;

    img {
        height: 150px;
    }

    .subtext {
        color: var(--secondary-foreground);
        margin-bottom: 12px;
        font-size: 14px;
    }

    .actions {
        margin-top: 20px;
        display: flex;
        gap: 12px;
    }
`;var gc=h((e=>{var n;const t=b(),[r,i]=U(null!=(n=Kn().sectionToggle.nsfw)&&n),[a,o]=U(!1);return a||!e.gated||"Group"!==e.channel.channel_type&&"TextChannel"!==e.channel.channel_type?d(v,null,e.children):d(vc,null,d("img",{loading:"eager",src:"https://static.revolt.chat/emoji/mutant/26a0.svg",draggable:!1}),d("h2",null,e.channel.name),d("span",{className:"subtext"},d(m,{id:`app.main.channel.nsfw.${e.type}.marked`})," ",d("a",{href:"#"},d(m,{id:"app.main.channel.nsfw.learn_more"}))),d(ar,{checked:r,onChange:e=>{i(e),Un(e?{type:"SECTION_TOGGLE_SET",id:"nsfw",state:!0}:{type:"SECTION_TOGGLE_UNSET",id:"nsfw"})}},d(m,{id:"app.main.channel.nsfw.confirm"})),d("div",{className:"actions"},d(Gn,{contrast:!0,onClick:()=>t.goBack()},d(m,{id:"app.special.modals.actions.back"})),d(Gn,{contrast:!0,onClick:()=>r&&o(!0)},d(m,{id:`app.main.channel.nsfw.${e.type}.confirm`}))))}));function mc(e,n){let t;return(...r)=>{clearTimeout(t),t=setTimeout((()=>{e(...r)}),n)}}const _c=_.div`
    gap: 4px;
    padding: 8px;
    display: flex;
    user-select: none;
    flex-direction: column;
    background: var(--message-box);
`,yc=_.div`
    gap: 8px;
    display: flex;
    overflow-x: scroll;
    flex-direction: row;
`,bc=_.div`
    display: flex;
    flex-direction: column;

    &.fade {
        opacity: 0.4;
    }

    span.fn {
        margin: auto;
        font-size: 0.8em;
        overflow: hidden;
        max-width: 180px;
        text-align: center;
        white-space: nowrap;
        text-overflow: ellipsis;
        color: var(--secondary-foreground);
    }

    span.size {
        font-size: 0.6em;
        color: var(--tertiary-foreground);
        text-align: center;
    }
`,wc=_.div`
    gap: 4px;
    display: flex;
    font-size: 0.9em;
    align-items: center;
    color: var(--secondary-foreground);
`,xc=_.div`
    width: 4px;
    height: 130px;
    flex-shrink: 0;
    border-radius: var(--border-radius);
    background: var(--tertiary-background);
`,kc=_.div`
    width: 100px;
    height: 100px;
    display: grid;
    flex-shrink: 0;
    cursor: pointer;
    place-items: center;
    border-radius: var(--border-radius);
    background: var(--primary-background);
    transition: 0.1s ease background-color;

    &:hover {
        background: var(--secondary-background);
    }
`,Cc=_.div`
    display: grid;
    grid-template: "main" 100px / minmax(100px, 1fr);
    justify-items: center;

    cursor: pointer;
    overflow: hidden;
    border-radius: var(--border-radius);
    background: var(--primary-background);

    .icon,
    .overlay {
        grid-area: main;
    }

    .icon {
        height: 100px;
        margin-bottom: 4px;
        object-fit: contain;
    }

    .overlay {
        display: grid;
        align-items: center;
        justify-content: center;

        width: 100%;
        height: 100%;

        opacity: 0;
        visibility: hidden;

        transition: 0.1s ease opacity;
    }

    &:hover {
        .overlay {
            visibility: visible;
            opacity: 1;
            background-color: rgba(0, 0, 0, 0.8);
        }
    }
`;function zc({file:e,remove:n,index:t}){if(!e.type.startsWith("image/"))return d(bc,{className:t>=Ac?"fade":""},d(Cc,{onClick:n},d(kc,{className:"icon"},d(Oe,{size:36})),d("div",{class:"overlay"},d(Re,{size:36}))),d("span",{class:"fn"},e.name),d("span",{class:"size"},Tt(e.size)));const[r,i]=U("");return f((()=>{const n=URL.createObjectURL(e);return i(n),()=>URL.revokeObjectURL(n)}),[e]),d(bc,{className:t>=Ac?"fade":""},d(Cc,{onClick:n},d("img",{class:"icon",src:r,alt:e.name,loading:"eager"}),d("div",{class:"overlay"},d(Re,{size:36}))),d("span",{class:"fn"},e.name),d("span",{class:"size"},Tt(e.size)))}function Sc({state:e,addFile:n,removeFile:t}){return"none"===e.type?null:d(_c,null,d(yc,null,e.files.map(((n,r)=>d(v,{key:n.name},r===Ac&&d(xc,null),d(zc,{index:r,file:n,key:n.name,remove:"attached"===e.type?()=>t(r):void 0})))),"attached"===e.type&&d(kc,{onClick:n},d(K,{size:48}))),"uploading"===e.type&&d(wc,null,d(Ee,{size:24}),d(m,{id:"app.main.channel.uploading_file"})," (",e.percent,"%)"),"sending"===e.type&&d(wc,null,d(Ee,{size:24}),"Sending..."),"failed"===e.type&&d(wc,null,d(D,{size:24}),d(m,{id:`error.${e.error}`})))}const Tc=_.div`
    display: flex;
    height: 30px;
    padding: 0 12px;
    user-select: none;
    align-items: center;
    background: var(--message-box);

    > div {
        flex-grow: 1;
        margin-bottom: 0;

        &::before {
            display: none;
        }
    }

    .toggle {
        gap: 2px;
        display: flex;
        font-size: 12px;
        align-items: center;
        font-weight: 600;
        text-transform: uppercase;
        min-width: 6ch;
    }

    .username {
        display: flex;
        align-items: center;
        gap: 6px;
        font-weight: 600;
    }

    .message {
        display: flex;
    }

    .actions {
        gap: 12px;
        display: flex;
    }

    /*@media (pointer: coarse) { //FIXME: Make action buttons bigger on pointer coarse
        .actions > svg {
            height: 25px;
        }
    }*/
`;var Nc=h((({channel:e,replies:n,setReplies:t})=>{const r=kt();f((()=>Ut("ReplyBar","add",(e=>{var i;const a=e;n.length>=4||n.find((e=>e.id===a._id))||t([...n,{id:a._id,mention:a.author_id!==r.user._id&&(null!=(i=Kn().sectionToggle.mention)&&i)}])}))),[n,t,r.user]);const i=$t(e);if("RENDER"!==i.state)return null;const a=n.map((e=>e.id)),o=i.messages.filter((e=>a.includes(e._id)));return d("div",null,n.map(((e,i)=>{const a=o.find((n=>e.id===n._id));return a?d(Tc,{key:e.id},d(Ft,{preview:!0},d(Ae,{size:22}),d("div",{class:"username"},d(Ht,{user:a.author,size:16,showServerIdentity:!0})),d("div",{class:"message"},a.attachments&&d(v,null,d(Le,{size:16}),d("em",null,a.attachments.length>1?d(m,{id:"app.main.channel.misc.sent_multiple_files"}):d(m,{id:"app.main.channel.misc.sent_file"}))),"00000000000000000000000000"===a.author_id?d(Gt,{message:a,hideInfo:!0}):d(yt,{disallowBigEmoji:!0,content:a.content.replace(/\n/g," ")}))),d("span",{class:"actions"},a.author_id!==r.user._id&&d(vt,{onClick:()=>{let e=!1;t(n.map(((n,t)=>t===i?(e=!n.mention,l(s({},n),{mention:!n.mention})):n))),Un({type:"SECTION_TOGGLE_SET",id:"mention",state:e})}},d("span",{class:"toggle"},d(L,{size:15}),d(m,{id:e.mention?"general.on":"general.off"}))),d(vt,{onClick:()=>t(n.filter(((e,n)=>n!==i)))},d(Me,{size:16})))):d("span",null,d(m,{id:"app.main.channel.misc.failed_load"}))})))}));const Ic=_.div`
    display: flex;
    align-items: flex-start;
    background: var(--message-box);

    textarea {
        font-size: var(--text-size);
        background: transparent;

        &::placeholder {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
    }
`,Ec=_.div`
    display: flex;
    align-items: center;
    user-select: none;
    font-size: var(--text-size);
    color: var(--tertiary-foreground);

    .text {
        padding: 14px 14px 14px 0;
    }

    svg {
        flex-shrink: 0;
    }
`,Oc=_.div`
    display: flex;
    place-items: center;

    > div {
        height: 48px;
        width: 48px;
        padding: 12px;
    }

    ${()=>!Dt&&fe`
            .mobile {
                display: none;
            }
        `}
`,Rc=new RegExp("^s/([^])*/([^])*$"),Ac=4;var Lc=h((({channel:e})=>{var n,t,r;const[i,a]=U(null!=(n=Kn().drafts[e._id])?n:""),[o,l]=U({type:"none"}),[c,p]=U(!1),[h,g]=U([]),_=y(Bt),{openScreen:b}=dt(),w=y(pt),k=jt(),C=$t(e);if(!(e.permission&x.ChannelPermission.SendMessage))return d(Ic,null,d(Ec,null,d(Oc,null,d(Vt,{permission:"SendMessages",placement:"top"},d(je,{size:22}))),d("div",{className:"text"},d(m,{id:"app.main.channel.misc.no_sending"}))));const z=ce((n=>{a(null!=n?n:""),Un(n?{type:"SET_DRAFT",channel:e._id,content:n}:{type:"CLEAR_DRAFT",channel:e._id})}),[e._id]);async function S(){var n;if("uploading"===o.type||"sending"===o.type)return;const t=null!=(n=null==i?void 0:i.trim())?n:"";if("attached"===o.type)return async function(n){if("attached"!==o.type)return;const t=[],r=Q.CancelToken.source(),i=o.files;T(),l({type:"uploading",files:i,percent:0,cancel:r});try{for(let e=0;e<i.length&&e<Ac;e++){const n=i[e];t.push(await vi(w.configuration.features.autumn.url,"attachments",n,{onUploadProgress:n=>l({type:"uploading",files:i,percent:Math.round((100*e+100*n.loaded/n.total)/Math.min(i.length,Ac)),cancel:r}),cancelToken:r.token}))}}catch(s){return void("cancel"===(null==s?void 0:s.message)?l({type:"attached",files:i}):l({type:"failed",files:i,error:mt(s)}))}l({type:"sending",files:i});const a=De();try{await e.sendMessage({content:n,nonce:a,replies:h,attachments:t})}catch(s){return void l({type:"failed",files:i,error:mt(s)})}z(),g([]),_("outbound"),i.length>Ac?l({type:"attached",files:i.slice(Ac)}):l({type:"none"})}(t);if(0===t.length)return;T(),z(),g([]);const r=De();if(Rc.test(t)){C.messages.reverse();const e=C.messages.find((e=>e.author_id===w.user._id));if(C.messages.reverse(),e){let[n,r,i,a]=t.split(/\//);"*"==r&&(r=e.content.toString());const o=""==r?e.content.toString()+i:e.content.toString().replace(new RegExp(r,a),i);o!=e.content&&(0==o.length?e.delete().catch(console.error):e.edit({content:o.substr(0,2e3)}).then((()=>Yt((()=>C.jumpToBottom(Jt))))).catch(console.error))}}else{_("outbound"),Un({type:"QUEUE_ADD",nonce:r,channel:e._id,message:{_id:r,channel:e._id,author:w.user._id,content:t,replies:h}}),Yt((()=>C.jumpToBottom(Jt)));try{await e.sendMessage({content:t,nonce:r,replies:h})}catch(a){Un({type:"QUEUE_FAIL",error:mt(a),nonce:r})}}}function T(n){if(n||c){const n=w.websocket;n.connected&&(p(!1),n.send({type:"EndTyping",channel:e._id}))}}f((()=>Ut("MessageBox","append",(function(e,n){const t="quote"===n?`${e.split("\n").map((e=>`> ${e}`)).join("\n")}\n\n`:`${e} `;i&&0!==i.length?z(`${i}\n${t}`):z(t)}))),[i,z]);const N=ce(mc(T,1e3),[e._id]),I=Wt(z,{users:{type:"channel",id:e._id},channels:"TextChannel"===e.channel_type?{server:e.server_id}:void 0}),{onChange:E,onKeyUp:O,onKeyDown:R,onFocus:A,onBlur:L}=I,M=u(I,["onChange","onKeyUp","onKeyDown","onFocus","onBlur"]);return d(v,null,d(Kt,s({},M)),d(Sc,{state:o,addFile:()=>"attached"===o.type&&gi(2e7,(e=>l({type:"attached",files:[...o.files,...e]})),(()=>b({id:"error",error:"FileTooLarge"})),!0),removeFile:e=>{"attached"===o.type&&(1===o.files.length?l({type:"none"}):l({type:"attached",files:o.files.filter(((n,t)=>e!==t))}))}}),d(Nc,{channel:e,replies:h,setReplies:g}),d(Ic,null,e.permission&x.ChannelPermission.UploadFiles?d(Oc,null,d(mi,{size:24,behaviour:"multi",style:"attachment",fileType:"attachments",maxFileSize:2e7,attached:"none"!==o.type,uploading:"uploading"===o.type||"sending"===o.type,remove:async()=>l({type:"none"}),onChange:e=>l({type:"attached",files:e}),cancel:()=>"uploading"===o.type&&o.cancel.cancel("cancel"),append:e=>{0!==e.length&&("none"===o.type?l({type:"attached",files:e}):"attached"===o.type&&l({type:"attached",files:[...o.files,...e]}))}})):void 0,d(qt,{autoFocus:!0,hideBorder:!0,maxRows:20,id:"message",maxLength:2e3,onKeyUp:O,value:null!=i?i:"",padding:"var(--message-box-padding)",onKeyDown:e=>{if(e.ctrlKey&&"Enter"===e.key)return e.preventDefault(),S();if(!R(e)){if("ArrowUp"===e.key&&(!i||0===i.length))return e.preventDefault(),void gt("MessageRenderer","edit_last");if(!e.shiftKey&&"Enter"===e.key&&!Dt)return e.preventDefault(),S();"Escape"===e.key&&(h.length>0?g(h.slice(0,-1)):"attached"===o.type&&o.files.length>0&&l({type:o.files.length>1?"attached":"none",files:o.files.slice(0,-1)})),N(!0)}},placeholder:"DirectMessage"===e.channel_type?k("app.main.channel.message_who",{person:null==(t=e.recipient)?void 0:t.username}):"SavedMessages"===e.channel_type?k("app.main.channel.message_saved"):k("app.main.channel.message_where",{channel_name:null!=(r=e.name)?r:void 0}),disabled:"uploading"===o.type||"sending"===o.type,onChange:n=>{z(n.currentTarget.value),function(){if("number"==typeof c&&+new Date<c)return;const n=w.websocket;n.connected&&(p(+new Date+2500),n.send({type:"BeginTyping",channel:e._id}))}(),E(n)},onFocus:A,onBlur:L}),d(Oc,null,d(vt,{className:"mobile",onClick:S,onMouseDown:e=>e.preventDefault()},d(Be,{size:20})))))}));const Mc=_.div`
    z-index: 10;
    position: relative;

    > div {
        top: -26px;
        height: 28px;
        width: 100%;
        position: absolute;
        display: flex;
        align-items: center;
        cursor: pointer;
        font-size: 13px;
        padding: 0 8px;
        user-select: none;
        justify-content: space-between;
        color: var(--secondary-foreground);
        transition: color ease-in-out 0.08s;
        background: var(--secondary-background);
        border-radius: var(--border-radius) var(--border-radius) 0 0;

        > div {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        &:hover {
            color: var(--primary-text);
        }

        &:active {
            transform: translateY(1px);
        }

        ${()=>Dt&&fe`
                height: 34px;
                top: -32px;
                padding: 0 12px;
            `}
    }
`;var jc=h((({channel:e})=>{const n=$t(e);return"RENDER"!==n.state||n.atBottom?null:d(Mc,null,d("div",{onClick:()=>n.jumpToBottom(!0)},d("div",null,d(m,{id:"app.main.channel.misc.viewing_old"})),d("div",null,d(m,{id:"app.main.channel.misc.jump_present"})," ",d(Pe,{size:20}))))}));const Bc=_.div`
    position: relative;

    > div {
        height: 24px;
        margin-top: -24px;
        position: absolute;

        gap: 8px;
        display: flex;
        padding: 0 10px;
        user-select: none;
        align-items: center;
        flex-direction: row;
        width: calc(100% - var(--scrollbar-thickness));
        color: var(--secondary-foreground);
        background: var(--secondary-background);
    }

    .avatars {
        display: flex;

        img {
            width: 16px;
            height: 16px;
            object-fit: cover;
            border-radius: var(--border-radius-half);

            &:not(:first-child) {
                margin-left: -4px;
            }
        }
    }

    .usernames {
        min-width: 0;
        font-size: 13px;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }
`;var Dc=h((({channel:e})=>{const n=e.typing.filter((e=>void 0!==e&&e._id!==e.client.user._id&&e.relationship!==k.Blocked));if(n.length>0){let e;if(n.sort(((e,n)=>e._id.toUpperCase().localeCompare(n._id.toUpperCase()))),n.length>=5)e=d(m,{id:"app.main.channel.typing.several"});else if(n.length>1){const t=[...n].map((e=>e.username)),r=t.pop();e=d(m,{id:"app.main.channel.typing.multiple",fields:{user:r,userlist:t.join(", ")}})}else e=d(m,{id:"app.main.channel.typing.single",fields:{user:n[0].username}});return d(Bc,null,d("div",null,d("div",{className:"avatars"},n.map((e=>d("img",{key:e._id,loading:"eager",src:e.generateAvatarURL({max_side:256})})))),d("div",{className:"usernames"},e)))}return null}));function Pc({channel:e,toggleSidebar:n}){const{openScreen:t}=dt(),r=b();function i(){const e=document.querySelector("#app > div > div");null==e||e.scrollTo({behavior:"smooth",left:3*e.clientWidth})}return d(v,null,d(cr,{style:"channel"}),"Group"===e.channel_type&&d(v,null,d(vt,{onClick:()=>t({id:"user_picker",omit:e.recipient_ids,callback:async n=>{for(const t of n)await e.addMember(t)}})},d(ae,{size:27})),d(vt,{onClick:()=>r.push(`/channel/${e._id}/settings`)},d(z,{size:24}))),d(Uc,{channel:e}),"VoiceChannel"!==e.channel_type&&d(vt,{onClick:()=>{gt("RightSidebar","open","search"),i()}},d(Ue,{size:25})),("Group"===e.channel_type||"TextChannel"===e.channel_type)&&d(vt,{onClick:function(){Dt?i():null==n||n()}},d(ge,{size:25})))}function Uc({channel:e}){return"SavedMessages"===e.channel_type||"TextChannel"===e.channel_type?null:ni.status>=Yr.READY?ni.roomId===e._id?d(vt,{onClick:ni.disconnect},d($e,{size:22})):d(vt,{onClick:async()=>{await ni.loadVoice(),ni.disconnect(),ni.connect(e)}},d(q,{size:24})):d(vt,null,d(q,{size:24,color:"red"}))}const $c=_.div`
    flex-grow: 1;
    min-width: 0;
    overflow: hidden;
    white-space: nowrap;

    display: flex;
    gap: 8px;
    align-items: center;

    * {
        display: inline-block;
    }

    .divider {
        height: 20px;
        margin: 0 5px;
        padding-left: 1px;
        background-color: var(--tertiary-background);
    }

    .status {
        width: 10px;
        height: 10px;
        display: inline-block;
        margin-inline-end: 6px;
        border-radius: var(--border-radius-half);
    }

    .desc {
        cursor: pointer;
        margin-top: 2px;
        font-size: 0.8em;
        font-weight: 400;
        color: var(--secondary-foreground);

        > * {
            pointer-events: none;
        }
    }
`,Fc=_.div`
    cursor: pointer;
    color: var(--secondary-foreground);

    ${!Dt&&fe`
        &:hover {
            color: var(--foreground);
        }
    `}
`;var Hc=h((({channel:e,toggleSidebar:n,toggleChannelSidebar:t})=>{var r;const{openScreen:i}=dt(),a=_t(e);let o,s;switch(e.channel_type){case"SavedMessages":o=d(xe,{size:24});break;case"DirectMessage":o=d(L,{size:24}),s=e.recipient;break;case"Group":o=d(ge,{size:24});break;case"TextChannel":o=d(Fe,{size:24})}return d(xa,{placement:"primary"},d(ka,null),d(Fc,{onClick:t},o),d($c,null,d("span",{className:"name"},a),Dt&&"DirectMessage"===e.channel_type&&d(v,null,d("div",{className:"divider"}),d("span",{className:"desc"},d("div",{className:"status",style:{backgroundColor:Zt(s)}}),d(kr,{user:s}))),!Dt&&("Group"===e.channel_type||"TextChannel"===e.channel_type)&&e.description&&d(v,null,d("div",{className:"divider"}),d("span",{className:"desc",onClick:()=>i({id:"channel_info",channel:e})},d(yt,{content:null!=(r=e.description.split("\n")[0])?r:"",disallowBigEmoji:!0})))),d(Pc,{channel:e,toggleSidebar:n}))}));const Gc=_.div`
    padding: 20px;
    background: var(--secondary-background);

    .status {
        flex: 1 0;
        display: flex;
        position: absolute;
        align-items: center;

        padding: 10px;
        font-size: 14px;
        font-weight: 600;
        user-select: none;

        color: var(--success);
        border-radius: var(--border-radius);
        background: var(--primary-background);

        svg {
            margin-inline-end: 4px;
            cursor: help;
        }
    }

    display: flex;
    flex-direction: column;

    .participants {
        margin: 20px 0;
        justify-content: center;
        pointer-events: none;
        user-select: none;
        display: flex;
        gap: 16px;

        .disconnected {
            opacity: 0.5;
        }
    }

    .actions {
        display: flex;
        justify-content: center;
        gap: 10px;
    }
`;var Vc=h((({id:e})=>{if(ni.roomId!==e)return null;const n=kt(),t=n.users.get(n.user._id),r=Array.from(ni.participants.keys()),i=de((()=>r.map((e=>n.users.get(e)))),[r]);return d(Gc,null,d("div",{className:"participants"},i&&0!==i.length?i.map(((e,t)=>{var i,a;const o=r[t];return d("div",{key:o},d(St,{size:80,target:e,status:!1,voice:(null==(i=n.user)?void 0:i._id)===o&&ni.isDeaf()?"deaf":(null==(a=ni.participants.get(o))?void 0:a.audio)?void 0:"muted"}))})):void 0!==t&&d("div",{key:t._id,className:"disconnected"},d(St,{size:80,target:t,status:!1}))),d("div",{className:"status"},d(qe,{size:20}),ni.status===Yr.CONNECTED&&d(m,{id:"app.main.channel.voice.connected"})),d("div",{className:"actions"},d(ut,{content:"Leave call",placement:"bottom"},d(Gn,{error:!0,onClick:ni.disconnect},d($e,{width:25}))),ni.isProducing("audio")?d(ut,{content:"Mute microphone",placement:"bottom"},d(Gn,{onClick:()=>ni.stopProducing("audio")},d(He,{width:25}))):d(ut,{content:"Unmute microphone",placement:"bottom"},d(Gn,{onClick:()=>ni.startProducing("audio")},d(Ge,{width:25}))),ni.isDeaf()?d(ut,{content:"Deafen",placement:"bottom"},d(Gn,{onClick:()=>ni.stopDeafen()},d(Ve,{width:25}))):d(ut,{content:"Deafen",placement:"bottom"},d(Gn,{onClick:()=>ni.startDeafen()},d(We,{width:25})))))}));const Wc=_.div`
    flex-grow: 1;
    display: flex;
    min-height: 0;
    overflow: hidden;
    flex-direction: row;
`,qc=_.div`
    flex-grow: 1;
    display: flex;
    overflow: hidden;
    flex-direction: column;
`,Kc=_.div`
    flex-grow: 1;
    display: flex;
    overflow: hidden;
    flex-direction: column;

    .placeholder {
        justify-content: center;
        text-align: center;
        margin: auto;
    
        .primary {
            color: var(--secondary-foreground);
            font-weight: 700;
            font-size: 22px;
            margin: 0 0 5px 0;
        }
    
        .secondary {
            color: var(--tertiary-foreground);
            font-weight: 400;
        }
    
        svg {
            margin: 2em auto;
            fill-opacity: 0.8;
        }
    }
`;function Yc({id:e}){const n=kt().channels.get(e);return n?"VoiceChannel"===n.channel_type?d(Zc,{channel:n}):d(Jc,{channel:n}):d(Qc,null)}const Jc=h((({channel:e})=>{var n,t,r;const[i,a]=U(null==(n=Kn().sectionToggle.sidebar_members)||n),[o,s]=U(null==(t=Kn().sectionToggle.sidebar_channels)||t),l=e._id;return d(gc,{type:"channel",channel:e,gated:!("TextChannel"!==e.channel_type&&"Group"!==e.channel_type||!(null==(r=e.name)?void 0:r.includes("nsfw")))},d(Hc,{channel:e,toggleSidebar:()=>{a(!i),Un(i?{type:"SECTION_TOGGLE_SET",id:"sidebar_members",state:!1}:{type:"SECTION_TOGGLE_UNSET",id:"sidebar_members"})},toggleChannelSidebar:()=>{Dt||(s(!o),Un(o?{type:"SECTION_TOGGLE_SET",id:"sidebar_channels",state:!1}:{type:"SECTION_TOGGLE_UNSET",id:"sidebar_channels"}))}}),d(Wc,null,d(qc,null,d(Vc,{id:l}),d(Qt,{channel:e}),d(Dc,{channel:e}),d(jc,{channel:e}),d(Lc,{channel:e})),!Dt&&i&&d(fc,null)))}));function Zc({channel:e}){return d(v,null,d(Hc,{channel:e}),d(Vc,{id:e._id}))}function Qc(){return d(Kc,null,d(xa,{placement:"primary"},d(Fe,{size:24}),d("span",{className:"name"},d(m,{id:"app.main.channel.errors.nochannel"}))),d("div",{className:"placeholder"},d(Ke,{width:80}),d("div",{className:"primary"},d(m,{id:"app.main.channel.errors.title"})),d("div",{className:"secondary"},d(m,{id:"app.main.channel.errors.nochannels"}))))}function Xc(){const{channel:e}=le();return d(Yc,{id:e,key:e})}function eu(){const e=y(pt),n=e.user.permission,[t,r]=U(e.websocket.ping);return setInterval((()=>r(e.websocket.ping)),1e3*e.options.heartbeat),d("div",null,d(xa,{placement:"primary"},d(Ye,{size:"24"}),"Developer Tab"),d("div",{style:{padding:"16px"}},d(ea,{always:!0})),d("div",{style:{padding:"16px"}},d("b",null,"Server Ping:")," ",null!=t?t:"?","ms",d("br",null),d("b",null,"User ID:")," ",e.user._id," ",d("br",null),d("b",null,"Permission against self:")," ",n," ",d("br",null)),d("div",{style:{padding:"16px"}},d(Xt,{id:"login.open_mail_provider",fields:{provider:d("b",null,"GAMING!")}})),d("div",{style:{padding:"16px"}}))}var nu=h((()=>{const{openScreen:e}=dt(),n=[...kt().users.values()];n.sort(((e,n)=>e.username.localeCompare(n.username)));const t=n.filter((e=>e.relationship===k.Friend)),r=[["",n.filter((e=>e.relationship===k.Incoming))],["app.special.friends.sent",n.filter((e=>e.relationship===k.Outgoing)),"outgoing"],["app.status.online",t.filter((e=>{var n;return e.online&&(null==(n=e.status)?void 0:n.presence)!==g.Invisible})),"online"],["app.status.offline",t.filter((e=>{var n;return!e.online||(null==(n=e.status)?void 0:n.presence)===g.Invisible})),"offline"],["app.special.friends.blocked",n.filter((e=>e.relationship===k.Blocked)),"blocked"]],i=r[0][1],a=i.map((e=>d("b",{key:e._id},e.username)));for(let s=i.length-1;s>0;s--)a.splice(s,0,", ");const o=0===r.reduce(((e,n)=>e+n.length),0);return d(v,null,d(xa,{placement:"primary"},!Dt&&d(we,{size:24}),d("div",{className:Mr},d(m,{id:"app.navigation.tabs.friends"})),d("div",{className:jr},d(ut,{content:"Create Group",placement:"bottom"},d(vt,{onClick:()=>e({id:"special_input",type:"create_group"})},d(Je,{size:24}))),d(ut,{content:"Add Friend",placement:"bottom"},d(vt,{onClick:()=>e({id:"special_input",type:"add_friend"})},d(ae,{size:27}))))),d("div",{className:Br,"data-empty":o,"data-mobile":Dt},o&&d(v,null,d("img",{src:"https://img.insrt.uk/xexu7/XOPoBUTI47.png/raw"}),d(m,{id:"app.special.friends.nobody"})),i.length>0&&d("div",{className:Gr,onClick:()=>e({id:"pending_requests",users:i})},d("div",{className:Vr},i.map(((e,n)=>n<3&&d(St,{target:e,size:64,mask:n<Math.min(i.length-1,2)?"url(#overlap)":void 0})))),d("div",{className:Wr},d("div",null,d(m,{id:"app.special.friends.pending"})," ",d("span",null,i.length)),d("span",null,i.length>3?d(Xt,{id:"app.special.friends.from.several",fields:{userlist:a.slice(0,6),count:i.length-3}}):i.length>1?d(Xt,{id:"app.special.friends.from.multiple",fields:{user:a.shift(),userlist:a.slice(1)}}):d(Xt,{id:"app.special.friends.from.single",fields:{user:a[0]}}))),d(B,{size:28})),r.map((([e,n,t],r)=>{if(0!==r&&0!==n.length)return d(wa,{key:t,id:`friends_${t}`,defaultValue:!0,sticky:!0,large:!0,summary:d("div",{class:"title"},d(m,{id:e})," — ",n.length)},n.map((e=>d(ti,{key:e._id,user:e}))))}))))}));var tu="_home_1khrk_1",ru="_actions_1khrk_12";const iu=_.div`
    /*height: 54px;*/
    padding: 9.8px 12px;
    border-radius: var(--border-radius);
    margin-bottom: 10px;
    color: var(--foreground);
    background: var(--secondary-header);
    gap: 12px;
    display: flex;
    align-items: center;
    flex-direction: row;

    > svg {
        flex-shrink: 0;
    }

    .content {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
        font-weight: 600;
        font-size: 14px;

        .title {
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
            overflow: hidden;
        }

        .description {
            ${e=>e.largeDescription?fe`
                          font-size: 14px;
                      `:fe`
                          font-size: 11px;
                      `}

            font-weight: 400;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 3;
            overflow: hidden;

            a:hover {
                text-decoration: underline;
            }
        }
    }

    ${e=>e.hover&&fe`
            cursor: pointer;
            opacity: 1;
            transition: 0.1s ease background-color;

            &:hover {
                background: var(--secondary-background);
            }
        `}

    ${e=>e.disabled&&fe`
            opacity: 0.4;
            /*.content,
            .action {
                color: var(--tertiary-foreground);
            }*/

            .action {
                font-size: 14px;
            }
        `}
    
    ${e=>e.account&&fe`
            height: 54px;

            .content {
                text-overflow: ellipsis;
                overflow: hidden;
                white-space: nowrap;
                .title {
                    text-transform: uppercase;
                    font-size: 12px;
                    color: var(--secondary-foreground);
                }

                .description {
                    font-size: 15px;

                    text-overflow: ellipsis;
                    white-space: nowrap;
                    overflow: hidden;
                }
            }
        `}
`;function au({icon:e,children:n,description:t,account:r,disabled:i,onClick:a,hover:o,action:s}){return d(iu,{hover:o||void 0!==a,onClick:a,disabled:i,account:r},e,d("div",{class:"content"},d("div",{className:"title"},n),d("div",{className:"description"},t)),d("div",{class:"action"},"string"==typeof s?"chevron"===s?d(B,{size:24}):d($,{size:20}):s))}const ou=_.div`
    cursor: pointer;
    color: var(--secondary-foreground);

    ${!Dt&&fe`
        &:hover {
            color: var(--foreground);
        }
    `}
`;function su(){var e;const[n,t]=U(null==(e=Kn().sectionToggle.sidebar_channels)||e);return d("div",{className:tu},d(xa,{placement:"primary"},d(ou,{onClick:()=>{Dt||(t(!n),Un(n?{type:"SECTION_TOGGLE_SET",id:"sidebar_channels",state:!1}:{type:"SECTION_TOGGLE_UNSET",id:"sidebar_channels"}))}},d(be,{size:24})),d(m,{id:"app.navigation.tabs.home"})),d("h3",null,d(m,{id:"app.special.modals.onboarding.welcome"}),d("br",null),d("img",{src:er})),d("div",{className:ru},d(re,{to:"/invite/Testers"},d(au,{action:"chevron",icon:d(Yn,{emoji:"😁",size:32})},"Join testers server")),d("a",{href:"https://insrt.uk/donate",target:"_blank",rel:"noreferrer"},d(au,{action:"external",icon:d(Yn,{emoji:"💷",size:32})},"Donate to Revolt")),d(re,{to:"/settings/feedback"},d(au,{action:"chevron",icon:d(Yn,{emoji:"🎉",size:32})},"Give feedback")),d("a",{href:"https://revolt.social",target:"_blank",rel:"noreferrer"},d(au,{action:"external",icon:d(Yn,{emoji:"🧭",size:32})},"Find Servers & Bots")),d(ut,{content:"You can also right-click the user icon in the top left, or left click it if you're already home."},d(re,{to:"/settings"},d(au,{action:"chevron",icon:d(Yn,{emoji:"🔧",size:32})},"Settings")))))}function lu(){const{id:e}=le(),n=kt(),[t,r]=U();f((()=>{n.bots.fetchPublic(e).then(r)}),[]);const[i,a]=U("none"),[o,s]=U("none");return d("div",{style:{padding:"6em"}},d(sr,{warning:!0,hideSeparator:!0},"This section is under construction."),void 0===t&&d(Nt,{type:"spinner"}),t&&d(v,null,d(St,{size:64,attachment:t.avatar}),d("h1",null,t.username),t.description&&d("p",null,t.description),d($n,{type:"subtle"},"Add to server"),d(pr,{value:i,onChange:e=>a(e.currentTarget.value)},d("option",{value:"none"},"un selected"),[...n.servers.values()].map((e=>d("option",{value:e._id,key:e._id},e.name)))),d(Gn,{contrast:!0,onClick:()=>"none"!==i&&n.bots.invite(t._id,{server:i})},"add"),d($n,{type:"subtle"},"Add to group"),d(pr,{value:o,onChange:e=>s(e.currentTarget.value)},d("option",{value:"none"},"un selected"),[...n.channels.values()].filter((e=>"Group"===e.channel_type)).map((e=>d("option",{value:e._id,key:e._id},e.name)))),d(Gn,{contrast:!0,onClick:()=>"none"!==o&&n.bots.invite(t._id,{group:o})},"add")))}var cu={settings:"_settings_vku0p_34",sidebar:"_sidebar_vku0p_40",content:"_content_vku0p_41",scrollbox:"_scrollbox_vku0p_44",container:"_container_vku0p_50",version:"_version_vku0p_57",contentcontainer:"_contentcontainer_vku0p_66",open:"_open_vku0p_1",opacity:"_opacity_vku0p_1",closing:"_closing_vku0p_80",close:"_close_vku0p_215",divider:"_divider_vku0p_121",donate:"_donate_vku0p_124",logOut:"_logOut_vku0p_127",footer:"_footer_vku0p_192",action:"_action_vku0p_199",closeButton:"_closeButton_vku0p_215"};function uu({pages:e,switchPage:n,category:t,custom:r,children:i,defaultPage:a,showExitButton:o}){const s=b(),l=y(Jn),{page:c}=le(),[u,p]=U(!1),h=ce((()=>{s.length>1?(p(!0),setTimeout((()=>{s.goBack()}),100)):s.push("/")}),[s]);return f((()=>{function e(e){"Escape"===e.key&&h()}return document.body.addEventListener("keydown",e),()=>document.body.removeEventListener("keydown",e)}),[h]),d("div",{className:zt(cu.settings,{[cu.closing]:u,[cu.native]:window.isNative}),"data-mobile":Dt},d(Qe,null,d("meta",{name:"theme-color",content:Dt?l.background:l["secondary-background"]})),Dt&&d(xa,{placement:"primary"},void 0===c?d(v,null,o&&d(vt,{onClick:h},d(D,{size:27,style:{marginInlineEnd:"8px"}})),d(m,{id:"app.settings.title"})):d(v,null,d(vt,{onClick:()=>n()},d(Ze,{size:24,style:{marginInlineEnd:"10px"}})),d(m,{id:`app.settings.${t}.${c}.title`}))),(!Dt||void 0===c)&&d("div",{className:cu.sidebar},d("div",{className:cu.scrollbox},d("div",{className:cu.container},e.map(((e,t)=>e.hidden?void 0:d(v,null,e.category&&d(ta,{variant:"uniform",text:e.category}),d(la,{active:c===e.id||0===t&&!Dt&&void 0===c,onClick:()=>n(e.id),compact:!0},e.icon," ",e.title),e.divider&&d(Cr,null)))),r))),(!Dt||"string"==typeof c)&&d("div",{className:cu.content},d("div",{className:cu.scrollbox},d("div",{className:cu.contentcontainer},!Dt&&!e.find((e=>e.id===c&&e.hideTitle))&&d("h1",null,d(m,{id:`app.settings.${t}.${null!=c?c:a}.title`})),i),!Dt&&d("div",{className:cu.action},d("div",{onClick:h,className:cu.closeButton},d(D,{size:28}))))))}const du=_.div`
    gap: 20px;
    display: flex;

    .name {
        flex-grow: 1;

        input {
            width: 100%;
        }
    }
`;var pu=h((({channel:e})=>{var n,t;const[r,i]=U(null!=(n=e.name)?n:void 0),[a,o]=U(null!=(t=e.description)?t:"");f((()=>{var n;return i(null!=(n=e.name)?n:void 0)}),[e.name]),f((()=>{var n;return o(null!=(n=e.description)?n:"")}),[e.description]);const[s,l]=U(!1);return d("div",{className:"overview"},d(du,null,d(mi,{width:80,height:80,style:"icon",fileType:"icons",behaviour:"upload",maxFileSize:25e5,onUpload:n=>e.edit({icon:n}),previewURL:e.generateIconURL({max_side:256},!0),remove:()=>e.edit({remove:"Icon"}),defaultPreview:"Group"===e.channel_type?"/assets/group.png":void 0}),d("div",{className:"name"},d("h3",null,"Group"===e.channel_type?d(m,{id:"app.main.groups.name"}):d(m,{id:"app.main.servers.channel_name"})),d(Hn,{contrast:!0,value:r,maxLength:32,onChange:e=>{i(e.currentTarget.value),s||l(!0)}}))),d("h3",null,"Group"===e.channel_type?d(m,{id:"app.main.groups.description"}):d(m,{id:"app.main.servers.channel_description"})),d(qt,{maxRows:10,minHeight:60,maxLength:1024,value:a,placeholder:"Add a description...",onChange:e=>{o(e.currentTarget.value),s||l(!0)}}),d("p",null,d(Gn,{onClick:function(){const n={};r!==e.name&&(n.name=r),a!==e.description&&(n.description=a),e.edit(n),l(!1)},contrast:!0,disabled:!s},d(m,{id:"app.special.modals.actions.save"}))))})),fu=h((({channel:e})=>{var n,t;const[r,i]=U("default"),a={};if("Group"!==e.channel_type){const t=e.server,r=null!=(n=null==t?void 0:t.roles)?n:{};for(const e of Object.keys(r))a[e]={name:r[e].name,permissions:r[e].permissions[1]}}const o=["default",...Object.keys(a)],s={name:"Default",permissions:null!=(t="Group"===e.channel_type?e.permissions:e.default_permissions)?t:x.DEFAULT_PERMISSION_DM},l="default"===r?s:a[r];if(!l)return f((()=>i("default")),[]),null;const[c,u]=U(l.permissions>>>0);return f((()=>{u(l.permissions>>>0)}),[r,l.permissions]),d("div",null,d(sr,{warning:!0},"This section is under construction."),d("h2",null,"select role"),r,o.map((e=>{const n="default"===e?s:a[e];return d(ar,{key:e,checked:r===e,onChange:n=>n&&i(e)},n.name)})),d("h2",null,"channel permissions"),Object.keys(x.ChannelPermission).map((e=>{if("View"===e)return null;const n=x.ChannelPermission[e];return n&x.DEFAULT_PERMISSION_DM?d(ar,{checked:(c&n)>0,onChange:e=>u(e?c|n:c^n)},e):void 0})),d(Gn,{contrast:!0,onClick:()=>{e.setPermissions(r,c)}},"click here to save permissions for role"))}));function hu(){const{channel:e}=le(),n=kt(),t=b(),r=n.channels.get(e);if(!r)return null;if("SavedMessages"===r.channel_type||"DirectMessage"===r.channel_type)return null;return d(uu,{pages:[{category:d(ta,{variant:"uniform",text:_t(r,!0)}),id:"overview",icon:d(Xe,{size:20}),title:d(m,{id:"app.settings.channel_pages.overview.title"})},{id:"permissions",icon:d(en,{size:20}),title:d(m,{id:"app.settings.channel_pages.permissions.title"})}],children:d(se,null,d(oe,{path:"/server/:server/channel/:channel/settings/permissions"},d(fu,{channel:r})),d(oe,{path:"/channel/:channel/settings/permissions"},d(fu,{channel:r})),d(oe,null,d(pu,{channel:r}))),category:"channel_pages",switchPage:function(n){let i;switch(null==r?void 0:r.channel_type){case"TextChannel":case"VoiceChannel":i=`/server/${r.server_id}/channel/${e}/settings`;break;default:i=`/channel/${e}/settings`}n?t.replace(`${i}/${n}`):t.replace(i)},defaultPage:"overview",showExitButton:!0})}var vu="_overview_1bl2v_1",gu="_row_1bl2v_1",mu="_name_1bl2v_5",_u="_userList_1bl2v_15",yu="_subtitle_1bl2v_20",bu="_reason_1bl2v_29",wu="_invite_1bl2v_35",xu="_ban_1bl2v_36",ku="_member_1bl2v_37",Cu="_chevron_1bl2v_74",zu="_memberView_1bl2v_80",Su="_roles_1bl2v_86",Tu="_list_1bl2v_91",Nu="_permissions_1bl2v_96",Iu="_title_1bl2v_101",Eu="_actions_1bl2v_119";const Ou=h((({server:e})=>{const[n,t]=U([]),[r,i]=U(void 0);return f((()=>{e.fetchBans().then(i)}),[e,i]),d("div",{className:_u},d("div",{className:yu},d("span",null,d(m,{id:"app.settings.server_pages.bans.user"})),d("span",{class:bu},d(m,{id:"app.settings.server_pages.bans.reason"})),d("span",null,d(m,{id:"app.settings.server_pages.bans.revoke"}))),void 0===r&&d(Nt,{type:"ring"}),null==r?void 0:r.bans.map((a=>{var o;const c=r.users.find((e=>e._id===a._id.user));return d("div",{key:a._id.user,className:xu,"data-deleting":n.indexOf(a._id.user)>-1},d("span",null,d(St,{attachment:null==c?void 0:c.avatar,size:24}),null==c?void 0:c.username),d("div",{className:bu},null!=(o=a.reason)?o:d(m,{id:"app.settings.server_pages.bans.no_reason"})),d(vt,{onClick:async()=>{t([...n,a._id.user]),await e.unbanUser(a._id.user),i(l(s({},r),{bans:r.bans.filter((e=>e._id.user!==a._id.user))}))},disabled:n.indexOf(a._id.user)>-1},d(Re,{size:24})))})))})),Ru=h((({server:e})=>{var n,t;const r=e.channels.filter((e=>void 0!==e)),[i,a]=U(null!=(n=e.categories)?n:[]),[o,c]=U("");return d("div",null,d(sr,{warning:!0},"This section is under construction."),d("p",null,d(Gn,{contrast:!0,disabled:pe(null!=(t=e.categories)?t:[],i),onClick:()=>e.edit({categories:i})},"save categories")),d("h2",null,"categories"),i.map((e=>d("div",{style:{background:"var(--hover)"},key:e.id},d(Hn,{value:e.title,onChange:n=>a(i.map((t=>t.id===e.id?l(s({},t),{title:n.currentTarget.value}):t))),contrast:!0}),d(Gn,{contrast:!0,onClick:()=>a(i.filter((n=>n.id!==e.id)))},"delete ",e.title)))),d("h2",null,"create new"),d("p",null,d(Hn,{value:o,onChange:e=>c(e.currentTarget.value),contrast:!0}),d(Gn,{contrast:!0,onClick:()=>{c(""),a([...i,{id:De(),title:o,channels:[]}])}},"create")),d("h2",null,"channels"),r.map((e=>{var n,t;return d("div",{key:e._id,style:{display:"flex",gap:"12px",alignItems:"center"}},d("div",{style:{flexShrink:0}},d(Et,{target:e,size:24})," ",d("span",null,e.name)),d(pr,{style:{flexGrow:1},value:null!=(t=null==(n=i.find((n=>n.channels.includes(e._id))))?void 0:n.id)?t:"none",onChange:n=>a(i.map((t=>l(s({},t),{channels:[...t.channels.filter((n=>n!==e._id)),...n.currentTarget.value===t.id?[e._id]:[]]}))))},d("option",{value:"none"},"Uncategorised"),i.map((e=>d("option",{key:e.id,value:e.id},e.title)))))})))})),Au=h((({server:e})=>{const[n,t]=U([]),[r,i]=U(void 0),a=kt(),o=null==r?void 0:r.map((e=>a.users.get(e.creator))),s=null==r?void 0:r.map((e=>a.channels.get(e.channel)));return f((()=>{e.fetchInvites().then(i)}),[e,i]),d("div",{className:_u},d("div",{className:yu},d("span",null,d(m,{id:"app.settings.server_pages.invites.code"})),d("span",null,d(m,{id:"app.settings.server_pages.invites.invitor"})),d("span",null,d(m,{id:"app.settings.server_pages.invites.channel"})),d("span",null,d(m,{id:"app.settings.server_pages.invites.revoke"}))),void 0===r&&d(Nt,{type:"ring"}),null==r?void 0:r.map(((e,l)=>{var c;const u=o[l],p=s[l];return d("div",{key:e._id,className:wu,"data-deleting":n.indexOf(e._id)>-1},d("code",null,e._id),d("span",null,d(St,{target:u,size:24})," ",null!=(c=null==u?void 0:u.username)?c:d(m,{id:"app.main.channel.unknown_user"})),d("span",null,p&&u?_t(p,!0):"#??"),d(vt,{onClick:async()=>{t([...n,e._id]),await a.deleteInvite(e._id),i(null==r?void 0:r.filter((n=>n._id!==e._id)))},disabled:n.indexOf(e._id)>-1},d(Re,{size:24})))})))}));
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
var Lu=nn((function(e,n){(function(){var t,r="Expected a function",i="__lodash_hash_undefined__",a="__lodash_placeholder__",o=16,s=32,l=64,c=128,u=256,d=1/0,p=9007199254740991,f=NaN,h=4294967295,v=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",o],["flip",512],["partial",s],["partialRight",l],["rearg",u]],g="[object Arguments]",m="[object Array]",_="[object Boolean]",y="[object Date]",b="[object Error]",w="[object Function]",x="[object GeneratorFunction]",k="[object Map]",C="[object Number]",z="[object Object]",S="[object Promise]",T="[object RegExp]",N="[object Set]",I="[object String]",E="[object Symbol]",O="[object WeakMap]",R="[object ArrayBuffer]",A="[object DataView]",L="[object Float32Array]",M="[object Float64Array]",j="[object Int8Array]",B="[object Int16Array]",D="[object Int32Array]",P="[object Uint8Array]",U="[object Uint8ClampedArray]",$="[object Uint16Array]",F="[object Uint32Array]",H=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,K=RegExp(W.source),Y=RegExp(q.source),J=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ee=/^\w*$/,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,re=RegExp(te.source),ie=/^\s+/,ae=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,se=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ue=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fe=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,_e=/^(?:0|[1-9]\d*)$/,ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,we=/['\n\r\u2028\u2029\\]/g,xe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ke="\\u2700-\\u27bf",Ce="a-z\\xdf-\\xf6\\xf8-\\xff",ze="A-Z\\xc0-\\xd6\\xd8-\\xde",Se="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ne="['’]",Ie="[\\ud800-\\udfff]",Ee="["+Te+"]",Oe="["+xe+"]",Re="\\d+",Ae="[\\u2700-\\u27bf]",Le="["+Ce+"]",Me="[^\\ud800-\\udfff"+Te+Re+ke+Ce+ze+"]",je="\\ud83c[\\udffb-\\udfff]",Be="[^\\ud800-\\udfff]",De="(?:\\ud83c[\\udde6-\\uddff]){2}",Pe="[\\ud800-\\udbff][\\udc00-\\udfff]",Ue="["+ze+"]",$e="(?:"+Le+"|"+Me+")",Fe="(?:"+Ue+"|"+Me+")",He="(?:['’](?:d|ll|m|re|s|t|ve))?",Ge="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ve="(?:"+Oe+"|"+je+")"+"?",We="[\\ufe0e\\ufe0f]?",qe=We+Ve+("(?:\\u200d(?:"+[Be,De,Pe].join("|")+")"+We+Ve+")*"),Ke="(?:"+[Ae,De,Pe].join("|")+")"+qe,Ye="(?:"+[Be+Oe+"?",Oe,De,Pe,Ie].join("|")+")",Je=RegExp(Ne,"g"),Ze=RegExp(Oe,"g"),Qe=RegExp(je+"(?="+je+")|"+Ye+qe,"g"),Xe=RegExp([Ue+"?"+Le+"+"+He+"(?="+[Ee,Ue,"$"].join("|")+")",Fe+"+"+Ge+"(?="+[Ee,Ue+$e,"$"].join("|")+")",Ue+"?"+$e+"+"+He,Ue+"+"+Ge,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re,Ke].join("|"),"g"),en=RegExp("[\\u200d\\ud800-\\udfff"+xe+Se+"]"),nn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],an=-1,on={};on[L]=on[M]=on[j]=on[B]=on[D]=on[P]=on[U]=on[$]=on[F]=!0,on[g]=on[m]=on[R]=on[_]=on[A]=on[y]=on[b]=on[w]=on[k]=on[C]=on[z]=on[T]=on[N]=on[I]=on[O]=!1;var sn={};sn[g]=sn[m]=sn[R]=sn[A]=sn[_]=sn[y]=sn[L]=sn[M]=sn[j]=sn[B]=sn[D]=sn[k]=sn[C]=sn[z]=sn[T]=sn[N]=sn[I]=sn[E]=sn[P]=sn[U]=sn[$]=sn[F]=!0,sn[b]=sn[w]=sn[O]=!1;var ln={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},cn=parseFloat,un=parseInt,dn="object"==typeof tn&&tn&&tn.Object===Object&&tn,pn="object"==typeof self&&self&&self.Object===Object&&self,fn=dn||pn||Function("return this")(),hn=n&&!n.nodeType&&n,vn=hn&&e&&!e.nodeType&&e,gn=vn&&vn.exports===hn,mn=gn&&dn.process,_n=function(){try{var e=vn&&vn.require&&vn.require("util").types;return e||mn&&mn.binding&&mn.binding("util")}catch(qo){}}(),yn=_n&&_n.isArrayBuffer,bn=_n&&_n.isDate,wn=_n&&_n.isMap,xn=_n&&_n.isRegExp,kn=_n&&_n.isSet,Cn=_n&&_n.isTypedArray;function zn(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}function Sn(e,n,t,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];n(r,o,t(o),e)}return r}function Tn(e,n){for(var t=-1,r=null==e?0:e.length;++t<r&&!1!==n(e[t],t,e););return e}function Nn(e,n){for(var t=null==e?0:e.length;t--&&!1!==n(e[t],t,e););return e}function In(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(!n(e[t],t,e))return!1;return!0}function En(e,n){for(var t=-1,r=null==e?0:e.length,i=0,a=[];++t<r;){var o=e[t];n(o,t,e)&&(a[i++]=o)}return a}function On(e,n){return!!(null==e?0:e.length)&&$n(e,n,0)>-1}function Rn(e,n,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(n,e[r]))return!0;return!1}function An(e,n){for(var t=-1,r=null==e?0:e.length,i=Array(r);++t<r;)i[t]=n(e[t],t,e);return i}function Ln(e,n){for(var t=-1,r=n.length,i=e.length;++t<r;)e[i+t]=n[t];return e}function Mn(e,n,t,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(t=e[++i]);++i<a;)t=n(t,e[i],i,e);return t}function jn(e,n,t,r){var i=null==e?0:e.length;for(r&&i&&(t=e[--i]);i--;)t=n(t,e[i],i,e);return t}function Bn(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1}var Dn=Vn("length");function Pn(e,n,t){var r;return t(e,(function(e,t,i){if(n(e,t,i))return r=t,!1})),r}function Un(e,n,t,r){for(var i=e.length,a=t+(r?1:-1);r?a--:++a<i;)if(n(e[a],a,e))return a;return-1}function $n(e,n,t){return n==n?function(e,n,t){var r=t-1,i=e.length;for(;++r<i;)if(e[r]===n)return r;return-1}(e,n,t):Un(e,Hn,t)}function Fn(e,n,t,r){for(var i=t-1,a=e.length;++i<a;)if(r(e[i],n))return i;return-1}function Hn(e){return e!=e}function Gn(e,n){var t=null==e?0:e.length;return t?Kn(e,n)/t:f}function Vn(e){return function(n){return null==n?t:n[e]}}function Wn(e){return function(n){return null==e?t:e[n]}}function qn(e,n,t,r,i){return i(e,(function(e,i,a){t=r?(r=!1,e):n(t,e,i,a)})),t}function Kn(e,n){for(var r,i=-1,a=e.length;++i<a;){var o=n(e[i]);o!==t&&(r=r===t?o:r+o)}return r}function Yn(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}function Jn(e){return e?e.slice(0,ft(e)+1).replace(ie,""):e}function Zn(e){return function(n){return e(n)}}function Qn(e,n){return An(n,(function(n){return e[n]}))}function Xn(e,n){return e.has(n)}function et(e,n){for(var t=-1,r=e.length;++t<r&&$n(n,e[t],0)>-1;);return t}function nt(e,n){for(var t=e.length;t--&&$n(n,e[t],0)>-1;);return t}function tt(e,n){for(var t=e.length,r=0;t--;)e[t]===n&&++r;return r}var rt=Wn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),it=Wn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function at(e){return"\\"+ln[e]}function ot(e){return en.test(e)}function st(e){var n=-1,t=Array(e.size);return e.forEach((function(e,r){t[++n]=[r,e]})),t}function lt(e,n){return function(t){return e(n(t))}}function ct(e,n){for(var t=-1,r=e.length,i=0,o=[];++t<r;){var s=e[t];s!==n&&s!==a||(e[t]=a,o[i++]=t)}return o}function ut(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=e})),t}function dt(e){return ot(e)?function(e){var n=Qe.lastIndex=0;for(;Qe.test(e);)++n;return n}(e):Dn(e)}function pt(e){return ot(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}function ft(e){for(var n=e.length;n--&&ae.test(e.charAt(n)););return n}var ht=Wn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vt=function e(n){var ae,xe=(n=null==n?fn:vt.defaults(fn.Object(),n,vt.pick(fn,rn))).Array,ke=n.Date,Ce=n.Error,ze=n.Function,Se=n.Math,Te=n.Object,Ne=n.RegExp,Ie=n.String,Ee=n.TypeError,Oe=xe.prototype,Re=ze.prototype,Ae=Te.prototype,Le=n["__core-js_shared__"],Me=Re.toString,je=Ae.hasOwnProperty,Be=0,De=(ae=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||""))?"Symbol(src)_1."+ae:"",Pe=Ae.toString,Ue=Me.call(Te),$e=fn._,Fe=Ne("^"+Me.call(je).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=gn?n.Buffer:t,Ge=n.Symbol,Ve=n.Uint8Array,We=He?He.allocUnsafe:t,qe=lt(Te.getPrototypeOf,Te),Ke=Te.create,Ye=Ae.propertyIsEnumerable,Qe=Oe.splice,en=Ge?Ge.isConcatSpreadable:t,tn=Ge?Ge.iterator:t,ln=Ge?Ge.toStringTag:t,dn=function(){try{var e=pa(Te,"defineProperty");return e({},"",{}),e}catch(qo){}}(),pn=n.clearTimeout!==fn.clearTimeout&&n.clearTimeout,hn=ke&&ke.now!==fn.Date.now&&ke.now,vn=n.setTimeout!==fn.setTimeout&&n.setTimeout,mn=Se.ceil,_n=Se.floor,Dn=Te.getOwnPropertySymbols,Wn=He?He.isBuffer:t,gt=n.isFinite,mt=Oe.join,_t=lt(Te.keys,Te),yt=Se.max,bt=Se.min,wt=ke.now,xt=n.parseInt,kt=Se.random,Ct=Oe.reverse,zt=pa(n,"DataView"),St=pa(n,"Map"),Tt=pa(n,"Promise"),Nt=pa(n,"Set"),It=pa(n,"WeakMap"),Et=pa(Te,"create"),Ot=It&&new It,Rt={},At=Fa(zt),Lt=Fa(St),Mt=Fa(Tt),jt=Fa(Nt),Bt=Fa(It),Dt=Ge?Ge.prototype:t,Pt=Dt?Dt.valueOf:t,Ut=Dt?Dt.toString:t;function $t(e){if(ss(e)&&!Jo(e)&&!(e instanceof Vt)){if(e instanceof Gt)return e;if(je.call(e,"__wrapped__"))return Ha(e)}return new Gt(e)}var Ft=function(){function e(){}return function(n){if(!os(n))return{};if(Ke)return Ke(n);e.prototype=n;var r=new e;return e.prototype=t,r}}();function Ht(){}function Gt(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}function Vt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=h,this.__views__=[]}function Wt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function qt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Kt(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}function Yt(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new Kt;++n<t;)this.add(e[n])}function Jt(e){var n=this.__data__=new qt(e);this.size=n.size}function Zt(e,n){var t=Jo(e),r=!t&&Yo(e),i=!t&&!r&&es(e),a=!t&&!r&&!i&&vs(e),o=t||r||i||a,s=o?Yn(e.length,Ie):[],l=s.length;for(var c in e)!n&&!je.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ya(c,l))||s.push(c);return s}function Qt(e){var n=e.length;return n?e[Yr(0,n-1)]:t}function Xt(e,n){return ja(Ei(e),lr(n,0,e.length))}function er(e){return ja(Ei(e))}function nr(e,n,r){(r!==t&&!Vo(e[n],r)||r===t&&!(n in e))&&or(e,n,r)}function tr(e,n,r){var i=e[n];je.call(e,n)&&Vo(i,r)&&(r!==t||n in e)||or(e,n,r)}function rr(e,n){for(var t=e.length;t--;)if(Vo(e[t][0],n))return t;return-1}function ir(e,n,t,r){return fr(e,(function(e,i,a){n(r,e,t(e),a)})),r}function ar(e,n){return e&&Oi(n,Bs(n),e)}function or(e,n,t){"__proto__"==n&&dn?dn(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t}function sr(e,n){for(var r=-1,i=n.length,a=xe(i),o=null==e;++r<i;)a[r]=o?t:Rs(e,n[r]);return a}function lr(e,n,r){return e==e&&(r!==t&&(e=e<=r?e:r),n!==t&&(e=e>=n?e:n)),e}function cr(e,n,r,i,a,o){var s,l=1&n,c=2&n,u=4&n;if(r&&(s=a?r(e,i,a,o):r(e)),s!==t)return s;if(!os(e))return e;var d=Jo(e);if(d){if(s=function(e){var n=e.length,t=new e.constructor(n);n&&"string"==typeof e[0]&&je.call(e,"index")&&(t.index=e.index,t.input=e.input);return t}(e),!l)return Ei(e,s)}else{var p=va(e),f=p==w||p==x;if(es(e))return Ci(e,l);if(p==z||p==g||f&&!a){if(s=c||f?{}:ma(e),!l)return c?function(e,n){return Oi(e,ha(e),n)}(e,function(e,n){return e&&Oi(n,Ds(n),e)}(s,e)):function(e,n){return Oi(e,fa(e),n)}(e,ar(s,e))}else{if(!sn[p])return a?e:{};s=function(e,n,t){var r=e.constructor;switch(n){case R:return zi(e);case _:case y:return new r(+e);case A:return function(e,n){var t=n?zi(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,t);case L:case M:case j:case B:case D:case P:case U:case $:case F:return Si(e,t);case k:return new r;case C:case I:return new r(e);case T:return function(e){var n=new e.constructor(e.source,fe.exec(e));return n.lastIndex=e.lastIndex,n}(e);case N:return new r;case E:return i=e,Pt?Te(Pt.call(i)):{}}var i}(e,p,l)}}o||(o=new Jt);var h=o.get(e);if(h)return h;o.set(e,s),ps(e)?e.forEach((function(t){s.add(cr(t,n,r,t,e,o))})):ls(e)&&e.forEach((function(t,i){s.set(i,cr(t,n,r,i,e,o))}));var v=d?t:(u?c?aa:ia:c?Ds:Bs)(e);return Tn(v||e,(function(t,i){v&&(t=e[i=t]),tr(s,i,cr(t,n,r,i,e,o))})),s}function ur(e,n,r){var i=r.length;if(null==e)return!i;for(e=Te(e);i--;){var a=r[i],o=n[a],s=e[a];if(s===t&&!(a in e)||!o(s))return!1}return!0}function dr(e,n,i){if("function"!=typeof e)throw new Ee(r);return Ra((function(){e.apply(t,i)}),n)}function pr(e,n,t,r){var i=-1,a=On,o=!0,s=e.length,l=[],c=n.length;if(!s)return l;t&&(n=An(n,Zn(t))),r?(a=Rn,o=!1):n.length>=200&&(a=Xn,o=!1,n=new Yt(n));e:for(;++i<s;){var u=e[i],d=null==t?u:t(u);if(u=r||0!==u?u:0,o&&d==d){for(var p=c;p--;)if(n[p]===d)continue e;l.push(u)}else a(n,d,r)||l.push(u)}return l}$t.templateSettings={escape:J,evaluate:Z,interpolate:Q,variable:"",imports:{_:$t}},$t.prototype=Ht.prototype,$t.prototype.constructor=$t,Gt.prototype=Ft(Ht.prototype),Gt.prototype.constructor=Gt,Vt.prototype=Ft(Ht.prototype),Vt.prototype.constructor=Vt,Wt.prototype.clear=function(){this.__data__=Et?Et(null):{},this.size=0},Wt.prototype.delete=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},Wt.prototype.get=function(e){var n=this.__data__;if(Et){var r=n[e];return r===i?t:r}return je.call(n,e)?n[e]:t},Wt.prototype.has=function(e){var n=this.__data__;return Et?n[e]!==t:je.call(n,e)},Wt.prototype.set=function(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Et&&n===t?i:n,this},qt.prototype.clear=function(){this.__data__=[],this.size=0},qt.prototype.delete=function(e){var n=this.__data__,t=rr(n,e);return!(t<0)&&(t==n.length-1?n.pop():Qe.call(n,t,1),--this.size,!0)},qt.prototype.get=function(e){var n=this.__data__,r=rr(n,e);return r<0?t:n[r][1]},qt.prototype.has=function(e){return rr(this.__data__,e)>-1},qt.prototype.set=function(e,n){var t=this.__data__,r=rr(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this},Kt.prototype.clear=function(){this.size=0,this.__data__={hash:new Wt,map:new(St||qt),string:new Wt}},Kt.prototype.delete=function(e){var n=ua(this,e).delete(e);return this.size-=n?1:0,n},Kt.prototype.get=function(e){return ua(this,e).get(e)},Kt.prototype.has=function(e){return ua(this,e).has(e)},Kt.prototype.set=function(e,n){var t=ua(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this},Yt.prototype.add=Yt.prototype.push=function(e){return this.__data__.set(e,i),this},Yt.prototype.has=function(e){return this.__data__.has(e)},Jt.prototype.clear=function(){this.__data__=new qt,this.size=0},Jt.prototype.delete=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t},Jt.prototype.get=function(e){return this.__data__.get(e)},Jt.prototype.has=function(e){return this.__data__.has(e)},Jt.prototype.set=function(e,n){var t=this.__data__;if(t instanceof qt){var r=t.__data__;if(!St||r.length<199)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new Kt(r)}return t.set(e,n),this.size=t.size,this};var fr=Li(wr),hr=Li(xr,!0);function vr(e,n){var t=!0;return fr(e,(function(e,r,i){return t=!!n(e,r,i)})),t}function gr(e,n,r){for(var i=-1,a=e.length;++i<a;){var o=e[i],s=n(o);if(null!=s&&(l===t?s==s&&!hs(s):r(s,l)))var l=s,c=o}return c}function mr(e,n){var t=[];return fr(e,(function(e,r,i){n(e,r,i)&&t.push(e)})),t}function _r(e,n,t,r,i){var a=-1,o=e.length;for(t||(t=_a),i||(i=[]);++a<o;){var s=e[a];n>0&&t(s)?n>1?_r(s,n-1,t,r,i):Ln(i,s):r||(i[i.length]=s)}return i}var yr=Mi(),br=Mi(!0);function wr(e,n){return e&&yr(e,n,Bs)}function xr(e,n){return e&&br(e,n,Bs)}function kr(e,n){return En(n,(function(n){return rs(e[n])}))}function Cr(e,n){for(var r=0,i=(n=bi(n,e)).length;null!=e&&r<i;)e=e[$a(n[r++])];return r&&r==i?e:t}function zr(e,n,t){var r=n(e);return Jo(e)?r:Ln(r,t(e))}function Sr(e){return null==e?e===t?"[object Undefined]":"[object Null]":ln&&ln in Te(e)?function(e){var n=je.call(e,ln),r=e[ln];try{e[ln]=t;var i=!0}catch(qo){}var a=Pe.call(e);i&&(n?e[ln]=r:delete e[ln]);return a}(e):function(e){return Pe.call(e)}(e)}function Tr(e,n){return e>n}function Nr(e,n){return null!=e&&je.call(e,n)}function Ir(e,n){return null!=e&&n in Te(e)}function Er(e,n,r){for(var i=r?Rn:On,a=e[0].length,o=e.length,s=o,l=xe(o),c=1/0,u=[];s--;){var d=e[s];s&&n&&(d=An(d,Zn(n))),c=bt(d.length,c),l[s]=!r&&(n||a>=120&&d.length>=120)?new Yt(s&&d):t}d=e[0];var p=-1,f=l[0];e:for(;++p<a&&u.length<c;){var h=d[p],v=n?n(h):h;if(h=r||0!==h?h:0,!(f?Xn(f,v):i(u,v,r))){for(s=o;--s;){var g=l[s];if(!(g?Xn(g,v):i(e[s],v,r)))continue e}f&&f.push(v),u.push(h)}}return u}function Or(e,n,r){var i=null==(e=Na(e,n=bi(n,e)))?e:e[$a(eo(n))];return null==i?t:zn(i,e,r)}function Rr(e){return ss(e)&&Sr(e)==g}function Ar(e,n,r,i,a){return e===n||(null==e||null==n||!ss(e)&&!ss(n)?e!=e&&n!=n:function(e,n,r,i,a,o){var s=Jo(e),l=Jo(n),c=s?m:va(e),u=l?m:va(n),d=(c=c==g?z:c)==z,p=(u=u==g?z:u)==z,f=c==u;if(f&&es(e)){if(!es(n))return!1;s=!0,d=!1}if(f&&!d)return o||(o=new Jt),s||vs(e)?ta(e,n,r,i,a,o):function(e,n,t,r,i,a,o){switch(t){case A:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case R:return!(e.byteLength!=n.byteLength||!a(new Ve(e),new Ve(n)));case _:case y:case C:return Vo(+e,+n);case b:return e.name==n.name&&e.message==n.message;case T:case I:return e==n+"";case k:var s=st;case N:var l=1&r;if(s||(s=ut),e.size!=n.size&&!l)return!1;var c=o.get(e);if(c)return c==n;r|=2,o.set(e,n);var u=ta(s(e),s(n),r,i,a,o);return o.delete(e),u;case E:if(Pt)return Pt.call(e)==Pt.call(n)}return!1}(e,n,c,r,i,a,o);if(!(1&r)){var h=d&&je.call(e,"__wrapped__"),v=p&&je.call(n,"__wrapped__");if(h||v){var w=h?e.value():e,x=v?n.value():n;return o||(o=new Jt),a(w,x,r,i,o)}}if(!f)return!1;return o||(o=new Jt),function(e,n,r,i,a,o){var s=1&r,l=ia(e),c=l.length,u=ia(n).length;if(c!=u&&!s)return!1;var d=c;for(;d--;){var p=l[d];if(!(s?p in n:je.call(n,p)))return!1}var f=o.get(e),h=o.get(n);if(f&&h)return f==n&&h==e;var v=!0;o.set(e,n),o.set(n,e);var g=s;for(;++d<c;){var m=e[p=l[d]],_=n[p];if(i)var y=s?i(_,m,p,n,e,o):i(m,_,p,e,n,o);if(!(y===t?m===_||a(m,_,r,i,o):y)){v=!1;break}g||(g="constructor"==p)}if(v&&!g){var b=e.constructor,w=n.constructor;b==w||!("constructor"in e)||!("constructor"in n)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(v=!1)}return o.delete(e),o.delete(n),v}(e,n,r,i,a,o)}(e,n,r,i,Ar,a))}function Lr(e,n,r,i){var a=r.length,o=a,s=!i;if(null==e)return!o;for(e=Te(e);a--;){var l=r[a];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<o;){var c=(l=r[a])[0],u=e[c],d=l[1];if(s&&l[2]){if(u===t&&!(c in e))return!1}else{var p=new Jt;if(i)var f=i(u,d,c,e,n,p);if(!(f===t?Ar(d,u,3,i,p):f))return!1}}return!0}function Mr(e){return!(!os(e)||(n=e,De&&De in n))&&(rs(e)?Fe:ge).test(Fa(e));var n}function jr(e){return"function"==typeof e?e:null==e?cl:"object"==typeof e?Jo(e)?Fr(e[0],e[1]):$r(e):_l(e)}function Br(e){if(!Ca(e))return _t(e);var n=[];for(var t in Te(e))je.call(e,t)&&"constructor"!=t&&n.push(t);return n}function Dr(e){if(!os(e))return function(e){var n=[];if(null!=e)for(var t in Te(e))n.push(t);return n}(e);var n=Ca(e),t=[];for(var r in e)("constructor"!=r||!n&&je.call(e,r))&&t.push(r);return t}function Pr(e,n){return e<n}function Ur(e,n){var t=-1,r=Qo(e)?xe(e.length):[];return fr(e,(function(e,i,a){r[++t]=n(e,i,a)})),r}function $r(e){var n=da(e);return 1==n.length&&n[0][2]?Sa(n[0][0],n[0][1]):function(t){return t===e||Lr(t,e,n)}}function Fr(e,n){return wa(e)&&za(n)?Sa($a(e),n):function(r){var i=Rs(r,e);return i===t&&i===n?As(r,e):Ar(n,i,3)}}function Hr(e,n,r,i,a){e!==n&&yr(n,(function(o,s){if(a||(a=new Jt),os(o))!function(e,n,r,i,a,o,s){var l=Ea(e,r),c=Ea(n,r),u=s.get(c);if(u)return void nr(e,r,u);var d=o?o(l,c,r+"",e,n,s):t,p=d===t;if(p){var f=Jo(c),h=!f&&es(c),v=!f&&!h&&vs(c);d=c,f||h||v?Jo(l)?d=l:Xo(l)?d=Ei(l):h?(p=!1,d=Ci(c,!0)):v?(p=!1,d=Si(c,!0)):d=[]:us(c)||Yo(c)?(d=l,Yo(l)?d=ks(l):os(l)&&!rs(l)||(d=ma(c))):p=!1}p&&(s.set(c,d),a(d,c,i,o,s),s.delete(c));nr(e,r,d)}(e,n,s,r,Hr,i,a);else{var l=i?i(Ea(e,s),o,s+"",e,n,a):t;l===t&&(l=o),nr(e,s,l)}}),Ds)}function Gr(e,n){var r=e.length;if(r)return ya(n+=n<0?r:0,r)?e[n]:t}function Vr(e,n,t){n=n.length?An(n,(function(e){return Jo(e)?function(n){return Cr(n,1===e.length?e[0]:e)}:e})):[cl];var r=-1;return n=An(n,Zn(ca())),function(e,n){var t=e.length;for(e.sort(n);t--;)e[t]=e[t].value;return e}(Ur(e,(function(e,t,i){return{criteria:An(n,(function(n){return n(e)})),index:++r,value:e}})),(function(e,n){return function(e,n,t){var r=-1,i=e.criteria,a=n.criteria,o=i.length,s=t.length;for(;++r<o;){var l=Ti(i[r],a[r]);if(l)return r>=s?l:l*("desc"==t[r]?-1:1)}return e.index-n.index}(e,n,t)}))}function Wr(e,n,t){for(var r=-1,i=n.length,a={};++r<i;){var o=n[r],s=Cr(e,o);t(s,o)&&ei(a,bi(o,e),s)}return a}function qr(e,n,t,r){var i=r?Fn:$n,a=-1,o=n.length,s=e;for(e===n&&(n=Ei(n)),t&&(s=An(e,Zn(t)));++a<o;)for(var l=0,c=n[a],u=t?t(c):c;(l=i(s,u,l,r))>-1;)s!==e&&Qe.call(s,l,1),Qe.call(e,l,1);return e}function Kr(e,n){for(var t=e?n.length:0,r=t-1;t--;){var i=n[t];if(t==r||i!==a){var a=i;ya(i)?Qe.call(e,i,1):pi(e,i)}}return e}function Yr(e,n){return e+_n(kt()*(n-e+1))}function Jr(e,n){var t="";if(!e||n<1||n>p)return t;do{n%2&&(t+=e),(n=_n(n/2))&&(e+=e)}while(n);return t}function Zr(e,n){return Aa(Ta(e,n,cl),e+"")}function Qr(e){return Qt(Ws(e))}function Xr(e,n){var t=Ws(e);return ja(t,lr(n,0,t.length))}function ei(e,n,r,i){if(!os(e))return e;for(var a=-1,o=(n=bi(n,e)).length,s=o-1,l=e;null!=l&&++a<o;){var c=$a(n[a]),u=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var d=l[c];(u=i?i(d,c,l):t)===t&&(u=os(d)?d:ya(n[a+1])?[]:{})}tr(l,c,u),l=l[c]}return e}var ni=Ot?function(e,n){return Ot.set(e,n),e}:cl,ti=dn?function(e,n){return dn(e,"toString",{configurable:!0,enumerable:!1,value:ol(n),writable:!0})}:cl;function ri(e){return ja(Ws(e))}function ii(e,n,t){var r=-1,i=e.length;n<0&&(n=-n>i?0:i+n),(t=t>i?i:t)<0&&(t+=i),i=n>t?0:t-n>>>0,n>>>=0;for(var a=xe(i);++r<i;)a[r]=e[r+n];return a}function ai(e,n){var t;return fr(e,(function(e,r,i){return!(t=n(e,r,i))})),!!t}function oi(e,n,t){var r=0,i=null==e?r:e.length;if("number"==typeof n&&n==n&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!hs(o)&&(t?o<=n:o<n)?r=a+1:i=a}return i}return si(e,n,cl,t)}function si(e,n,r,i){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(n=r(n))!=n,l=null===n,c=hs(n),u=n===t;a<o;){var d=_n((a+o)/2),p=r(e[d]),f=p!==t,h=null===p,v=p==p,g=hs(p);if(s)var m=i||v;else m=u?v&&(i||f):l?v&&f&&(i||!h):c?v&&f&&!h&&(i||!g):!h&&!g&&(i?p<=n:p<n);m?a=d+1:o=d}return bt(o,4294967294)}function li(e,n){for(var t=-1,r=e.length,i=0,a=[];++t<r;){var o=e[t],s=n?n(o):o;if(!t||!Vo(s,l)){var l=s;a[i++]=0===o?0:o}}return a}function ci(e){return"number"==typeof e?e:hs(e)?f:+e}function ui(e){if("string"==typeof e)return e;if(Jo(e))return An(e,ui)+"";if(hs(e))return Ut?Ut.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function di(e,n,t){var r=-1,i=On,a=e.length,o=!0,s=[],l=s;if(t)o=!1,i=Rn;else if(a>=200){var c=n?null:Ji(e);if(c)return ut(c);o=!1,i=Xn,l=new Yt}else l=n?[]:s;e:for(;++r<a;){var u=e[r],d=n?n(u):u;if(u=t||0!==u?u:0,o&&d==d){for(var p=l.length;p--;)if(l[p]===d)continue e;n&&l.push(d),s.push(u)}else i(l,d,t)||(l!==s&&l.push(d),s.push(u))}return s}function pi(e,n){return null==(e=Na(e,n=bi(n,e)))||delete e[$a(eo(n))]}function fi(e,n,t,r){return ei(e,n,t(Cr(e,n)),r)}function hi(e,n,t,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&n(e[a],a,e););return t?ii(e,r?0:a,r?a+1:i):ii(e,r?a+1:0,r?i:a)}function vi(e,n){var t=e;return t instanceof Vt&&(t=t.value()),Mn(n,(function(e,n){return n.func.apply(n.thisArg,Ln([e],n.args))}),t)}function gi(e,n,t){var r=e.length;if(r<2)return r?di(e[0]):[];for(var i=-1,a=xe(r);++i<r;)for(var o=e[i],s=-1;++s<r;)s!=i&&(a[i]=pr(a[i]||o,e[s],n,t));return di(_r(a,1),n,t)}function mi(e,n,r){for(var i=-1,a=e.length,o=n.length,s={};++i<a;){var l=i<o?n[i]:t;r(s,e[i],l)}return s}function _i(e){return Xo(e)?e:[]}function yi(e){return"function"==typeof e?e:cl}function bi(e,n){return Jo(e)?e:wa(e,n)?[e]:Ua(Cs(e))}var wi=Zr;function xi(e,n,r){var i=e.length;return r=r===t?i:r,!n&&r>=i?e:ii(e,n,r)}var ki=pn||function(e){return fn.clearTimeout(e)};function Ci(e,n){if(n)return e.slice();var t=e.length,r=We?We(t):new e.constructor(t);return e.copy(r),r}function zi(e){var n=new e.constructor(e.byteLength);return new Ve(n).set(new Ve(e)),n}function Si(e,n){var t=n?zi(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}function Ti(e,n){if(e!==n){var r=e!==t,i=null===e,a=e==e,o=hs(e),s=n!==t,l=null===n,c=n==n,u=hs(n);if(!l&&!u&&!o&&e>n||o&&s&&c&&!l&&!u||i&&s&&c||!r&&c||!a)return 1;if(!i&&!o&&!u&&e<n||u&&r&&a&&!i&&!o||l&&r&&a||!s&&a||!c)return-1}return 0}function Ni(e,n,t,r){for(var i=-1,a=e.length,o=t.length,s=-1,l=n.length,c=yt(a-o,0),u=xe(l+c),d=!r;++s<l;)u[s]=n[s];for(;++i<o;)(d||i<a)&&(u[t[i]]=e[i]);for(;c--;)u[s++]=e[i++];return u}function Ii(e,n,t,r){for(var i=-1,a=e.length,o=-1,s=t.length,l=-1,c=n.length,u=yt(a-s,0),d=xe(u+c),p=!r;++i<u;)d[i]=e[i];for(var f=i;++l<c;)d[f+l]=n[l];for(;++o<s;)(p||i<a)&&(d[f+t[o]]=e[i++]);return d}function Ei(e,n){var t=-1,r=e.length;for(n||(n=xe(r));++t<r;)n[t]=e[t];return n}function Oi(e,n,r,i){var a=!r;r||(r={});for(var o=-1,s=n.length;++o<s;){var l=n[o],c=i?i(r[l],e[l],l,r,e):t;c===t&&(c=e[l]),a?or(r,l,c):tr(r,l,c)}return r}function Ri(e,n){return function(t,r){var i=Jo(t)?Sn:ir,a=n?n():{};return i(t,e,ca(r,2),a)}}function Ai(e){return Zr((function(n,r){var i=-1,a=r.length,o=a>1?r[a-1]:t,s=a>2?r[2]:t;for(o=e.length>3&&"function"==typeof o?(a--,o):t,s&&ba(r[0],r[1],s)&&(o=a<3?t:o,a=1),n=Te(n);++i<a;){var l=r[i];l&&e(n,l,i,o)}return n}))}function Li(e,n){return function(t,r){if(null==t)return t;if(!Qo(t))return e(t,r);for(var i=t.length,a=n?i:-1,o=Te(t);(n?a--:++a<i)&&!1!==r(o[a],a,o););return t}}function Mi(e){return function(n,t,r){for(var i=-1,a=Te(n),o=r(n),s=o.length;s--;){var l=o[e?s:++i];if(!1===t(a[l],l,a))break}return n}}function ji(e){return function(n){var r=ot(n=Cs(n))?pt(n):t,i=r?r[0]:n.charAt(0),a=r?xi(r,1).join(""):n.slice(1);return i[e]()+a}}function Bi(e){return function(n){return Mn(rl(Ys(n).replace(Je,"")),e,"")}}function Di(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var t=Ft(e.prototype),r=e.apply(t,n);return os(r)?r:t}}function Pi(e){return function(n,r,i){var a=Te(n);if(!Qo(n)){var o=ca(r,3);n=Bs(n),r=function(e){return o(a[e],e,a)}}var s=e(n,r,i);return s>-1?a[o?n[s]:s]:t}}function Ui(e){return ra((function(n){var i=n.length,a=i,o=Gt.prototype.thru;for(e&&n.reverse();a--;){var s=n[a];if("function"!=typeof s)throw new Ee(r);if(o&&!l&&"wrapper"==sa(s))var l=new Gt([],!0)}for(a=l?a:i;++a<i;){var c=sa(s=n[a]),u="wrapper"==c?oa(s):t;l=u&&xa(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[sa(u[0])].apply(l,u[3]):1==s.length&&xa(s)?l[c]():l.thru(s)}return function(){var e=arguments,t=e[0];if(l&&1==e.length&&Jo(t))return l.plant(t).value();for(var r=0,a=i?n[r].apply(this,e):t;++r<i;)a=n[r].call(this,a);return a}}))}function $i(e,n,r,i,a,o,s,l,u,d){var p=n&c,f=1&n,h=2&n,v=24&n,g=512&n,m=h?t:Di(e);return function t(){for(var c=arguments.length,_=xe(c),y=c;y--;)_[y]=arguments[y];if(v)var b=la(t),w=tt(_,b);if(i&&(_=Ni(_,i,a,v)),o&&(_=Ii(_,o,s,v)),c-=w,v&&c<d){var x=ct(_,b);return Ki(e,n,$i,t.placeholder,r,_,x,l,u,d-c)}var k=f?r:this,C=h?k[e]:e;return c=_.length,l?_=Ia(_,l):g&&c>1&&_.reverse(),p&&u<c&&(_.length=u),this&&this!==fn&&this instanceof t&&(C=m||Di(C)),C.apply(k,_)}}function Fi(e,n){return function(t,r){return function(e,n,t,r){return wr(e,(function(e,i,a){n(r,t(e),i,a)})),r}(t,e,n(r),{})}}function Hi(e,n){return function(r,i){var a;if(r===t&&i===t)return n;if(r!==t&&(a=r),i!==t){if(a===t)return i;"string"==typeof r||"string"==typeof i?(r=ui(r),i=ui(i)):(r=ci(r),i=ci(i)),a=e(r,i)}return a}}function Gi(e){return ra((function(n){return n=An(n,Zn(ca())),Zr((function(t){var r=this;return e(n,(function(e){return zn(e,r,t)}))}))}))}function Vi(e,n){var r=(n=n===t?" ":ui(n)).length;if(r<2)return r?Jr(n,e):n;var i=Jr(n,mn(e/dt(n)));return ot(n)?xi(pt(i),0,e).join(""):i.slice(0,e)}function Wi(e){return function(n,r,i){return i&&"number"!=typeof i&&ba(n,r,i)&&(r=i=t),n=ys(n),r===t?(r=n,n=0):r=ys(r),function(e,n,t,r){for(var i=-1,a=yt(mn((n-e)/(t||1)),0),o=xe(a);a--;)o[r?a:++i]=e,e+=t;return o}(n,r,i=i===t?n<r?1:-1:ys(i),e)}}function qi(e){return function(n,t){return"string"==typeof n&&"string"==typeof t||(n=xs(n),t=xs(t)),e(n,t)}}function Ki(e,n,r,i,a,o,c,u,d,p){var f=8&n;n|=f?s:l,4&(n&=~(f?l:s))||(n&=-4);var h=[e,n,a,f?o:t,f?c:t,f?t:o,f?t:c,u,d,p],v=r.apply(t,h);return xa(e)&&Oa(v,h),v.placeholder=i,La(v,e,n)}function Yi(e){var n=Se[e];return function(e,t){if(e=xs(e),(t=null==t?0:bt(bs(t),292))&&gt(e)){var r=(Cs(e)+"e").split("e");return+((r=(Cs(n(r[0]+"e"+(+r[1]+t)))+"e").split("e"))[0]+"e"+(+r[1]-t))}return n(e)}}var Ji=Nt&&1/ut(new Nt([,-0]))[1]==d?function(e){return new Nt(e)}:hl;function Zi(e){return function(n){var t=va(n);return t==k?st(n):t==N?function(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=[e,e]})),t}(n):function(e,n){return An(n,(function(n){return[n,e[n]]}))}(n,e(n))}}function Qi(e,n,i,d,p,f,h,v){var g=2&n;if(!g&&"function"!=typeof e)throw new Ee(r);var m=d?d.length:0;if(m||(n&=-97,d=p=t),h=h===t?h:yt(bs(h),0),v=v===t?v:bs(v),m-=p?p.length:0,n&l){var _=d,y=p;d=p=t}var b=g?t:oa(e),w=[e,n,i,d,p,_,y,f,h,v];if(b&&function(e,n){var t=e[1],r=n[1],i=t|r,o=i<131,s=r==c&&8==t||r==c&&t==u&&e[7].length<=n[8]||384==r&&n[7].length<=n[8]&&8==t;if(!o&&!s)return e;1&r&&(e[2]=n[2],i|=1&t?0:4);var l=n[3];if(l){var d=e[3];e[3]=d?Ni(d,l,n[4]):l,e[4]=d?ct(e[3],a):n[4]}(l=n[5])&&(d=e[5],e[5]=d?Ii(d,l,n[6]):l,e[6]=d?ct(e[5],a):n[6]);(l=n[7])&&(e[7]=l);r&c&&(e[8]=null==e[8]?n[8]:bt(e[8],n[8]));null==e[9]&&(e[9]=n[9]);e[0]=n[0],e[1]=i}(w,b),e=w[0],n=w[1],i=w[2],d=w[3],p=w[4],!(v=w[9]=w[9]===t?g?0:e.length:yt(w[9]-m,0))&&24&n&&(n&=-25),n&&1!=n)x=8==n||n==o?function(e,n,r){var i=Di(e);return function a(){for(var o=arguments.length,s=xe(o),l=o,c=la(a);l--;)s[l]=arguments[l];var u=o<3&&s[0]!==c&&s[o-1]!==c?[]:ct(s,c);return(o-=u.length)<r?Ki(e,n,$i,a.placeholder,t,s,u,t,t,r-o):zn(this&&this!==fn&&this instanceof a?i:e,this,s)}}(e,n,v):n!=s&&33!=n||p.length?$i.apply(t,w):function(e,n,t,r){var i=1&n,a=Di(e);return function n(){for(var o=-1,s=arguments.length,l=-1,c=r.length,u=xe(c+s),d=this&&this!==fn&&this instanceof n?a:e;++l<c;)u[l]=r[l];for(;s--;)u[l++]=arguments[++o];return zn(d,i?t:this,u)}}(e,n,i,d);else var x=function(e,n,t){var r=1&n,i=Di(e);return function n(){return(this&&this!==fn&&this instanceof n?i:e).apply(r?t:this,arguments)}}(e,n,i);return La((b?ni:Oa)(x,w),e,n)}function Xi(e,n,r,i){return e===t||Vo(e,Ae[r])&&!je.call(i,r)?n:e}function ea(e,n,r,i,a,o){return os(e)&&os(n)&&(o.set(n,e),Hr(e,n,t,ea,o),o.delete(n)),e}function na(e){return us(e)?t:e}function ta(e,n,r,i,a,o){var s=1&r,l=e.length,c=n.length;if(l!=c&&!(s&&c>l))return!1;var u=o.get(e),d=o.get(n);if(u&&d)return u==n&&d==e;var p=-1,f=!0,h=2&r?new Yt:t;for(o.set(e,n),o.set(n,e);++p<l;){var v=e[p],g=n[p];if(i)var m=s?i(g,v,p,n,e,o):i(v,g,p,e,n,o);if(m!==t){if(m)continue;f=!1;break}if(h){if(!Bn(n,(function(e,n){if(!Xn(h,n)&&(v===e||a(v,e,r,i,o)))return h.push(n)}))){f=!1;break}}else if(v!==g&&!a(v,g,r,i,o)){f=!1;break}}return o.delete(e),o.delete(n),f}function ra(e){return Aa(Ta(e,t,Ya),e+"")}function ia(e){return zr(e,Bs,fa)}function aa(e){return zr(e,Ds,ha)}var oa=Ot?function(e){return Ot.get(e)}:hl;function sa(e){for(var n=e.name+"",t=Rt[n],r=je.call(Rt,n)?t.length:0;r--;){var i=t[r],a=i.func;if(null==a||a==e)return i.name}return n}function la(e){return(je.call($t,"placeholder")?$t:e).placeholder}function ca(){var e=$t.iteratee||ul;return e=e===ul?jr:e,arguments.length?e(arguments[0],arguments[1]):e}function ua(e,n){var t,r,i=e.__data__;return("string"==(r=typeof(t=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?i["string"==typeof n?"string":"hash"]:i.map}function da(e){for(var n=Bs(e),t=n.length;t--;){var r=n[t],i=e[r];n[t]=[r,i,za(i)]}return n}function pa(e,n){var r=function(e,n){return null==e?t:e[n]}(e,n);return Mr(r)?r:t}var fa=Dn?function(e){return null==e?[]:(e=Te(e),En(Dn(e),(function(n){return Ye.call(e,n)})))}:wl,ha=Dn?function(e){for(var n=[];e;)Ln(n,fa(e)),e=qe(e);return n}:wl,va=Sr;function ga(e,n,t){for(var r=-1,i=(n=bi(n,e)).length,a=!1;++r<i;){var o=$a(n[r]);if(!(a=null!=e&&t(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&as(i)&&ya(o,i)&&(Jo(e)||Yo(e))}function ma(e){return"function"!=typeof e.constructor||Ca(e)?{}:Ft(qe(e))}function _a(e){return Jo(e)||Yo(e)||!!(en&&e&&e[en])}function ya(e,n){var t=typeof e;return!!(n=null==n?p:n)&&("number"==t||"symbol"!=t&&_e.test(e))&&e>-1&&e%1==0&&e<n}function ba(e,n,t){if(!os(t))return!1;var r=typeof n;return!!("number"==r?Qo(t)&&ya(n,t.length):"string"==r&&n in t)&&Vo(t[n],e)}function wa(e,n){if(Jo(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!hs(e))||(ee.test(e)||!X.test(e)||null!=n&&e in Te(n))}function xa(e){var n=sa(e),t=$t[n];if("function"!=typeof t||!(n in Vt.prototype))return!1;if(e===t)return!0;var r=oa(t);return!!r&&e===r[0]}(zt&&va(new zt(new ArrayBuffer(1)))!=A||St&&va(new St)!=k||Tt&&va(Tt.resolve())!=S||Nt&&va(new Nt)!=N||It&&va(new It)!=O)&&(va=function(e){var n=Sr(e),r=n==z?e.constructor:t,i=r?Fa(r):"";if(i)switch(i){case At:return A;case Lt:return k;case Mt:return S;case jt:return N;case Bt:return O}return n});var ka=Le?rs:xl;function Ca(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||Ae)}function za(e){return e==e&&!os(e)}function Sa(e,n){return function(r){return null!=r&&(r[e]===n&&(n!==t||e in Te(r)))}}function Ta(e,n,r){return n=yt(n===t?e.length-1:n,0),function(){for(var t=arguments,i=-1,a=yt(t.length-n,0),o=xe(a);++i<a;)o[i]=t[n+i];i=-1;for(var s=xe(n+1);++i<n;)s[i]=t[i];return s[n]=r(o),zn(e,this,s)}}function Na(e,n){return n.length<2?e:Cr(e,ii(n,0,-1))}function Ia(e,n){for(var r=e.length,i=bt(n.length,r),a=Ei(e);i--;){var o=n[i];e[i]=ya(o,r)?a[o]:t}return e}function Ea(e,n){if(("constructor"!==n||"function"!=typeof e[n])&&"__proto__"!=n)return e[n]}var Oa=Ma(ni),Ra=vn||function(e,n){return fn.setTimeout(e,n)},Aa=Ma(ti);function La(e,n,t){var r=n+"";return Aa(e,function(e,n){var t=n.length;if(!t)return e;var r=t-1;return n[r]=(t>1?"& ":"")+n[r],n=n.join(t>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+n+"] */\n")}(r,function(e,n){return Tn(v,(function(t){var r="_."+t[0];n&t[1]&&!On(e,r)&&e.push(r)})),e.sort()}(function(e){var n=e.match(se);return n?n[1].split(le):[]}(r),t)))}function Ma(e){var n=0,r=0;return function(){var i=wt(),a=16-(i-r);if(r=i,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(t,arguments)}}function ja(e,n){var r=-1,i=e.length,a=i-1;for(n=n===t?i:n;++r<n;){var o=Yr(r,a),s=e[o];e[o]=e[r],e[r]=s}return e.length=n,e}var Ba,Da,Pa,Ua=(Ba=function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(ne,(function(e,t,r,i){n.push(r?i.replace(de,"$1"):t||e)})),n},Da=Po(Ba,(function(e){return 500===Pa.size&&Pa.clear(),e})),Pa=Da.cache,Da);function $a(e){if("string"==typeof e||hs(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}function Fa(e){if(null!=e){try{return Me.call(e)}catch(qo){}try{return e+""}catch(qo){}}return""}function Ha(e){if(e instanceof Vt)return e.clone();var n=new Gt(e.__wrapped__,e.__chain__);return n.__actions__=Ei(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}var Ga=Zr((function(e,n){return Xo(e)?pr(e,_r(n,1,Xo,!0)):[]})),Va=Zr((function(e,n){var r=eo(n);return Xo(r)&&(r=t),Xo(e)?pr(e,_r(n,1,Xo,!0),ca(r,2)):[]})),Wa=Zr((function(e,n){var r=eo(n);return Xo(r)&&(r=t),Xo(e)?pr(e,_r(n,1,Xo,!0),t,r):[]}));function qa(e,n,t){var r=null==e?0:e.length;if(!r)return-1;var i=null==t?0:bs(t);return i<0&&(i=yt(r+i,0)),Un(e,ca(n,3),i)}function Ka(e,n,r){var i=null==e?0:e.length;if(!i)return-1;var a=i-1;return r!==t&&(a=bs(r),a=r<0?yt(i+a,0):bt(a,i-1)),Un(e,ca(n,3),a,!0)}function Ya(e){return(null==e?0:e.length)?_r(e,1):[]}function Ja(e){return e&&e.length?e[0]:t}var Za=Zr((function(e){var n=An(e,_i);return n.length&&n[0]===e[0]?Er(n):[]})),Qa=Zr((function(e){var n=eo(e),r=An(e,_i);return n===eo(r)?n=t:r.pop(),r.length&&r[0]===e[0]?Er(r,ca(n,2)):[]})),Xa=Zr((function(e){var n=eo(e),r=An(e,_i);return(n="function"==typeof n?n:t)&&r.pop(),r.length&&r[0]===e[0]?Er(r,t,n):[]}));function eo(e){var n=null==e?0:e.length;return n?e[n-1]:t}var no=Zr(to);function to(e,n){return e&&e.length&&n&&n.length?qr(e,n):e}var ro=ra((function(e,n){var t=null==e?0:e.length,r=sr(e,n);return Kr(e,An(n,(function(e){return ya(e,t)?+e:e})).sort(Ti)),r}));function io(e){return null==e?e:Ct.call(e)}var ao=Zr((function(e){return di(_r(e,1,Xo,!0))})),oo=Zr((function(e){var n=eo(e);return Xo(n)&&(n=t),di(_r(e,1,Xo,!0),ca(n,2))})),so=Zr((function(e){var n=eo(e);return n="function"==typeof n?n:t,di(_r(e,1,Xo,!0),t,n)}));function lo(e){if(!e||!e.length)return[];var n=0;return e=En(e,(function(e){if(Xo(e))return n=yt(e.length,n),!0})),Yn(n,(function(n){return An(e,Vn(n))}))}function co(e,n){if(!e||!e.length)return[];var r=lo(e);return null==n?r:An(r,(function(e){return zn(n,t,e)}))}var uo=Zr((function(e,n){return Xo(e)?pr(e,n):[]})),po=Zr((function(e){return gi(En(e,Xo))})),fo=Zr((function(e){var n=eo(e);return Xo(n)&&(n=t),gi(En(e,Xo),ca(n,2))})),ho=Zr((function(e){var n=eo(e);return n="function"==typeof n?n:t,gi(En(e,Xo),t,n)})),vo=Zr(lo);var go=Zr((function(e){var n=e.length,r=n>1?e[n-1]:t;return r="function"==typeof r?(e.pop(),r):t,co(e,r)}));function mo(e){var n=$t(e);return n.__chain__=!0,n}function _o(e,n){return n(e)}var yo=ra((function(e){var n=e.length,r=n?e[0]:0,i=this.__wrapped__,a=function(n){return sr(n,e)};return!(n>1||this.__actions__.length)&&i instanceof Vt&&ya(r)?((i=i.slice(r,+r+(n?1:0))).__actions__.push({func:_o,args:[a],thisArg:t}),new Gt(i,this.__chain__).thru((function(e){return n&&!e.length&&e.push(t),e}))):this.thru(a)}));var bo=Ri((function(e,n,t){je.call(e,t)?++e[t]:or(e,t,1)}));var wo=Pi(qa),xo=Pi(Ka);function ko(e,n){return(Jo(e)?Tn:fr)(e,ca(n,3))}function Co(e,n){return(Jo(e)?Nn:hr)(e,ca(n,3))}var zo=Ri((function(e,n,t){je.call(e,t)?e[t].push(n):or(e,t,[n])}));var So=Zr((function(e,n,t){var r=-1,i="function"==typeof n,a=Qo(e)?xe(e.length):[];return fr(e,(function(e){a[++r]=i?zn(n,e,t):Or(e,n,t)})),a})),To=Ri((function(e,n,t){or(e,t,n)}));function No(e,n){return(Jo(e)?An:Ur)(e,ca(n,3))}var Io=Ri((function(e,n,t){e[t?0:1].push(n)}),(function(){return[[],[]]}));var Eo=Zr((function(e,n){if(null==e)return[];var t=n.length;return t>1&&ba(e,n[0],n[1])?n=[]:t>2&&ba(n[0],n[1],n[2])&&(n=[n[0]]),Vr(e,_r(n,1),[])})),Oo=hn||function(){return fn.Date.now()};function Ro(e,n,r){return n=r?t:n,n=e&&null==n?e.length:n,Qi(e,c,t,t,t,t,n)}function Ao(e,n){var i;if("function"!=typeof n)throw new Ee(r);return e=bs(e),function(){return--e>0&&(i=n.apply(this,arguments)),e<=1&&(n=t),i}}var Lo=Zr((function(e,n,t){var r=1;if(t.length){var i=ct(t,la(Lo));r|=s}return Qi(e,r,n,t,i)})),Mo=Zr((function(e,n,t){var r=3;if(t.length){var i=ct(t,la(Mo));r|=s}return Qi(n,r,e,t,i)}));function jo(e,n,i){var a,o,s,l,c,u,d=0,p=!1,f=!1,h=!0;if("function"!=typeof e)throw new Ee(r);function v(n){var r=a,i=o;return a=o=t,d=n,l=e.apply(i,r)}function g(e){return d=e,c=Ra(_,n),p?v(e):l}function m(e){var r=e-u;return u===t||r>=n||r<0||f&&e-d>=s}function _(){var e=Oo();if(m(e))return y(e);c=Ra(_,function(e){var t=n-(e-u);return f?bt(t,s-(e-d)):t}(e))}function y(e){return c=t,h&&a?v(e):(a=o=t,l)}function b(){var e=Oo(),r=m(e);if(a=arguments,o=this,u=e,r){if(c===t)return g(u);if(f)return ki(c),c=Ra(_,n),v(u)}return c===t&&(c=Ra(_,n)),l}return n=xs(n)||0,os(i)&&(p=!!i.leading,s=(f="maxWait"in i)?yt(xs(i.maxWait)||0,n):s,h="trailing"in i?!!i.trailing:h),b.cancel=function(){c!==t&&ki(c),d=0,a=u=o=c=t},b.flush=function(){return c===t?l:y(Oo())},b}var Bo=Zr((function(e,n){return dr(e,1,n)})),Do=Zr((function(e,n,t){return dr(e,xs(n)||0,t)}));function Po(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new Ee(r);var t=function(){var r=arguments,i=n?n.apply(this,r):r[0],a=t.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return t.cache=a.set(i,o)||a,o};return t.cache=new(Po.Cache||Kt),t}function Uo(e){if("function"!=typeof e)throw new Ee(r);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}Po.Cache=Kt;var $o=wi((function(e,n){var t=(n=1==n.length&&Jo(n[0])?An(n[0],Zn(ca())):An(_r(n,1),Zn(ca()))).length;return Zr((function(r){for(var i=-1,a=bt(r.length,t);++i<a;)r[i]=n[i].call(this,r[i]);return zn(e,this,r)}))})),Fo=Zr((function(e,n){var r=ct(n,la(Fo));return Qi(e,s,t,n,r)})),Ho=Zr((function(e,n){var r=ct(n,la(Ho));return Qi(e,l,t,n,r)})),Go=ra((function(e,n){return Qi(e,u,t,t,t,n)}));function Vo(e,n){return e===n||e!=e&&n!=n}var Wo=qi(Tr),Ko=qi((function(e,n){return e>=n})),Yo=Rr(function(){return arguments}())?Rr:function(e){return ss(e)&&je.call(e,"callee")&&!Ye.call(e,"callee")},Jo=xe.isArray,Zo=yn?Zn(yn):function(e){return ss(e)&&Sr(e)==R};function Qo(e){return null!=e&&as(e.length)&&!rs(e)}function Xo(e){return ss(e)&&Qo(e)}var es=Wn||xl,ns=bn?Zn(bn):function(e){return ss(e)&&Sr(e)==y};function ts(e){if(!ss(e))return!1;var n=Sr(e);return n==b||"[object DOMException]"==n||"string"==typeof e.message&&"string"==typeof e.name&&!us(e)}function rs(e){if(!os(e))return!1;var n=Sr(e);return n==w||n==x||"[object AsyncFunction]"==n||"[object Proxy]"==n}function is(e){return"number"==typeof e&&e==bs(e)}function as(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function os(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}function ss(e){return null!=e&&"object"==typeof e}var ls=wn?Zn(wn):function(e){return ss(e)&&va(e)==k};function cs(e){return"number"==typeof e||ss(e)&&Sr(e)==C}function us(e){if(!ss(e)||Sr(e)!=z)return!1;var n=qe(e);if(null===n)return!0;var t=je.call(n,"constructor")&&n.constructor;return"function"==typeof t&&t instanceof t&&Me.call(t)==Ue}var ds=xn?Zn(xn):function(e){return ss(e)&&Sr(e)==T};var ps=kn?Zn(kn):function(e){return ss(e)&&va(e)==N};function fs(e){return"string"==typeof e||!Jo(e)&&ss(e)&&Sr(e)==I}function hs(e){return"symbol"==typeof e||ss(e)&&Sr(e)==E}var vs=Cn?Zn(Cn):function(e){return ss(e)&&as(e.length)&&!!on[Sr(e)]};var gs=qi(Pr),ms=qi((function(e,n){return e<=n}));function _s(e){if(!e)return[];if(Qo(e))return fs(e)?pt(e):Ei(e);if(tn&&e[tn])return function(e){for(var n,t=[];!(n=e.next()).done;)t.push(n.value);return t}(e[tn]());var n=va(e);return(n==k?st:n==N?ut:Ws)(e)}function ys(e){return e?(e=xs(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function bs(e){var n=ys(e),t=n%1;return n==n?t?n-t:n:0}function ws(e){return e?lr(bs(e),0,h):0}function xs(e){if("number"==typeof e)return e;if(hs(e))return f;if(os(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=os(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=Jn(e);var t=ve.test(e);return t||me.test(e)?un(e.slice(2),t?2:8):he.test(e)?f:+e}function ks(e){return Oi(e,Ds(e))}function Cs(e){return null==e?"":ui(e)}var zs=Ai((function(e,n){if(Ca(n)||Qo(n))Oi(n,Bs(n),e);else for(var t in n)je.call(n,t)&&tr(e,t,n[t])})),Ss=Ai((function(e,n){Oi(n,Ds(n),e)})),Ts=Ai((function(e,n,t,r){Oi(n,Ds(n),e,r)})),Ns=Ai((function(e,n,t,r){Oi(n,Bs(n),e,r)})),Is=ra(sr);var Es=Zr((function(e,n){e=Te(e);var r=-1,i=n.length,a=i>2?n[2]:t;for(a&&ba(n[0],n[1],a)&&(i=1);++r<i;)for(var o=n[r],s=Ds(o),l=-1,c=s.length;++l<c;){var u=s[l],d=e[u];(d===t||Vo(d,Ae[u])&&!je.call(e,u))&&(e[u]=o[u])}return e})),Os=Zr((function(e){return e.push(t,ea),zn(Us,t,e)}));function Rs(e,n,r){var i=null==e?t:Cr(e,n);return i===t?r:i}function As(e,n){return null!=e&&ga(e,n,Ir)}var Ls=Fi((function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=Pe.call(n)),e[n]=t}),ol(cl)),Ms=Fi((function(e,n,t){null!=n&&"function"!=typeof n.toString&&(n=Pe.call(n)),je.call(e,n)?e[n].push(t):e[n]=[t]}),ca),js=Zr(Or);function Bs(e){return Qo(e)?Zt(e):Br(e)}function Ds(e){return Qo(e)?Zt(e,!0):Dr(e)}var Ps=Ai((function(e,n,t){Hr(e,n,t)})),Us=Ai((function(e,n,t,r){Hr(e,n,t,r)})),$s=ra((function(e,n){var t={};if(null==e)return t;var r=!1;n=An(n,(function(n){return n=bi(n,e),r||(r=n.length>1),n})),Oi(e,aa(e),t),r&&(t=cr(t,7,na));for(var i=n.length;i--;)pi(t,n[i]);return t}));var Fs=ra((function(e,n){return null==e?{}:function(e,n){return Wr(e,n,(function(n,t){return As(e,t)}))}(e,n)}));function Hs(e,n){if(null==e)return{};var t=An(aa(e),(function(e){return[e]}));return n=ca(n),Wr(e,t,(function(e,t){return n(e,t[0])}))}var Gs=Zi(Bs),Vs=Zi(Ds);function Ws(e){return null==e?[]:Qn(e,Bs(e))}var qs=Bi((function(e,n,t){return n=n.toLowerCase(),e+(t?Ks(n):n)}));function Ks(e){return tl(Cs(e).toLowerCase())}function Ys(e){return(e=Cs(e))&&e.replace(ye,rt).replace(Ze,"")}var Js=Bi((function(e,n,t){return e+(t?"-":"")+n.toLowerCase()})),Zs=Bi((function(e,n,t){return e+(t?" ":"")+n.toLowerCase()})),Qs=ji("toLowerCase");var Xs=Bi((function(e,n,t){return e+(t?"_":"")+n.toLowerCase()}));var el=Bi((function(e,n,t){return e+(t?" ":"")+tl(n)}));var nl=Bi((function(e,n,t){return e+(t?" ":"")+n.toUpperCase()})),tl=ji("toUpperCase");function rl(e,n,r){return e=Cs(e),(n=r?t:n)===t?function(e){return nn.test(e)}(e)?function(e){return e.match(Xe)||[]}(e):function(e){return e.match(ce)||[]}(e):e.match(n)||[]}var il=Zr((function(e,n){try{return zn(e,t,n)}catch(qo){return ts(qo)?qo:new Ce(qo)}})),al=ra((function(e,n){return Tn(n,(function(n){n=$a(n),or(e,n,Lo(e[n],e))})),e}));function ol(e){return function(){return e}}var sl=Ui(),ll=Ui(!0);function cl(e){return e}function ul(e){return jr("function"==typeof e?e:cr(e,1))}var dl=Zr((function(e,n){return function(t){return Or(t,e,n)}})),pl=Zr((function(e,n){return function(t){return Or(e,t,n)}}));function fl(e,n,t){var r=Bs(n),i=kr(n,r);null!=t||os(n)&&(i.length||!r.length)||(t=n,n=e,e=this,i=kr(n,Bs(n)));var a=!(os(t)&&"chain"in t&&!t.chain),o=rs(e);return Tn(i,(function(t){var r=n[t];e[t]=r,o&&(e.prototype[t]=function(){var n=this.__chain__;if(a||n){var t=e(this.__wrapped__),i=t.__actions__=Ei(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),t.__chain__=n,t}return r.apply(e,Ln([this.value()],arguments))})})),e}function hl(){}var vl=Gi(An),gl=Gi(In),ml=Gi(Bn);function _l(e){return wa(e)?Vn($a(e)):function(e){return function(n){return Cr(n,e)}}(e)}var yl=Wi(),bl=Wi(!0);function wl(){return[]}function xl(){return!1}var kl=Hi((function(e,n){return e+n}),0),Cl=Yi("ceil"),zl=Hi((function(e,n){return e/n}),1),Sl=Yi("floor");var Tl,Nl=Hi((function(e,n){return e*n}),1),Il=Yi("round"),El=Hi((function(e,n){return e-n}),0);return $t.after=function(e,n){if("function"!=typeof n)throw new Ee(r);return e=bs(e),function(){if(--e<1)return n.apply(this,arguments)}},$t.ary=Ro,$t.assign=zs,$t.assignIn=Ss,$t.assignInWith=Ts,$t.assignWith=Ns,$t.at=Is,$t.before=Ao,$t.bind=Lo,$t.bindAll=al,$t.bindKey=Mo,$t.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Jo(e)?e:[e]},$t.chain=mo,$t.chunk=function(e,n,r){n=(r?ba(e,n,r):n===t)?1:yt(bs(n),0);var i=null==e?0:e.length;if(!i||n<1)return[];for(var a=0,o=0,s=xe(mn(i/n));a<i;)s[o++]=ii(e,a,a+=n);return s},$t.compact=function(e){for(var n=-1,t=null==e?0:e.length,r=0,i=[];++n<t;){var a=e[n];a&&(i[r++]=a)}return i},$t.concat=function(){var e=arguments.length;if(!e)return[];for(var n=xe(e-1),t=arguments[0],r=e;r--;)n[r-1]=arguments[r];return Ln(Jo(t)?Ei(t):[t],_r(n,1))},$t.cond=function(e){var n=null==e?0:e.length,t=ca();return e=n?An(e,(function(e){if("function"!=typeof e[1])throw new Ee(r);return[t(e[0]),e[1]]})):[],Zr((function(t){for(var r=-1;++r<n;){var i=e[r];if(zn(i[0],this,t))return zn(i[1],this,t)}}))},$t.conforms=function(e){return function(e){var n=Bs(e);return function(t){return ur(t,e,n)}}(cr(e,1))},$t.constant=ol,$t.countBy=bo,$t.create=function(e,n){var t=Ft(e);return null==n?t:ar(t,n)},$t.curry=function e(n,r,i){var a=Qi(n,8,t,t,t,t,t,r=i?t:r);return a.placeholder=e.placeholder,a},$t.curryRight=function e(n,r,i){var a=Qi(n,o,t,t,t,t,t,r=i?t:r);return a.placeholder=e.placeholder,a},$t.debounce=jo,$t.defaults=Es,$t.defaultsDeep=Os,$t.defer=Bo,$t.delay=Do,$t.difference=Ga,$t.differenceBy=Va,$t.differenceWith=Wa,$t.drop=function(e,n,r){var i=null==e?0:e.length;return i?ii(e,(n=r||n===t?1:bs(n))<0?0:n,i):[]},$t.dropRight=function(e,n,r){var i=null==e?0:e.length;return i?ii(e,0,(n=i-(n=r||n===t?1:bs(n)))<0?0:n):[]},$t.dropRightWhile=function(e,n){return e&&e.length?hi(e,ca(n,3),!0,!0):[]},$t.dropWhile=function(e,n){return e&&e.length?hi(e,ca(n,3),!0):[]},$t.fill=function(e,n,r,i){var a=null==e?0:e.length;return a?(r&&"number"!=typeof r&&ba(e,n,r)&&(r=0,i=a),function(e,n,r,i){var a=e.length;for((r=bs(r))<0&&(r=-r>a?0:a+r),(i=i===t||i>a?a:bs(i))<0&&(i+=a),i=r>i?0:ws(i);r<i;)e[r++]=n;return e}(e,n,r,i)):[]},$t.filter=function(e,n){return(Jo(e)?En:mr)(e,ca(n,3))},$t.flatMap=function(e,n){return _r(No(e,n),1)},$t.flatMapDeep=function(e,n){return _r(No(e,n),d)},$t.flatMapDepth=function(e,n,r){return r=r===t?1:bs(r),_r(No(e,n),r)},$t.flatten=Ya,$t.flattenDeep=function(e){return(null==e?0:e.length)?_r(e,d):[]},$t.flattenDepth=function(e,n){return(null==e?0:e.length)?_r(e,n=n===t?1:bs(n)):[]},$t.flip=function(e){return Qi(e,512)},$t.flow=sl,$t.flowRight=ll,$t.fromPairs=function(e){for(var n=-1,t=null==e?0:e.length,r={};++n<t;){var i=e[n];r[i[0]]=i[1]}return r},$t.functions=function(e){return null==e?[]:kr(e,Bs(e))},$t.functionsIn=function(e){return null==e?[]:kr(e,Ds(e))},$t.groupBy=zo,$t.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},$t.intersection=Za,$t.intersectionBy=Qa,$t.intersectionWith=Xa,$t.invert=Ls,$t.invertBy=Ms,$t.invokeMap=So,$t.iteratee=ul,$t.keyBy=To,$t.keys=Bs,$t.keysIn=Ds,$t.map=No,$t.mapKeys=function(e,n){var t={};return n=ca(n,3),wr(e,(function(e,r,i){or(t,n(e,r,i),e)})),t},$t.mapValues=function(e,n){var t={};return n=ca(n,3),wr(e,(function(e,r,i){or(t,r,n(e,r,i))})),t},$t.matches=function(e){return $r(cr(e,1))},$t.matchesProperty=function(e,n){return Fr(e,cr(n,1))},$t.memoize=Po,$t.merge=Ps,$t.mergeWith=Us,$t.method=dl,$t.methodOf=pl,$t.mixin=fl,$t.negate=Uo,$t.nthArg=function(e){return e=bs(e),Zr((function(n){return Gr(n,e)}))},$t.omit=$s,$t.omitBy=function(e,n){return Hs(e,Uo(ca(n)))},$t.once=function(e){return Ao(2,e)},$t.orderBy=function(e,n,r,i){return null==e?[]:(Jo(n)||(n=null==n?[]:[n]),Jo(r=i?t:r)||(r=null==r?[]:[r]),Vr(e,n,r))},$t.over=vl,$t.overArgs=$o,$t.overEvery=gl,$t.overSome=ml,$t.partial=Fo,$t.partialRight=Ho,$t.partition=Io,$t.pick=Fs,$t.pickBy=Hs,$t.property=_l,$t.propertyOf=function(e){return function(n){return null==e?t:Cr(e,n)}},$t.pull=no,$t.pullAll=to,$t.pullAllBy=function(e,n,t){return e&&e.length&&n&&n.length?qr(e,n,ca(t,2)):e},$t.pullAllWith=function(e,n,r){return e&&e.length&&n&&n.length?qr(e,n,t,r):e},$t.pullAt=ro,$t.range=yl,$t.rangeRight=bl,$t.rearg=Go,$t.reject=function(e,n){return(Jo(e)?En:mr)(e,Uo(ca(n,3)))},$t.remove=function(e,n){var t=[];if(!e||!e.length)return t;var r=-1,i=[],a=e.length;for(n=ca(n,3);++r<a;){var o=e[r];n(o,r,e)&&(t.push(o),i.push(r))}return Kr(e,i),t},$t.rest=function(e,n){if("function"!=typeof e)throw new Ee(r);return Zr(e,n=n===t?n:bs(n))},$t.reverse=io,$t.sampleSize=function(e,n,r){return n=(r?ba(e,n,r):n===t)?1:bs(n),(Jo(e)?Xt:Xr)(e,n)},$t.set=function(e,n,t){return null==e?e:ei(e,n,t)},$t.setWith=function(e,n,r,i){return i="function"==typeof i?i:t,null==e?e:ei(e,n,r,i)},$t.shuffle=function(e){return(Jo(e)?er:ri)(e)},$t.slice=function(e,n,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&ba(e,n,r)?(n=0,r=i):(n=null==n?0:bs(n),r=r===t?i:bs(r)),ii(e,n,r)):[]},$t.sortBy=Eo,$t.sortedUniq=function(e){return e&&e.length?li(e):[]},$t.sortedUniqBy=function(e,n){return e&&e.length?li(e,ca(n,2)):[]},$t.split=function(e,n,r){return r&&"number"!=typeof r&&ba(e,n,r)&&(n=r=t),(r=r===t?h:r>>>0)?(e=Cs(e))&&("string"==typeof n||null!=n&&!ds(n))&&!(n=ui(n))&&ot(e)?xi(pt(e),0,r):e.split(n,r):[]},$t.spread=function(e,n){if("function"!=typeof e)throw new Ee(r);return n=null==n?0:yt(bs(n),0),Zr((function(t){var r=t[n],i=xi(t,0,n);return r&&Ln(i,r),zn(e,this,i)}))},$t.tail=function(e){var n=null==e?0:e.length;return n?ii(e,1,n):[]},$t.take=function(e,n,r){return e&&e.length?ii(e,0,(n=r||n===t?1:bs(n))<0?0:n):[]},$t.takeRight=function(e,n,r){var i=null==e?0:e.length;return i?ii(e,(n=i-(n=r||n===t?1:bs(n)))<0?0:n,i):[]},$t.takeRightWhile=function(e,n){return e&&e.length?hi(e,ca(n,3),!1,!0):[]},$t.takeWhile=function(e,n){return e&&e.length?hi(e,ca(n,3)):[]},$t.tap=function(e,n){return n(e),e},$t.throttle=function(e,n,t){var i=!0,a=!0;if("function"!=typeof e)throw new Ee(r);return os(t)&&(i="leading"in t?!!t.leading:i,a="trailing"in t?!!t.trailing:a),jo(e,n,{leading:i,maxWait:n,trailing:a})},$t.thru=_o,$t.toArray=_s,$t.toPairs=Gs,$t.toPairsIn=Vs,$t.toPath=function(e){return Jo(e)?An(e,$a):hs(e)?[e]:Ei(Ua(Cs(e)))},$t.toPlainObject=ks,$t.transform=function(e,n,t){var r=Jo(e),i=r||es(e)||vs(e);if(n=ca(n,4),null==t){var a=e&&e.constructor;t=i?r?new a:[]:os(e)&&rs(a)?Ft(qe(e)):{}}return(i?Tn:wr)(e,(function(e,r,i){return n(t,e,r,i)})),t},$t.unary=function(e){return Ro(e,1)},$t.union=ao,$t.unionBy=oo,$t.unionWith=so,$t.uniq=function(e){return e&&e.length?di(e):[]},$t.uniqBy=function(e,n){return e&&e.length?di(e,ca(n,2)):[]},$t.uniqWith=function(e,n){return n="function"==typeof n?n:t,e&&e.length?di(e,t,n):[]},$t.unset=function(e,n){return null==e||pi(e,n)},$t.unzip=lo,$t.unzipWith=co,$t.update=function(e,n,t){return null==e?e:fi(e,n,yi(t))},$t.updateWith=function(e,n,r,i){return i="function"==typeof i?i:t,null==e?e:fi(e,n,yi(r),i)},$t.values=Ws,$t.valuesIn=function(e){return null==e?[]:Qn(e,Ds(e))},$t.without=uo,$t.words=rl,$t.wrap=function(e,n){return Fo(yi(n),e)},$t.xor=po,$t.xorBy=fo,$t.xorWith=ho,$t.zip=vo,$t.zipObject=function(e,n){return mi(e||[],n||[],tr)},$t.zipObjectDeep=function(e,n){return mi(e||[],n||[],ei)},$t.zipWith=go,$t.entries=Gs,$t.entriesIn=Vs,$t.extend=Ss,$t.extendWith=Ts,fl($t,$t),$t.add=kl,$t.attempt=il,$t.camelCase=qs,$t.capitalize=Ks,$t.ceil=Cl,$t.clamp=function(e,n,r){return r===t&&(r=n,n=t),r!==t&&(r=(r=xs(r))==r?r:0),n!==t&&(n=(n=xs(n))==n?n:0),lr(xs(e),n,r)},$t.clone=function(e){return cr(e,4)},$t.cloneDeep=function(e){return cr(e,5)},$t.cloneDeepWith=function(e,n){return cr(e,5,n="function"==typeof n?n:t)},$t.cloneWith=function(e,n){return cr(e,4,n="function"==typeof n?n:t)},$t.conformsTo=function(e,n){return null==n||ur(e,n,Bs(n))},$t.deburr=Ys,$t.defaultTo=function(e,n){return null==e||e!=e?n:e},$t.divide=zl,$t.endsWith=function(e,n,r){e=Cs(e),n=ui(n);var i=e.length,a=r=r===t?i:lr(bs(r),0,i);return(r-=n.length)>=0&&e.slice(r,a)==n},$t.eq=Vo,$t.escape=function(e){return(e=Cs(e))&&Y.test(e)?e.replace(q,it):e},$t.escapeRegExp=function(e){return(e=Cs(e))&&re.test(e)?e.replace(te,"\\$&"):e},$t.every=function(e,n,r){var i=Jo(e)?In:vr;return r&&ba(e,n,r)&&(n=t),i(e,ca(n,3))},$t.find=wo,$t.findIndex=qa,$t.findKey=function(e,n){return Pn(e,ca(n,3),wr)},$t.findLast=xo,$t.findLastIndex=Ka,$t.findLastKey=function(e,n){return Pn(e,ca(n,3),xr)},$t.floor=Sl,$t.forEach=ko,$t.forEachRight=Co,$t.forIn=function(e,n){return null==e?e:yr(e,ca(n,3),Ds)},$t.forInRight=function(e,n){return null==e?e:br(e,ca(n,3),Ds)},$t.forOwn=function(e,n){return e&&wr(e,ca(n,3))},$t.forOwnRight=function(e,n){return e&&xr(e,ca(n,3))},$t.get=Rs,$t.gt=Wo,$t.gte=Ko,$t.has=function(e,n){return null!=e&&ga(e,n,Nr)},$t.hasIn=As,$t.head=Ja,$t.identity=cl,$t.includes=function(e,n,t,r){e=Qo(e)?e:Ws(e),t=t&&!r?bs(t):0;var i=e.length;return t<0&&(t=yt(i+t,0)),fs(e)?t<=i&&e.indexOf(n,t)>-1:!!i&&$n(e,n,t)>-1},$t.indexOf=function(e,n,t){var r=null==e?0:e.length;if(!r)return-1;var i=null==t?0:bs(t);return i<0&&(i=yt(r+i,0)),$n(e,n,i)},$t.inRange=function(e,n,r){return n=ys(n),r===t?(r=n,n=0):r=ys(r),function(e,n,t){return e>=bt(n,t)&&e<yt(n,t)}(e=xs(e),n,r)},$t.invoke=js,$t.isArguments=Yo,$t.isArray=Jo,$t.isArrayBuffer=Zo,$t.isArrayLike=Qo,$t.isArrayLikeObject=Xo,$t.isBoolean=function(e){return!0===e||!1===e||ss(e)&&Sr(e)==_},$t.isBuffer=es,$t.isDate=ns,$t.isElement=function(e){return ss(e)&&1===e.nodeType&&!us(e)},$t.isEmpty=function(e){if(null==e)return!0;if(Qo(e)&&(Jo(e)||"string"==typeof e||"function"==typeof e.splice||es(e)||vs(e)||Yo(e)))return!e.length;var n=va(e);if(n==k||n==N)return!e.size;if(Ca(e))return!Br(e).length;for(var t in e)if(je.call(e,t))return!1;return!0},$t.isEqual=function(e,n){return Ar(e,n)},$t.isEqualWith=function(e,n,r){var i=(r="function"==typeof r?r:t)?r(e,n):t;return i===t?Ar(e,n,t,r):!!i},$t.isError=ts,$t.isFinite=function(e){return"number"==typeof e&&gt(e)},$t.isFunction=rs,$t.isInteger=is,$t.isLength=as,$t.isMap=ls,$t.isMatch=function(e,n){return e===n||Lr(e,n,da(n))},$t.isMatchWith=function(e,n,r){return r="function"==typeof r?r:t,Lr(e,n,da(n),r)},$t.isNaN=function(e){return cs(e)&&e!=+e},$t.isNative=function(e){if(ka(e))throw new Ce("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mr(e)},$t.isNil=function(e){return null==e},$t.isNull=function(e){return null===e},$t.isNumber=cs,$t.isObject=os,$t.isObjectLike=ss,$t.isPlainObject=us,$t.isRegExp=ds,$t.isSafeInteger=function(e){return is(e)&&e>=-9007199254740991&&e<=p},$t.isSet=ps,$t.isString=fs,$t.isSymbol=hs,$t.isTypedArray=vs,$t.isUndefined=function(e){return e===t},$t.isWeakMap=function(e){return ss(e)&&va(e)==O},$t.isWeakSet=function(e){return ss(e)&&"[object WeakSet]"==Sr(e)},$t.join=function(e,n){return null==e?"":mt.call(e,n)},$t.kebabCase=Js,$t.last=eo,$t.lastIndexOf=function(e,n,r){var i=null==e?0:e.length;if(!i)return-1;var a=i;return r!==t&&(a=(a=bs(r))<0?yt(i+a,0):bt(a,i-1)),n==n?function(e,n,t){for(var r=t+1;r--;)if(e[r]===n)return r;return r}(e,n,a):Un(e,Hn,a,!0)},$t.lowerCase=Zs,$t.lowerFirst=Qs,$t.lt=gs,$t.lte=ms,$t.max=function(e){return e&&e.length?gr(e,cl,Tr):t},$t.maxBy=function(e,n){return e&&e.length?gr(e,ca(n,2),Tr):t},$t.mean=function(e){return Gn(e,cl)},$t.meanBy=function(e,n){return Gn(e,ca(n,2))},$t.min=function(e){return e&&e.length?gr(e,cl,Pr):t},$t.minBy=function(e,n){return e&&e.length?gr(e,ca(n,2),Pr):t},$t.stubArray=wl,$t.stubFalse=xl,$t.stubObject=function(){return{}},$t.stubString=function(){return""},$t.stubTrue=function(){return!0},$t.multiply=Nl,$t.nth=function(e,n){return e&&e.length?Gr(e,bs(n)):t},$t.noConflict=function(){return fn._===this&&(fn._=$e),this},$t.noop=hl,$t.now=Oo,$t.pad=function(e,n,t){e=Cs(e);var r=(n=bs(n))?dt(e):0;if(!n||r>=n)return e;var i=(n-r)/2;return Vi(_n(i),t)+e+Vi(mn(i),t)},$t.padEnd=function(e,n,t){e=Cs(e);var r=(n=bs(n))?dt(e):0;return n&&r<n?e+Vi(n-r,t):e},$t.padStart=function(e,n,t){e=Cs(e);var r=(n=bs(n))?dt(e):0;return n&&r<n?Vi(n-r,t)+e:e},$t.parseInt=function(e,n,t){return t||null==n?n=0:n&&(n=+n),xt(Cs(e).replace(ie,""),n||0)},$t.random=function(e,n,r){if(r&&"boolean"!=typeof r&&ba(e,n,r)&&(n=r=t),r===t&&("boolean"==typeof n?(r=n,n=t):"boolean"==typeof e&&(r=e,e=t)),e===t&&n===t?(e=0,n=1):(e=ys(e),n===t?(n=e,e=0):n=ys(n)),e>n){var i=e;e=n,n=i}if(r||e%1||n%1){var a=kt();return bt(e+a*(n-e+cn("1e-"+((a+"").length-1))),n)}return Yr(e,n)},$t.reduce=function(e,n,t){var r=Jo(e)?Mn:qn,i=arguments.length<3;return r(e,ca(n,4),t,i,fr)},$t.reduceRight=function(e,n,t){var r=Jo(e)?jn:qn,i=arguments.length<3;return r(e,ca(n,4),t,i,hr)},$t.repeat=function(e,n,r){return n=(r?ba(e,n,r):n===t)?1:bs(n),Jr(Cs(e),n)},$t.replace=function(){var e=arguments,n=Cs(e[0]);return e.length<3?n:n.replace(e[1],e[2])},$t.result=function(e,n,r){var i=-1,a=(n=bi(n,e)).length;for(a||(a=1,e=t);++i<a;){var o=null==e?t:e[$a(n[i])];o===t&&(i=a,o=r),e=rs(o)?o.call(e):o}return e},$t.round=Il,$t.runInContext=e,$t.sample=function(e){return(Jo(e)?Qt:Qr)(e)},$t.size=function(e){if(null==e)return 0;if(Qo(e))return fs(e)?dt(e):e.length;var n=va(e);return n==k||n==N?e.size:Br(e).length},$t.snakeCase=Xs,$t.some=function(e,n,r){var i=Jo(e)?Bn:ai;return r&&ba(e,n,r)&&(n=t),i(e,ca(n,3))},$t.sortedIndex=function(e,n){return oi(e,n)},$t.sortedIndexBy=function(e,n,t){return si(e,n,ca(t,2))},$t.sortedIndexOf=function(e,n){var t=null==e?0:e.length;if(t){var r=oi(e,n);if(r<t&&Vo(e[r],n))return r}return-1},$t.sortedLastIndex=function(e,n){return oi(e,n,!0)},$t.sortedLastIndexBy=function(e,n,t){return si(e,n,ca(t,2),!0)},$t.sortedLastIndexOf=function(e,n){if(null==e?0:e.length){var t=oi(e,n,!0)-1;if(Vo(e[t],n))return t}return-1},$t.startCase=el,$t.startsWith=function(e,n,t){return e=Cs(e),t=null==t?0:lr(bs(t),0,e.length),n=ui(n),e.slice(t,t+n.length)==n},$t.subtract=El,$t.sum=function(e){return e&&e.length?Kn(e,cl):0},$t.sumBy=function(e,n){return e&&e.length?Kn(e,ca(n,2)):0},$t.template=function(e,n,r){var i=$t.templateSettings;r&&ba(e,n,r)&&(n=t),e=Cs(e),n=Ts({},n,i,Xi);var a,o,s=Ts({},n.imports,i.imports,Xi),l=Bs(s),c=Qn(s,l),u=0,d=n.interpolate||be,p="__p += '",f=Ne((n.escape||be).source+"|"+d.source+"|"+(d===Q?pe:be).source+"|"+(n.evaluate||be).source+"|$","g"),h="//# sourceURL="+(je.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++an+"]")+"\n";e.replace(f,(function(n,t,r,i,s,l){return r||(r=i),p+=e.slice(u,l).replace(we,at),t&&(a=!0,p+="' +\n__e("+t+") +\n'"),s&&(o=!0,p+="';\n"+s+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+n.length,n})),p+="';\n";var v=je.call(n,"variable")&&n.variable;if(v){if(ue.test(v))throw new Ce("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(o?p.replace(H,""):p).replace(G,"$1").replace(V,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var g=il((function(){return ze(l,h+"return "+p).apply(t,c)}));if(g.source=p,ts(g))throw g;return g},$t.times=function(e,n){if((e=bs(e))<1||e>p)return[];var t=h,r=bt(e,h);n=ca(n),e-=h;for(var i=Yn(r,n);++t<e;)n(t);return i},$t.toFinite=ys,$t.toInteger=bs,$t.toLength=ws,$t.toLower=function(e){return Cs(e).toLowerCase()},$t.toNumber=xs,$t.toSafeInteger=function(e){return e?lr(bs(e),-9007199254740991,p):0===e?e:0},$t.toString=Cs,$t.toUpper=function(e){return Cs(e).toUpperCase()},$t.trim=function(e,n,r){if((e=Cs(e))&&(r||n===t))return Jn(e);if(!e||!(n=ui(n)))return e;var i=pt(e),a=pt(n);return xi(i,et(i,a),nt(i,a)+1).join("")},$t.trimEnd=function(e,n,r){if((e=Cs(e))&&(r||n===t))return e.slice(0,ft(e)+1);if(!e||!(n=ui(n)))return e;var i=pt(e);return xi(i,0,nt(i,pt(n))+1).join("")},$t.trimStart=function(e,n,r){if((e=Cs(e))&&(r||n===t))return e.replace(ie,"");if(!e||!(n=ui(n)))return e;var i=pt(e);return xi(i,et(i,pt(n))).join("")},$t.truncate=function(e,n){var r=30,i="...";if(os(n)){var a="separator"in n?n.separator:a;r="length"in n?bs(n.length):r,i="omission"in n?ui(n.omission):i}var o=(e=Cs(e)).length;if(ot(e)){var s=pt(e);o=s.length}if(r>=o)return e;var l=r-dt(i);if(l<1)return i;var c=s?xi(s,0,l).join(""):e.slice(0,l);if(a===t)return c+i;if(s&&(l+=c.length-l),ds(a)){if(e.slice(l).search(a)){var u,d=c;for(a.global||(a=Ne(a.source,Cs(fe.exec(a))+"g")),a.lastIndex=0;u=a.exec(d);)var p=u.index;c=c.slice(0,p===t?l:p)}}else if(e.indexOf(ui(a),l)!=l){var f=c.lastIndexOf(a);f>-1&&(c=c.slice(0,f))}return c+i},$t.unescape=function(e){return(e=Cs(e))&&K.test(e)?e.replace(W,ht):e},$t.uniqueId=function(e){var n=++Be;return Cs(e)+n},$t.upperCase=nl,$t.upperFirst=tl,$t.each=ko,$t.eachRight=Co,$t.first=Ja,fl($t,(Tl={},wr($t,(function(e,n){je.call($t.prototype,n)||(Tl[n]=e)})),Tl),{chain:!1}),$t.VERSION="4.17.21",Tn(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){$t[e].placeholder=$t})),Tn(["drop","take"],(function(e,n){Vt.prototype[e]=function(r){r=r===t?1:yt(bs(r),0);var i=this.__filtered__&&!n?new Vt(this):this.clone();return i.__filtered__?i.__takeCount__=bt(r,i.__takeCount__):i.__views__.push({size:bt(r,h),type:e+(i.__dir__<0?"Right":"")}),i},Vt.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}})),Tn(["filter","map","takeWhile"],(function(e,n){var t=n+1,r=1==t||3==t;Vt.prototype[e]=function(e){var n=this.clone();return n.__iteratees__.push({iteratee:ca(e,3),type:t}),n.__filtered__=n.__filtered__||r,n}})),Tn(["head","last"],(function(e,n){var t="take"+(n?"Right":"");Vt.prototype[e]=function(){return this[t](1).value()[0]}})),Tn(["initial","tail"],(function(e,n){var t="drop"+(n?"":"Right");Vt.prototype[e]=function(){return this.__filtered__?new Vt(this):this[t](1)}})),Vt.prototype.compact=function(){return this.filter(cl)},Vt.prototype.find=function(e){return this.filter(e).head()},Vt.prototype.findLast=function(e){return this.reverse().find(e)},Vt.prototype.invokeMap=Zr((function(e,n){return"function"==typeof e?new Vt(this):this.map((function(t){return Or(t,e,n)}))})),Vt.prototype.reject=function(e){return this.filter(Uo(ca(e)))},Vt.prototype.slice=function(e,n){e=bs(e);var r=this;return r.__filtered__&&(e>0||n<0)?new Vt(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),n!==t&&(r=(n=bs(n))<0?r.dropRight(-n):r.take(n-e)),r)},Vt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Vt.prototype.toArray=function(){return this.take(h)},wr(Vt.prototype,(function(e,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),i=/^(?:head|last)$/.test(n),a=$t[i?"take"+("last"==n?"Right":""):n],o=i||/^find/.test(n);a&&($t.prototype[n]=function(){var n=this.__wrapped__,s=i?[1]:arguments,l=n instanceof Vt,c=s[0],u=l||Jo(n),d=function(e){var n=a.apply($t,Ln([e],s));return i&&p?n[0]:n};u&&r&&"function"==typeof c&&1!=c.length&&(l=u=!1);var p=this.__chain__,f=!!this.__actions__.length,h=o&&!p,v=l&&!f;if(!o&&u){n=v?n:new Vt(this);var g=e.apply(n,s);return g.__actions__.push({func:_o,args:[d],thisArg:t}),new Gt(g,p)}return h&&v?e.apply(this,s):(g=this.thru(d),h?i?g.value()[0]:g.value():g)})})),Tn(["pop","push","shift","sort","splice","unshift"],(function(e){var n=Oe[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);$t.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return n.apply(Jo(i)?i:[],e)}return this[t]((function(t){return n.apply(Jo(t)?t:[],e)}))}})),wr(Vt.prototype,(function(e,n){var t=$t[n];if(t){var r=t.name+"";je.call(Rt,r)||(Rt[r]=[]),Rt[r].push({name:n,func:t})}})),Rt[$i(t,2).name]=[{name:"wrapper",func:t}],Vt.prototype.clone=function(){var e=new Vt(this.__wrapped__);return e.__actions__=Ei(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ei(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ei(this.__views__),e},Vt.prototype.reverse=function(){if(this.__filtered__){var e=new Vt(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Vt.prototype.value=function(){var e=this.__wrapped__.value(),n=this.__dir__,t=Jo(e),r=n<0,i=t?e.length:0,a=function(e,n,t){var r=-1,i=t.length;for(;++r<i;){var a=t[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":n-=o;break;case"take":n=bt(n,e+o);break;case"takeRight":e=yt(e,n-o)}}return{start:e,end:n}}(0,i,this.__views__),o=a.start,s=a.end,l=s-o,c=r?s:o-1,u=this.__iteratees__,d=u.length,p=0,f=bt(l,this.__takeCount__);if(!t||!r&&i==l&&f==l)return vi(e,this.__actions__);var h=[];e:for(;l--&&p<f;){for(var v=-1,g=e[c+=n];++v<d;){var m=u[v],_=m.iteratee,y=m.type,b=_(g);if(2==y)g=b;else if(!b){if(1==y)continue e;break e}}h[p++]=g}return h},$t.prototype.at=yo,$t.prototype.chain=function(){return mo(this)},$t.prototype.commit=function(){return new Gt(this.value(),this.__chain__)},$t.prototype.next=function(){this.__values__===t&&(this.__values__=_s(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?t:this.__values__[this.__index__++]}},$t.prototype.plant=function(e){for(var n,r=this;r instanceof Ht;){var i=Ha(r);i.__index__=0,i.__values__=t,n?a.__wrapped__=i:n=i;var a=i;r=r.__wrapped__}return a.__wrapped__=e,n},$t.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Vt){var n=e;return this.__actions__.length&&(n=new Vt(this)),(n=n.reverse()).__actions__.push({func:_o,args:[io],thisArg:t}),new Gt(n,this.__chain__)}return this.thru(io)},$t.prototype.toJSON=$t.prototype.valueOf=$t.prototype.value=function(){return vi(this.__wrapped__,this.__actions__)},$t.prototype.first=$t.prototype.head,tn&&($t.prototype[tn]=function(){return this}),$t}();vn?((vn.exports=vt)._=vt,hn._=vt):fn._=vt}).call(tn)}));const Mu=h((({server:e})=>{var n;const[t,r]=U(),[i,a]=U(void 0);f((()=>{e.fetchMembers().then(a)}),[e,a]);const[o,s]=U([]);return f((()=>{var e,n;t&&s(null!=(n=null==(e=i.members.find((e=>e._id.user===t)))?void 0:e.roles)?n:[])}),[s,t,i]),d("div",{className:_u},d("div",{className:yu},null!=(n=null==i?void 0:i.members.length)?n:0," Members"),i&&i.members.length>0&&i.members.map((e=>({member:e,user:i.users.find((n=>n._id===e._id.user))}))).map((({member:n,user:i})=>{var a,l,c;return d(v,{key:n._id.user},d("div",{className:ku,"data-open":t===n._id.user,onClick:()=>r(t===n._id.user?void 0:n._id.user)},d("span",null,d(St,{target:i,size:24})," ",null!=(a=null==i?void 0:i.username)?a:d(m,{id:"app.main.channel.unknown_user"})),d(vt,{className:Cu},d(ke,{size:24}))),t===n._id.user&&d("div",{className:zu},d($n,{type:"subtle"},"Roles"),Object.keys(null!=(l=e.roles)?l:{}).map((n=>{var t;const r=e.roles[n];return d(ar,{key:n,checked:null!=(t=o.includes(n))&&t,onChange:e=>{s(e?[...o,n]:o.filter((e=>e!==n)))}},d("span",{style:{color:r.colour}},r.name))})),d(Gn,{compact:!0,disabled:Lu.isEqual(null!=(c=n.roles)?c:[],o),onClick:()=>n.edit({roles:o})},d(m,{id:"app.special.modals.actions.save"}))))})))})),ju=h((({server:e})=>{var n;const[t,r]=U(e.name),[i,a]=U(null!=(n=e.description)?n:""),[o,p]=U(e.system_messages);f((()=>r(e.name)),[e.name]),f((()=>{var n;return a(null!=(n=e.description)?n:"")}),[e.description]),f((()=>p(e.system_messages)),[e.system_messages]);const[h,v]=U(!1);return d("div",{className:vu},d("div",{className:gu},d(mi,{width:80,height:80,style:"icon",fileType:"icons",behaviour:"upload",maxFileSize:25e5,onUpload:n=>e.edit({icon:n}),previewURL:e.generateIconURL({max_side:256},!0),remove:()=>e.edit({remove:"Icon"})}),d("div",{className:mu},d("h3",null,d(m,{id:"app.main.servers.name"})),d(Hn,{contrast:!0,value:t,maxLength:32,onChange:e=>{r(e.currentTarget.value),h||v(!0)}}))),d("h3",null,d(m,{id:"app.main.servers.description"})),d(qt,{maxRows:10,minHeight:60,maxLength:1024,value:i,placeholder:"Add a topic...",onChange:e=>{a(e.currentTarget.value),h||v(!0)}}),d("h3",null,d(m,{id:"app.main.servers.custom_banner"})),d(mi,{height:160,style:"banner",fileType:"banners",behaviour:"upload",maxFileSize:6e6,onUpload:n=>e.edit({banner:n}),previewURL:e.generateBannerURL({width:1e3},!0),remove:()=>e.edit({remove:"Banner"})}),d("h3",null,d(m,{id:"app.settings.server_pages.overview.system_messages"})),[["User Joined","user_joined"],["User Left","user_left"],["User Kicked","user_kicked"],["User Banned","user_banned"]].map((([n,t])=>{var r;return d("p",{key:t,style:{display:"flex",gap:"8px",alignItems:"center"}},d("span",{style:{flexShrink:"0",flex:"25%"}},n),d(pr,{value:null!=(r=null==o?void 0:o[t])?r:"disabled",onChange:e=>{h||v(!0);const n=e.currentTarget.value;if("disabled"===n){const e=o,{[t]:n}=e,r=u(e,[c(t)]);p(r)}else p(l(s({},o),{[t]:n}))}},d("option",{value:"disabled"},d(m,{id:"general.disabled"})),e.channels.filter((e=>void 0!==e&&"TextChannel"===e.channel_type)).map((e=>d("option",{key:e._id,value:e._id},_t(e,!0))))))})),d("p",null,d(Gn,{onClick:function(){const n={};t!==e.name&&(n.name=t),i!==e.description&&(n.description=i),pe(o,e.system_messages)||(n.system_messages=null!=o?o:void 0),e.edit(n),v(!1)},contrast:!0,disabled:!h},d(m,{id:"app.special.modals.actions.save"}))))})),Bu=h((({server:e})=>{var n;const t=y(pt),[r,i]=U("default"),{openScreen:a}=dt(),o=de((()=>{var n;return null!=(n=e.roles)?n:{}}),[e]);if("default"!==r&&void 0===o[r])return f((()=>i("default")),[r]),null;const s=t.servers.get(e._id).permission,{name:l,colour:c,hoist:u,rank:p,permissions:h}=null!=(n=o[r])?n:{},g=ce((n=>("default"===n?e.default_permissions:o[n].permissions).map((e=>e>>>0))),[o,e]),[_,b]=U(g(r)),[w,x]=U(l),[k,C]=U(u),[z,S]=U(p),[T,N]=U(c);f((()=>b(g(r))),[g,r,h]),f((()=>x(l)),[r,l]),f((()=>C(u)),[r,u]),f((()=>S(p)),[r,p]),f((()=>N(c)),[r,c]);const I=!(pe(_,g(r))&&pe(w,l)&&pe(T,c)&&pe(k,u)&&pe(z,p)),E=()=>{pe(_,g(r))||e.setPermissions(r,{server:_[0],channel:_[1]}),pe(w,l)&&pe(T,c)&&pe(k,u)&&pe(z,p)||e.editRole(r,{name:w,colour:T,hoist:k,rank:z})};return d("div",{className:Su},d("div",{className:Tu},d("div",{className:Iu},d("h1",null,d(m,{id:"app.settings.server_pages.roles.title"})),d(K,{size:22,onClick:()=>a({id:"special_input",type:"create_role",server:e,callback:e=>i(e)})})),["default",...Object.keys(o)].map((e=>"default"===e?d(la,{active:"default"===r,onClick:()=>i("default")},d(m,{id:"app.settings.permissions.default_role"})):d(la,{key:e,active:r===e,onClick:()=>i(e),style:{color:o[e].colour}},o[e].name)))),d("div",{className:Nu},d("div",{className:Iu},d("h2",null,"default"===r?d(m,{id:"app.settings.permissions.default_role"}):o[r].name),d(Gn,{contrast:!0,disabled:!I,onClick:E},"Save")),"default"!==r&&d(v,null,d("section",null,d($n,{type:"subtle"},"Role Name"),d("p",null,d(Hn,{value:w,onChange:e=>x(e.currentTarget.value),contrast:!0}))),d("section",null,d($n,{type:"subtle"},"Role Colour"),d("p",null,d(lr,{value:null!=T?T:"gray",onChange:e=>N(e)}))),d("section",null,d($n,{type:"subtle"},"Role Options"),d("p",null,d(ar,{checked:null!=k&&k,onChange:e=>C(e),description:"Display this role above others."},"Hoist Role")))),d("section",null,d($n,{type:"subtle"},d(m,{id:"app.settings.permissions.server"})),Object.keys(rn.ServerPermission).map((e=>{if("View"===e)return;const n=rn.ServerPermission[e];return d(ar,{key:e,checked:(_[0]&n)>0,onChange:()=>b([_[0]^n,_[1]]),disabled:!(s&n),description:d(m,{id:`permissions.server.${e}.d`})},d(m,{id:`permissions.server.${e}.t`}))}))),d("section",null,d($n,{type:"subtle"},d(m,{id:"app.settings.permissions.channel"})),Object.keys(rn.ChannelPermission).map((e=>{if("ManageChannel"===e)return;const n=rn.ChannelPermission[e];return d(ar,{key:e,checked:(_[1]>>>0&n)>0,onChange:()=>b([_[0],_[1]^n]),disabled:"View"===e||!(s&n),description:d(m,{id:`permissions.channel.${e}.d`})},d(m,{id:`permissions.channel.${e}.t`}))}))),d("div",{className:Eu},d(Gn,{contrast:!0,disabled:!I,onClick:E},"Save"),"default"!==r&&d(Gn,{contrast:!0,error:!0,onClick:()=>{i("default"),e.deleteRole(r)}},"Delete")),"default"!==r&&d(v,null,d("section",null,d($n,{type:"subtle"},"Experimental Role Ranking"),d("p",null,d(Hn,{value:null!=z?z:0,onChange:e=>S(parseInt(e.currentTarget.value)),contrast:!0}))))))}));var Du=h((()=>{const{server:e}=le(),n=kt().servers.get(e);if(!n)return null;const t=b();return d(uu,{pages:[{category:d(ta,{variant:"uniform",text:n.name}),id:"overview",icon:d(Xe,{size:20}),title:d(m,{id:"app.settings.server_pages.overview.title"})},{id:"categories",icon:d(an,{size:20}),title:d(m,{id:"app.settings.server_pages.categories.title"})},{id:"members",icon:d(ge,{size:20}),title:d(m,{id:"app.settings.server_pages.members.title"})},{id:"invites",icon:d(on,{size:20}),title:d(m,{id:"app.settings.server_pages.invites.title"})},{id:"bans",icon:d(sn,{size:20}),title:d(m,{id:"app.settings.server_pages.bans.title"})},{id:"roles",icon:d(en,{size:20}),title:d(m,{id:"app.settings.server_pages.roles.title"}),hideTitle:!0}],children:d(se,null,d(oe,{path:"/server/:server/settings/categories"},d(Ru,{server:n})),d(oe,{path:"/server/:server/settings/members"},d(nr,null,d(Mu,{server:n}))),d(oe,{path:"/server/:server/settings/invites"},d(nr,null,d(Au,{server:n}))),d(oe,{path:"/server/:server/settings/bans"},d(nr,null,d(Ou,{server:n}))),d(oe,{path:"/server/:server/settings/roles"},d(nr,null,d(Bu,{server:n}))),d(oe,null,d(ju,{server:n}))),category:"server_pages",switchPage:function(n){n?t.replace(`/server/${e}/settings/${n}`):t.replace(`/server/${e}/settings`)},defaultPage:"overview",showExitButton:!0})})),Pu=Te((function(e,n){return d(cn,ln({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),d("path",{d:"M18.344 8.71c-.707 0-1.279.572-1.279 1.278v4.53a1.278 1.278 0 1 0 2.558 0v-4.53c0-.706-.572-1.278-1.279-1.278zm-12.688 0c-.707 0-1.279.572-1.279 1.278v4.53a1.278 1.278 0 1 0 2.558 0v-4.53A1.277 1.277 0 0 0 5.656 8.71zm8.889-3.809.768-1.388a.343.343 0 0 0-.133-.47.344.344 0 0 0-.471.135l-.789 1.42c-.588-.235-1.236-.368-1.92-.368s-1.332.132-1.92.367l-.789-1.418a.344.344 0 0 0-.471-.135.345.345 0 0 0-.133.47l.768 1.388C8.072 5.69 7.148 7.099 7.148 8.71c0 .011 0 .021.002.034-.002.006-.002.013-.002.019v.001h9.703V8.71c.001-1.611-.923-3.019-2.306-3.809zM9.76 6.869a.346.346 0 1 1 .005-.693.346.346 0 0 1-.005.693zm4.48 0a.347.347 0 0 1 0-.692.346.346 0 0 1 0 .692zM7.148 16.12c0 .646.525 1.171 1.174 1.171h.586v2.401a1.279 1.279 0 0 0 2.558 0v-2.401h1.066v2.401c0 .707.572 1.278 1.277 1.278.709 0 1.281-.571 1.281-1.278v-2.401h.586c.648 0 1.174-.524 1.174-1.171V9.028H7.148v7.092z"}))}));Pu.displayName="Android";var Uu=Te((function(e,n){return d(cn,ln({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),d("path",{d:"M19.665 16.811a10.316 10.316 0 0 1-1.021 1.837c-.537.767-.978 1.297-1.316 1.592-.525.482-1.089.73-1.692.744-.432 0-.954-.123-1.562-.373-.61-.249-1.17-.371-1.683-.371-.537 0-1.113.122-1.73.371-.616.25-1.114.381-1.495.393-.577.025-1.154-.229-1.729-.764-.367-.32-.826-.87-1.377-1.648-.59-.829-1.075-1.794-1.455-2.891-.407-1.187-.611-2.335-.611-3.447 0-1.273.275-2.372.826-3.292a4.857 4.857 0 0 1 1.73-1.751 4.65 4.65 0 0 1 2.34-.662c.46 0 1.063.142 1.81.422s1.227.422 1.436.422c.158 0 .689-.167 1.593-.498.853-.307 1.573-.434 2.163-.384 1.6.129 2.801.759 3.6 1.895-1.43.867-2.137 2.08-2.123 3.637.012 1.213.453 2.222 1.317 3.023a4.33 4.33 0 0 0 1.315.863c-.106.307-.218.6-.336.882zM15.998 2.38c0 .95-.348 1.838-1.039 2.659-.836.976-1.846 1.541-2.941 1.452a2.955 2.955 0 0 1-.021-.36c0-.913.396-1.889 1.103-2.688.352-.404.8-.741 1.343-1.009.542-.264 1.054-.41 1.536-.435.013.128.019.255.019.381z"}))}));Uu.displayName="Apple";var $u=Te((function(e,n){return d(cn,ln({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),d("path",{d:"M10.742 2.04c-1.404.183-3.06.808-4.281 1.626-1.01.664-2.397 2.02-2.309 2.251.193.501 3.28 5.658 3.33 5.562.038-.067.095-.279.123-.49.25-1.385 1.425-2.704 2.897-3.253.568-.221.683-.221 5.495-.27l4.917-.047-.395-.646c-1.385-2.26-3.522-3.819-6.197-4.512-.731-.193-2.81-.318-3.58-.22z"}),d("path",{d:"M3.2 7.217c-.453.799-.983 2.415-1.107 3.358-.588 4.273 1.568 8.4 5.379 10.315.894.452 2.174.885 2.732.933l.356.029 1.674-2.838c.915-1.559 1.655-2.849 1.636-2.868-.02-.019-.231.039-.481.125-1.569.53-3.387.086-4.57-1.116-.424-.424-1.002-1.357-2.84-4.542C4.71 8.41 3.642 6.601 3.603 6.601c-.028 0-.211.279-.403.616z"}),d("path",{d:"M15.15 8.804c1.222 1.242 1.655 3.003 1.116 4.59-.086.26-1.212 2.271-2.501 4.485-1.29 2.203-2.349 4.031-2.349 4.06 0 .115 1.328.057 2.175-.087 4.32-.74 7.573-4.002 8.265-8.276.26-1.558.164-2.925-.307-4.503l-.25-.837h-6.707l.557.568z"}),d("path",{d:"M10.608 8.563C9.598 8.987 8.905 9.7 8.53 10.71c-.173.453-.202.713-.173 1.424.03.75.068.963.347 1.511.366.75.962 1.329 1.751 1.703.462.221.654.25 1.54.25.895 0 1.077-.029 1.559-.26.712-.326 1.462-1.077 1.79-1.79.23-.48.259-.663.259-1.558 0-.886-.029-1.078-.25-1.54-.375-.788-.952-1.386-1.703-1.75-.568-.28-.742-.318-1.56-.348-.788-.019-.99.01-1.48.212z"}))}));$u.displayName="Chrome";var Fu=Te((function(e,n){return d(cn,ln({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),d("path",{fillRule:"evenodd",d:"M12.026 2c-5.509 0-9.974 4.465-9.974 9.974 0 4.406 2.857 8.145 6.821 9.465.499.09.679-.217.679-.481 0-.237-.008-.865-.011-1.696-2.775.602-3.361-1.338-3.361-1.338-.452-1.152-1.107-1.459-1.107-1.459-.905-.619.069-.605.069-.605 1.002.07 1.527 1.028 1.527 1.028.89 1.524 2.336 1.084 2.902.829.091-.645.351-1.085.635-1.334-2.214-.251-4.542-1.107-4.542-4.93 0-1.087.389-1.979 1.024-2.675-.101-.253-.446-1.268.099-2.64 0 0 .837-.269 2.742 1.021a9.582 9.582 0 0 1 2.496-.336 9.554 9.554 0 0 1 2.496.336c1.906-1.291 2.742-1.021 2.742-1.021.545 1.372.203 2.387.099 2.64.64.696 1.024 1.587 1.024 2.675 0 3.833-2.33 4.675-4.552 4.922.355.308.675.916.675 1.846 0 1.334-.012 2.41-.012 2.737 0 .267.178.577.687.479C19.146 20.115 22 16.379 22 11.974 22 6.465 17.535 2 12.026 2z",clipRule:"evenodd"}))}));Fu.displayName="Github";var Hu=Te((function(e,n){return d(cn,ln({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),d("path",{d:"m3 5.557 7.357-1.002.004 7.097-7.354.042L3 5.557zm7.354 6.913.006 7.103-7.354-1.011v-6.14l7.348.048zm.892-8.046L21.001 3v8.562l-9.755.077V4.424zm9.758 8.113-.003 8.523-9.755-1.378-.014-7.161 9.772.016z"}))}));Hu.displayName="Windows";const Gu="bba1e094e1b3c56010e6c1a87539a9d02706f749";var Vu={user:"_user_1gz2n_1",banner:"_banner_1gz2n_1",container:"_container_1gz2n_13",userDetail:"_userDetail_1gz2n_20",avatar:"_avatar_1gz2n_31",userid:"_userid_1gz2n_38",details:"_details_1gz2n_50",preview:"_preview_1gz2n_76",row:"_row_1gz2n_87",pfp:"_pfp_1gz2n_91",background:"_background_1gz2n_96",buttons:"_buttons_1gz2n_99",appearance:"_appearance_1gz2n_114",theme:"_theme_1gz2n_114",themes:"_themes_1gz2n_119",emojiPack:"_emojiPack_1gz2n_148",button:"_button_1gz2n_99",display:"_display_1gz2n_203",actions:"_actions_1gz2n_208",code:"_code_1gz2n_213",overrides:"_overrides_1gz2n_231",entry:"_entry_1gz2n_238",override:"_override_1gz2n_231",picker:"_picker_1gz2n_259",input:"_input_1gz2n_273",sessions:"_sessions_1gz2n_287",session:"_session_1gz2n_287",detail:"_detail_1gz2n_50",info:"_info_1gz2n_314",name:"_name_1gz2n_320",label:"_label_1gz2n_341",time:"_time_1gz2n_360",languages:"_languages_1gz2n_383",list:"_list_1gz2n_383",flag:"_flag_1gz2n_406",description:"_description_1gz2n_417",feedback:"_feedback_1gz2n_421",options:"_options_1gz2n_421",experiments:"_experiments_1gz2n_427",empty:"_empty_1gz2n_430",myBots:"_myBots_1gz2n_436",botCard:"_botCard_1gz2n_436",botSection:"_botSection_1gz2n_442",infoheader:"_infoheader_1gz2n_458",userName:"_userName_1gz2n_485",buttonRow:"_buttonRow_1gz2n_510"};const Wu=h((()=>{const{openScreen:e,writeClipboard:n}=dt(),t=y(ft),r=kt(),[i,a]=U("..."),[o,s]=U(!1),[l,c]=U(void 0),u=b();function p(e){u.replace(`/settings/${e}`)}return f((()=>{"..."===i&&t===ht.ONLINE&&r.req("GET","/auth/account").then((e=>a(e.email))),void 0===l&&t===ht.ONLINE&&r.user.fetchProfile().then((e=>c(null!=e?e:{})))}),[r,i,l,t]),d("div",{className:Vu.user},d("div",{className:Vu.banner},d("div",{className:Vu.container},d(St,{className:Vu.avatar,target:r.user,size:72,onClick:()=>p("profile")}),d("div",{className:Vu.userDetail},"@",r.user.username,d("div",{className:Vu.userid},d(ut,{content:d(m,{id:"app.settings.pages.account.unique_id"})},d(dn,{size:16})),d(ut,{content:d(m,{id:"app.special.copy"})},d("a",{onClick:()=>n(r.user._id)},r.user._id))))),d(Gn,{onClick:()=>p("profile"),contrast:!0},d(m,{id:"app.settings.pages.profile.edit_profile"}))),d("div",null,[["username",r.user.username,d(L,{key:"at",size:24})],["email",i,d(W,{key:"envelope",size:24})],["password","•••••••••",d(un,{key:"key",size:24})]].map((([n,t,r])=>d(au,{key:n,icon:r,description:"email"===n?o?d(v,null,t," ",d("a",{onClick:e=>Kr(e,s(!1))},d(m,{id:"app.special.modals.actions.hide"}))):d(v,null,"•••••••••••@",t.split("@").pop()," ",d("a",{onClick:e=>Kr(e,s(!0))},d(m,{id:"app.special.modals.actions.reveal"}))):t,account:!0,action:"chevron",onClick:()=>e({id:"modify_account",field:n})},d(m,{id:`login.${n}`}))))),d("h3",null,d(m,{id:"app.settings.pages.account.2fa.title"})),d("h5",null,"Two-factor authentication is currently work-in-progress, see"," "," ",d("a",{href:"https://github.com/insertish/rauth/milestone/1",target:"_blank",rel:"noreferrer"},"v1 milestone here"),"."),d(au,{icon:d(pn,{size:24,color:"var(--error)"}),description:"Set up 2FA Authentication on your account.",disabled:!0,action:"chevron"},"Set up Two-factor authentication"),d("h3",null,d(m,{id:"app.settings.pages.account.manage.title"})),d("h5",null,d(m,{id:"app.settings.pages.account.manage.description"})),d(au,{icon:d(j,{size:24,color:"var(--error)"}),description:"Disable your account. You won't be able to access it unless you log back in.",disabled:!0,action:d(m,{id:"general.unavailable"})},d(m,{id:"app.settings.pages.account.manage.disable"})),d("a",{href:"mailto:contact@revolt.chat?subject=Delete%20my%20account"},d(au,{icon:d(fn,{size:24,color:"var(--error)"}),description:"Delete your account, including all of your data. (sends an email to contact@revolt.chat)",hover:!0,action:"external"},d(m,{id:"app.settings.pages.account.manage.delete"}))),d(sr,null,d("span",null,d(m,{id:"app.settings.tips.account.a"}))," ",d("a",{onClick:()=>p("profile")},d(m,{id:"app.settings.tips.account.b"}))))}));var qu=function(e,n,t){if("number"!=typeof e||e<-1||e>1||"string"!=typeof n||"r"!=n[0]&&"#"!=n[0]||t&&"string"!=typeof t)return null;var r=function(e){var n=e.length,t={};if(n>9){if((e=e.split(",")).length<3||e.length>4)return null;t[0]=i(e[0].split("(")[1]),t[1]=i(e[1]),t[2]=i(e[2]),t[3]=e[3]?parseFloat(e[3]):-1}else{if(8==n||6==n||n<4)return null;n<6&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+(n>4?""+e[4]+e[4]:"")),e=i(e.slice(1),16),t[0]=e>>16&255,t[1]=e>>8&255,t[2]=255&e,t[3]=-1,9!=n&&5!=n||(t[3]=a(t[2]/255*1e4)/1e4,t[2]=t[1],t[1]=t[0],t[0]=e>>24&255)}return t},i=parseInt,a=Math.round,o=n.length>9,s=(o="string"==typeof t?t.length>9||"c"==t&&!o:o,e<0),l=(e=s?-1*e:e,t=t&&"c"!=t?t:s?"#000000":"#FFFFFF",r(n)),c=r(t);return l&&c?o?"rgb"+(l[3]>-1||c[3]>-1?"a(":"(")+a((c[0]-l[0])*e+l[0])+","+a((c[1]-l[1])*e+l[1])+","+a((c[2]-l[2])*e+l[2])+(l[3]<0&&c[3]<0?")":","+(l[3]>-1&&c[3]>-1?a(1e4*((c[3]-l[3])*e+l[3]))/1e4:c[3]<0?l[3]:c[3])+")"):"#"+(4294967296+16777216*a((c[0]-l[0])*e+l[0])+65536*a((c[1]-l[1])*e+l[1])+256*a((c[2]-l[2])*e+l[2])+(l[3]>-1&&c[3]>-1?a(255*((c[3]-l[3])*e+l[3])):c[3]>-1?a(255*c[3]):l[3]>-1?a(255*l[3]):255)).toString(16).slice(1,l[3]>-1||c[3]>-1?void 0:-2):null};const Ku=Dn((function(e){var n,t,r,i,a,o,s,l,c,u;const p=y(Jn),{writeClipboard:h,openScreen:v}=dt();function g(e){Un({type:"SETTINGS_SET_THEME",theme:e})}const _=ce((e=>{Un({type:"SETTINGS_SET_THEME_OVERRIDE",custom:e})}),[]),b=null!=(t=null==(n=e.settings.appearance)?void 0:n.emojiPack)?t:"mutant";function w(e){Un({type:"SETTINGS_SET_APPEARANCE",options:{emojiPack:e}})}const x=ce(mc(_,200),[_]),[k,C]=U(null!=(a=null==(i=null==(r=e.settings.theme)?void 0:r.custom)?void 0:i.css)?a:"");f((()=>x({css:k})),[x,k]);const z=null!=(s=null==(o=e.settings.theme)?void 0:o.base)?s:"dark";return d("div",{className:Vu.appearance},d("h3",null,d(m,{id:"app.settings.pages.appearance.theme"})),d("div",{className:Vu.themes},d("div",{className:Vu.theme},d("img",{loading:"eager",src:"/revite/refs/pull/288/merge/assets/light.caa83bf9.svg",draggable:!1,"data-active":"light"===z,onClick:()=>"light"!==z&&g({base:"light"}),onContextMenu:e=>e.preventDefault()}),d("h4",null,d(m,{id:"app.settings.pages.appearance.color.light"}))),d("div",{className:Vu.theme},d("img",{loading:"eager",src:"/revite/refs/pull/288/merge/assets/dark.f38e16a0.svg",draggable:!1,"data-active":"dark"===z,onClick:()=>"dark"!==z&&g({base:"dark"}),onContextMenu:e=>e.preventDefault()}),d("h4",null,d(m,{id:"app.settings.pages.appearance.color.dark"})))),rt("theme_shop")&&d(re,{to:"/settings/theme_shop"},d(au,{icon:d(gn,{size:24}),action:"chevron",hover:!0},d(m,{id:"app.settings.pages.theme_shop.title"}))),d("h3",null,d(m,{id:"app.settings.pages.appearance.accent_selector"})),d(lr,{value:p.accent,onChange:function(e){x({accent:e,"scrollbar-thumb":qu(-.2,e)})}}),d("h3",null,d(m,{id:"app.settings.pages.appearance.font"})),d(pr,{value:null!=(l=p.font)?l:et,onChange:e=>_({font:e.currentTarget.value})},nt.map((e=>d("option",{value:e,key:e},tt[e].name)))),d("p",null,d(ar,{checked:!0===(null==(c=e.settings.theme)?void 0:c.ligatures),onChange:()=>{var n;return g({ligatures:!(null==(n=e.settings.theme)?void 0:n.ligatures)})},description:d(m,{id:"app.settings.pages.appearance.ligatures_desc"})},d(m,{id:"app.settings.pages.appearance.ligatures"}))),d("h3",null,d(m,{id:"app.settings.pages.appearance.emoji_pack"})),d("div",{className:Vu.emojiPack},d("div",{className:Vu.row},d("div",null,d("div",{className:Vu.button,onClick:()=>w("mutant"),"data-active":"mutant"===b},d("img",{loading:"eager",src:"/revite/refs/pull/288/merge/assets/mutant_emoji.3866aee0.svg",draggable:!1,onContextMenu:e=>e.preventDefault()})),d("h4",null,"Mutant Remix"," ",d("a",{href:"https://mutant.revolt.chat",target:"_blank",rel:"noreferrer"},"(by Revolt)"))),d("div",null,d("div",{className:Vu.button,onClick:()=>w("twemoji"),"data-active":"twemoji"===b},d("img",{loading:"eager",src:"/revite/refs/pull/288/merge/assets/twemoji_emoji.e406fbc9.svg",draggable:!1,onContextMenu:e=>e.preventDefault()})),d("h4",null,"Twemoji"))),d("div",{className:Vu.row},d("div",null,d("div",{className:Vu.button,onClick:()=>w("openmoji"),"data-active":"openmoji"===b},d("img",{loading:"eager",src:"/revite/refs/pull/288/merge/assets/openmoji_emoji.43ef11bd.svg",draggable:!1,onContextMenu:e=>e.preventDefault()})),d("h4",null,"Openmoji")),d("div",null,d("div",{className:Vu.button,onClick:()=>w("noto"),"data-active":"noto"===b},d("img",{loading:"eager",src:"/revite/refs/pull/288/merge/assets/noto_emoji.595df56a.svg",draggable:!1,onContextMenu:e=>e.preventDefault()})),d("h4",null,"Noto Emoji")))),d(wa,{defaultValue:!1,id:"settings_overrides",summary:d(m,{id:"app.settings.pages.appearance.overrides"})},d("div",{className:Vu.actions},d(ut,{content:d(m,{id:"app.settings.pages.appearance.reset_overrides"})},d(Gn,{contrast:!0,iconbutton:!0,onClick:()=>g({custom:{}})},d(hn,{size:22}))),d("div",{className:Vu.code,onClick:()=>h(JSON.stringify(p))},d(ut,{content:d(m,{id:"app.special.copy"})}," ",JSON.stringify(p))),d(ut,{content:d(m,{id:"app.settings.pages.appearance.import"})},d(Gn,{contrast:!0,iconbutton:!0,onClick:async()=>{try{const e=await navigator.clipboard.readText();x(JSON.parse(e))}catch(e){v({id:"_input",question:d(m,{id:"app.settings.pages.appearance.import_theme"}),field:d(m,{id:"app.settings.pages.appearance.theme_data"}),callback:async e=>x(JSON.parse(e))})}}},d(vn,{size:22})))),d("h3",null,"App"),d("div",{className:Vu.overrides},["accent","background","foreground","primary-background","primary-header","secondary-background","secondary-foreground","secondary-header","tertiary-background","tertiary-foreground","block","message-box","mention","scrollbar-thumb","scrollbar-track","status-online","status-away","status-busy","status-streaming","status-invisible","success","warning","error","hover"].map((e=>d("div",{className:Vu.entry,key:e,style:{backgroundColor:p[e]}},d("div",{className:Vu.input},d("input",{type:"color",value:p[e],onChange:n=>x({[e]:n.currentTarget.value})})),d("span",{style:`color: ${Yu(p[e],p["primary-background"])}`},e),d("div",{className:Vu.override},d("div",{className:Vu.picker,onClick:e=>{var n,t,r;return null==(r=null==(t=null==(n=e.currentTarget.parentElement)?void 0:n.parentElement)?void 0:t.querySelector("input"))?void 0:r.click()}},d(Z,{size:24})),d(Hn,{type:"text",className:Vu.text,value:p[e],onChange:n=>x({[e]:n.currentTarget.value})}))))))),d(wa,{id:"settings_advanced_appearance",defaultValue:!1,summary:d(m,{id:"app.settings.pages.appearance.advanced"})},d("h3",null,d(m,{id:"app.settings.pages.appearance.mono_font"})),d(pr,{value:null!=(u=p.monospaceFont)?u:Zn,onChange:e=>_({monospaceFont:e.currentTarget.value})},Qn.map((e=>d("option",{value:e,key:e},Xn[e].name)))),d("h3",null,d(m,{id:"app.settings.pages.appearance.custom_css"})),d(qt,{maxRows:20,minHeight:480,code:!0,value:k,onChange:e=>C(e.currentTarget.value)})))}),(e=>({settings:e.settings})));function Yu(e,n){e=e.replace("#","");const t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),i=parseInt(e.substr(4,2),16),a=(299*t+587*r+114*i)/1e3;return isNaN(t)||isNaN(r)||isNaN(i)||isNaN(a)?Yu(n,"#fffff"):a>=175?"black":"white"}const Ju={audio:!0};const Zu=Dn((function(){var e;const[n,t]=U(void 0),[r,i]=U(void 0),[a,o]=U(void 0),[s,l]=U(void 0),c=async()=>{try{const e=await navigator.mediaDevices.getUserMedia(Ju);t(e)}catch(e){l(e)}try{const{state:e}=await navigator.permissions.query({name:"microphone"});o(e)}catch(e){l(e)}};return f((()=>{c()}),[]),f((()=>{n&&navigator.mediaDevices.enumerateDevices().then((e=>{i(e)}),(e=>{l(e)}))}),[n]),d(v,null,d("div",null,d("h3",null,d(m,{id:"app.settings.pages.audio.input_device"})),d(pr,{value:null!=(e=window.localStorage.getItem("audioInputDevice"))?e:0,onChange:e=>{return n=e.currentTarget.value,void("input"===(t="input")?(window.localStorage.setItem("audioInputDevice",n),ni.isProducing("audio")&&(ni.stopProducing("audio"),ni.startProducing("audio"))):"output"===t&&window.localStorage.setItem("audioOutputDevice",n));var n,t}},null==r?void 0:r.filter((e=>"audioinput"===e.kind)).map((e=>d("option",{value:e.deviceId,key:e.deviceId},e.label||d(m,{id:"app.settings.pages.audio.device_label_NA"}))))),s&&"NotAllowedError"===s.name&&d($n,{error:"AudioPermissionBlock",type:"error",block:!0}),s&&"prompt"===a&&d(sr,null,d(Xt,{id:"app.settings.pages.audio.tip_retry",fields:{retryBtn:d("a",{onClick:e=>{Kr(e),l(void 0),c()}},d(m,{id:"app.settings.pages.audio.button_retry"}))}}))))}),(()=>{}));const Qu=Dn((function(e){return d("div",{className:Vu.experiments},d("h3",null,d(m,{id:"app.settings.pages.experiments.features"})),it.map((n=>d(ar,{key:n,checked:rt(n,e.options),onChange:e=>Un({type:e?"EXPERIMENTS_ENABLE":"EXPERIMENTS_DISABLE",key:n}),description:at[n].description},at[n].title))),0===it.length&&d("div",{className:Vu.empty},d(m,{id:"app.settings.pages.experiments.not_available"})))}),(e=>({options:e.experiments})));function Xu(){return d("div",{className:Vu.feedback},d("a",{href:"https://github.com/revoltchat/revolt/discussions",target:"_blank",rel:"noreferrer"},d(au,{hover:!0,action:"external",icon:d(Fu,{size:24}),description:d(m,{id:"app.settings.pages.feedback.suggest_desc"})},d(m,{id:"app.settings.pages.feedback.suggest"}))),d("a",{href:"https://github.com/revoltchat/revite/issues/new",target:"_blank",rel:"noreferrer"},d(au,{hover:!0,action:"external",icon:d(mn,{size:24}),description:d(m,{id:"app.settings.pages.feedback.issue_desc"})},d(m,{id:"app.settings.pages.feedback.issue"}))),d("a",{href:"https://github.com/orgs/revoltchat/projects/1",target:"_blank",rel:"noreferrer"},d(au,{hover:!0,action:"external",icon:d(_n,{size:24}),description:d(m,{id:"app.settings.pages.feedback.bug_desc"})},d(m,{id:"app.settings.pages.feedback.bug"}))),d(re,{to:"/invite/Testers"},d("a",null,d(au,{hover:!0,action:"chevron",icon:d(yn,{size:24}),description:"You can report issues and discuss improvements with us directly here."},"Join Testers server."))))}function ed({entry:[e,n],locale:t}){return d(ar,{key:e,className:Vu.entry,checked:t===e,onChange:n=>{n&&Un({type:"SET_LOCALE",locale:e})}},d("div",{className:Vu.flag},"🙂"===n.emoji?d("img",{src:"/revite/refs/pull/288/merge/assets/toki_pona.838f7607.svg",width:42}):"🪄"===n.emoji?d("img",{src:"/revite/refs/pull/288/merge/assets/enchanting_table.36a87cae.webp",width:42,style:{objectFit:"contain"}}):d(Yn,{size:42,emoji:n.emoji})),d("span",{className:Vu.description},n.display))}const nd=Dn((function(e){var n,t,r,i,a;const o=Object.keys(ot).map((e=>[e,ot[e]])),l=(null==(n=navigator.languages.filter((e=>o.find((n=>n[0].replace(/_/g,"-")==e)))))?void 0:n[0])||(null==(a=null==(i=null==(r=null==(t=navigator.languages)?void 0:t.map((e=>e.split("-")[0])))?void 0:r.filter((e=>o.find((n=>n[0]==e)))))?void 0:i[0])?void 0:a.split("-")[0]);if(l){const e=o.find((e=>e[0].replace(/_/g,"-")==l));e&&o.splice(0,0,o.splice(o.indexOf(e),1)[0])}return d("div",{className:Vu.languages},d("h3",null,d(m,{id:"app.settings.pages.language.select"})),d("div",{className:Vu.list},o.filter((([,e])=>!e.cat)).map((([n,t])=>d(ed,s({key:n,entry:[n,t]},e))))),d("h3",null,d(m,{id:"app.settings.pages.language.const"})),d("div",{className:Vu.list},o.filter((([,e])=>"const"===e.cat)).map((([n,t])=>d(ed,s({key:n,entry:[n,t]},e))))),d("h3",null,d(m,{id:"app.settings.pages.language.other"})),d("div",{className:Vu.list},o.filter((([,e])=>"alt"===e.cat)).map((([n,t])=>d(ed,s({key:n,entry:[n,t]},e))))),d(sr,null,d("span",null,d(m,{id:"app.settings.tips.languages.a"}))," ",d("a",{href:"https://weblate.insrt.uk/engage/revolt/?utm_source=widget",target:"_blank",rel:"noreferrer"},d(m,{id:"app.settings.tips.languages.b"}))))}),(e=>({locale:e.locale}))),td=_.div`
    display: inline-block;

    height: 1.3em;
    padding: 0px 4px;
    font-size: 0.7em;
    user-select: none;
    margin-inline-start: 2px;
    text-transform: uppercase;

    color: var(--foreground);
    background: var(--accent);
    border-radius: calc(var(--border-radius) / 2);
`;function rd({bot:e,onDelete:n,onUpdate:t}){var r;const i=kt(),a=jt(),[o,c]=U(i.users.get(e._id)),[p,h]=U({_id:e._id,username:o.username,public:e.public,interactions_url:e.interactions_url}),[g,_]=U(""),[y,b]=U(!1),[w,x]=U(!1),[k,C]=U(null),[z,S]=U(null),{writeClipboard:T,openScreen:N}=dt(),[I,E]=U(void 0),O=ce((()=>{i.request("GET",`/users/${e._id}/profile`,{headers:{"x-bot-token":e.token},transformRequest:(e,n)=>(delete n["x-user-id"],delete n["x-session-token"],e)}).then((e=>E(null!=e?e:{})))}),[o,E]);f((()=>{void 0===I&&w&&O()}),[I,w,O]);const[R,A]=U(!1);function L(e){E(l(s({},I),{content:e})),R||A(!0)}async function M(n){b(!0),_(""),await i.request("PATCH","/users/id",{headers:{"x-bot-token":e.token},transformRequest:(e,n)=>(delete n["x-user-id"],delete n["x-session-token"],e),data:JSON.stringify(n?{avatar:n}:{remove:"Avatar"})});const t=await i.bots.fetch(e._id);n||t.user.update({},"Avatar"),c(t.user),b(!1)}async function j(n){b(!0),_(""),await i.request("PATCH","/users/id",{headers:{"x-bot-token":e.token},transformRequest:(e,n)=>(delete n["x-user-id"],delete n["x-session-token"],e),data:JSON.stringify(n?{profile:{background:n}}:{remove:"ProfileBackground"})}),n?O():E(l(s({},I),{background:void 0})),b(!1)}const B=Wt(L,{users:{type:"all"}}),{onChange:D,onKeyUp:P,onKeyDown:$,onFocus:F,onBlur:H}=B,G=u(B,["onChange","onKeyUp","onKeyDown","onFocus","onBlur"]);return d("div",{key:e._id,className:Vu.botCard},d("div",{className:Vu.infoheader},d("div",{className:Vu.container},w?d(mi,{width:64,height:64,style:"icon",fileType:"avatars",behaviour:"upload",maxFileSize:4e6,onUpload:e=>M(e),remove:()=>M(),defaultPreview:o.generateAvatarURL({max_side:256},!0),previewURL:o.generateAvatarURL({max_side:256},!0)}):d(St,{className:Vu.avatar,target:o,size:48,onClick:()=>N({id:"profile",user_id:o._id})}),w?d(Hn,{ref:C,value:p.username,disabled:y,onChange:e=>h(l(s({},p),{username:e.currentTarget.value}))}):d("div",{className:Vu.userDetail},d("div",{className:Vu.userName},o.username," ",d(td,null,d(m,{id:"app.main.channel.bot"}))),d("div",{className:Vu.userid},d(ut,{content:d(m,{id:"app.settings.pages.bots.unique_id"})},d(dn,{size:16})),d(ut,{content:d(m,{id:"app.special.copy"})},d("a",{onClick:()=>T(o._id)},o._id))))),!w&&d(ut,{content:d(m,{id:`app.settings.pages.bots.${e.public?"public":"private"}_bot_tip`})},e.public?d(wn,{size:24}):d(xn,{size:24})),d(Gn,{disabled:y,onClick:()=>{w?(h({_id:e._id,username:o.username,public:e.public,interactions_url:e.interactions_url}),k.value=o.username,z.value=e.interactions_url||"",_(""),x(!1)):x(!0)},contrast:!0},d(m,{id:"app.special.modals.actions."+(w?"cancel":"edit")}))),!w&&d(au,{account:!0,icon:d(un,{size:24}),onClick:()=>T(e.token),description:d(v,null,"••••••••••••••••••••••••••••••••••••"," ",d("a",{onClick:n=>Kr(n,N({id:"token_reveal",token:e.token,username:o.username}))},d(m,{id:"app.special.modals.actions.reveal"}))),action:d(bn,{size:18})},d(m,{id:"app.settings.pages.bots.token"})),w&&d("div",{className:Vu.botSection},d(wa,{defaultValue:!1,id:`bot_profile_${e._id}`,summary:"Profile"},d("h3",null,d(m,{id:"app.settings.pages.profile.custom_background"})),d(mi,{height:92,style:"banner",behaviour:"upload",fileType:"backgrounds",maxFileSize:6e6,onUpload:e=>j(e),remove:()=>j(),previewURL:(null==I?void 0:I.background)?i.generateFileURL(I.background,{width:1e3},!0):void 0}),d("h3",null,d(m,{id:"app.settings.pages.profile.info"})),d(Kt,s({detached:!0},G)),d(qt,{maxRows:10,minHeight:200,maxLength:2e3,value:null!=(r=null==I?void 0:I.content)?r:"",disabled:void 0===I,onChange:e=>{D(e),L(e.currentTarget.value)},placeholder:a("app.settings.pages.profile."+(void 0===I?"fetching":"placeholder")),onKeyUp:P,onKeyDown:$,onFocus:F,onBlur:H})),d(ar,{checked:p.public,disabled:y,contrast:!0,description:d(m,{id:"app.settings.pages.bots.public_bot_desc"}),onChange:e=>h(l(s({},p),{public:e}))},d(m,{id:"app.settings.pages.bots.public_bot"})),d("h3",null,d(m,{id:"app.settings.pages.bots.interactions_url"})),d("h5",null,d(m,{id:"app.settings.pages.bots.reserved"})),d(Hn,{ref:S,value:p.interactions_url,disabled:y,onChange:e=>h(l(s({},p),{interactions_url:e.currentTarget.value}))})),g&&d("div",{className:Vu.botSection},d(sr,{error:!0,hideSeparator:!0},g)),d("div",{className:Vu.buttonRow},w&&d(v,null,d(Gn,{accent:!0,onClick:async function(){var n,r;const a={};p.username!==o.username&&(a.name=p.username),p.public!==e.public&&(a.public=p.public),""===p.interactions_url?a.remove="InteractionsURL":p.interactions_url!==e.interactions_url&&(a.interactions_url=p.interactions_url),b(!0),_("");try{await i.bots.edit(e._id,a),R&&await async function(n){b(!0),_(""),await i.request("PATCH","/users/id",{headers:{"x-bot-token":e.token},transformRequest:(e,n)=>(delete n["x-user-id"],delete n["x-session-token"],e),data:JSON.stringify(n?{profile:{content:n}}:{remove:"ProfileContent"})}),n?O():E(l(s({},I),{content:void 0}));b(!1)}(null==I?void 0:I.content),t(a),A(!1),x(!1)}catch(qo){const t=qo;if(t.isAxiosError&&(null==(r=null==(n=t.response)?void 0:n.data)?void 0:r.type))switch(t.response.data.type){case"UsernameTaken":_("That username is taken!");break;default:_(`Error: ${t.response.data.type}`)}else _(t.toString())}b(!1)}},d(m,{id:"app.special.modals.actions.save"})),d(Gn,{error:!0,onClick:async()=>{b(!0),await i.bots.delete(e._id),n()}},d(m,{id:"app.special.modals.actions.delete"}))),!w&&d(v,null,d(Gn,{onClick:()=>T(`${window.origin}/bot/${e._id}`)},d(m,{id:"app.settings.pages.bots.copy_invite"})),d(Gn,{onClick:()=>gt("Intermediate","navigate",`/bot/${e._id}`)},d(m,{id:"app.settings.pages.bots.add"})))))}const id=h((()=>{const e=kt(),[n,t]=U(void 0);f((()=>{e.bots.fetchOwned().then((({bots:e})=>t(e)))}),[]);const{openScreen:r}=dt();return d("div",{className:Vu.myBots},d(au,{account:!0,icon:d(K,{size:24}),onClick:()=>r({id:"create_bot",onCreate:e=>t([...null!=n?n:[],e])}),action:"chevron"},d(m,{id:"app.settings.pages.bots.create_bot"})),null==n?void 0:n.map((e=>d(rd,{key:e._id,bot:e,onDelete:()=>t(n.filter((n=>n._id!==e._id))),onUpdate:r=>t(n.map((n=>(n._id===e._id&&("public"in r&&"boolean"==typeof r.public&&(n.public=r.public),"interactions_url"in r&&(n.interactions_url=r.interactions_url),"InteractionsURL"===r.remove&&(n.interactions_url=void 0)),n))))}))))}));function ad(){const[e,n]=U(window.native.getConfig()),[t,r]=U(),[i,a]=U(!1),[o,c]=U(!1),[u,p]=U(!1);return f((()=>{window.native.getAutoStart().then(r)}),[]),d("div",null,d("h3",null,"App Behavior"),d("h5",null,"Some options might require a restart."),d(ar,{checked:null!=t&&t,disabled:void 0===t,onChange:async e=>{e?await window.native.enableAutoStart():await window.native.disableAutoStart(),r(e)},description:"Launch Revolt when you log into your computer."},"Start with computer"),d(ar,{checked:e.discordRPC,onChange:t=>{window.native.set("discordRPC",t),n(l(s({},e),{discordRPC:t}))},description:"Rep Revolt on your Discord status."},"Enable Discord status"),d(ar,{checked:"nightly"===e.build,onChange:t=>{const r=t?"nightly":"stable";window.native.set("build",r),a(!0),n(l(s({},e),{build:r}))},description:"Use the beta branch of Revolt."},"Revolt Nightly"),d("h3",null,"Titlebar"),d(ar,{checked:!e.frame,onChange:t=>{window.native.set("frame",!t),c(!0),n(l(s({},e),{frame:!t}))},description:d(v,null,"Let Revolt use its own window frame.")},"Custom window frame"),d(ar,{disabled:!0,checked:!e.frame,onChange:t=>{window.native.set("frame",!t),c(!0),n(l(s({},e),{frame:!t}))},description:"Show mute/deafen buttons on the titlebar."},"Enable quick action buttons"),d("h3",null,"Advanced"),d(ar,{checked:e.hardwareAcceleration,onChange:async t=>{window.native.set("hardwareAcceleration",t),c(!0),n(l(s({},e),{hardwareAcceleration:t}))},description:"Uses your GPU to render the app, disable if you run into visual issues."},"Hardware Acceleration"),d("p",{style:{display:"flex",gap:"8px"}},d(Gn,{contrast:!0,compact:!0,disabled:!i,onClick:window.native.reload},"Reload Page"),d(Gn,{contrast:!0,compact:!0,disabled:!o,onClick:window.native.relaunch},"Reload App")),d("h3",{style:{marginTop:"4em"}},"Local Development Mode"),"dev"===e.build?d(v,null,d("h5",null,"Development mode is currently on."),d(Gn,{contrast:!0,compact:!0,onClick:()=>{window.native.set("build","stable"),window.native.reload()}},"Exit Development Mode")):d(v,null,d(ar,{checked:u,onChange:p,description:d(v,null,"This will change the app to the 'dev' branch, instead loading the app from a local server on your machine.",d("br",null),d("b",null,"Without a server running,"," ",d("span",{style:{color:"var(--error)"}},"the app will not load!")))},"I understand there's no going back."),d("p",null,d(Gn,{error:!0,compact:!0,disabled:!u,onClick:()=>{window.native.set("build","dev"),window.native.reload()}},"Enter Development Mode"))))}function od(e){const n=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),t=window.atob(n);return Uint8Array.from([...t].map((e=>e.charCodeAt(0))))}const sd=Dn((function({options:e}){var n,t;const r=y(pt),{openScreen:i}=dt(),[a,o]=U(void 0);f((()=>{var e;null==(e=navigator.serviceWorker)||e.getRegistration().then((async e=>{var n;const t=await(null==(n=null==e?void 0:e.pushManager)?void 0:n.getSubscription());o(null!=t)}))}),[]);const c=kn(null!=(n=null==e?void 0:e.sounds)?n:{},st);return d("div",{className:Vu.notifications},d("h3",null,d(m,{id:"app.settings.pages.notifications.push_notifications"})),d(ar,{disabled:!("Notification"in window),checked:null!=(t=null==e?void 0:e.desktopEnabled)&&t,description:d(m,{id:"app.settings.pages.notifications.descriptions.enable_desktop"}),onChange:async e=>{if(e){if("granted"!==await Notification.requestPermission())return i({id:"error",error:"DeniedNotification"})}Un({type:"SETTINGS_SET_NOTIFICATION_OPTIONS",options:{desktopEnabled:e}})}},d(m,{id:"app.settings.pages.notifications.enable_desktop"})),d(ar,{disabled:void 0===a,checked:null!=a&&a,description:d(m,{id:"app.settings.pages.notifications.descriptions.enable_push"}),onChange:async e=>{var n;try{const t=await(null==(n=navigator.serviceWorker)?void 0:n.getRegistration());if(t)if(e){const e=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:od(r.configuration.vapid)}),n=e.toJSON();n.keys&&(r.req("POST","/push/subscribe",s({endpoint:e.endpoint},n.keys)),o(!0))}else{const e=await t.pushManager.getSubscription();null==e||e.unsubscribe(),o(!1),r.req("POST","/push/unsubscribe")}}catch(t){console.error("Failed to enable push!",t)}}},d(m,{id:"app.settings.pages.notifications.enable_push"})),d("h3",null,d(m,{id:"app.settings.pages.notifications.sounds"})),tr.map((n=>d(ar,{key:n,checked:!!c[n],onChange:t=>Un({type:"SETTINGS_SET_NOTIFICATION_OPTIONS",options:{sounds:l(s({},null==e?void 0:e.sounds),{[n]:t})}})},d(m,{id:`app.settings.pages.notifications.sound.${n}`})))))}),(e=>({options:e.settings.notification}))),ld=h((()=>{var e;const n=y(ft),t=jt(),r=kt(),[i,a]=U(void 0),o=ce((()=>{r.user.fetchProfile().then((e=>a(null!=e?e:{})))}),[r.user,a]);f((()=>{void 0===i&&n===ht.ONLINE&&o()}),[i,n,o]);const[c,p]=U(!1);function h(e){a(l(s({},i),{content:e})),c||p(!0)}const v=Wt(h,{users:{type:"all"}}),{onChange:g,onKeyUp:_,onKeyDown:b,onFocus:w,onBlur:x}=v,k=u(v,["onChange","onKeyUp","onKeyDown","onFocus","onBlur"]);return d("div",{className:Vu.user},d("h3",null,d(m,{id:"app.special.modals.actions.preview"})),d("div",{className:Vu.preview},d(Mi,{user_id:r.user._id,dummy:!0,dummyProfile:i})),d("div",{className:Vu.row},d("div",{className:Vu.pfp},d("h3",null,d(m,{id:"app.settings.pages.profile.profile_picture"})),d(mi,{width:80,height:80,style:"icon",fileType:"avatars",behaviour:"upload",maxFileSize:4e6,onUpload:e=>r.users.edit({avatar:e}),remove:()=>r.users.edit({remove:"Avatar"}),defaultPreview:r.user.generateAvatarURL({max_side:256},!0),previewURL:r.user.generateAvatarURL({max_side:256},!0)})),d("div",{className:Vu.background},d("h3",null,d(m,{id:"app.settings.pages.profile.custom_background"})),d(mi,{height:92,style:"banner",behaviour:"upload",fileType:"backgrounds",maxFileSize:6e6,onUpload:async e=>{await r.users.edit({profile:{background:e}}),o()},remove:async()=>{await r.users.edit({remove:"ProfileBackground"}),a(l(s({},i),{background:void 0}))},previewURL:(null==i?void 0:i.background)?r.generateFileURL(i.background,{width:1e3},!0):void 0}))),d("h3",null,d(m,{id:"app.settings.pages.profile.info"})),d(Kt,s({detached:!0},k)),d(qt,{maxRows:10,minHeight:200,maxLength:2e3,value:null!=(e=null==i?void 0:i.content)?e:"",disabled:void 0===i,onChange:e=>{g(e),h(e.currentTarget.value)},placeholder:t("app.settings.pages.profile."+(void 0===i?"fetching":"placeholder")),onKeyUp:_,onKeyDown:b,onFocus:w,onBlur:x}),d("p",null,d(Gn,{contrast:!0,onClick:()=>{p(!1),r.users.edit({profile:{content:null==i?void 0:i.content}})},disabled:!c},d(m,{id:"app.special.modals.actions.save"}))))}));var cd=Te((function(e,n){return d(cn,ln({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),d("path",{d:"M8.824 7.287c.008 0 .004 0 0 0zm-2.8-1.4c.006 0 .003 0 0 0zm16.754 2.161c-.505-1.215-1.53-2.528-2.333-2.943.654 1.283 1.033 2.57 1.177 3.53l.002.02c-1.314-3.278-3.544-4.6-5.366-7.477-.091-.147-.184-.292-.273-.446a3.545 3.545 0 0 1-.13-.24 2.118 2.118 0 0 1-.172-.46.03.03 0 0 0-.027-.03.038.038 0 0 0-.021 0l-.006.001a.037.037 0 0 0-.01.005L15.624 0c-2.585 1.515-3.657 4.168-3.932 5.856a6.197 6.197 0 0 0-2.305.587.297.297 0 0 0-.147.37c.057.162.24.24.396.17a5.622 5.622 0 0 1 2.008-.523l.067-.005a5.847 5.847 0 0 1 1.957.222l.095.03a5.816 5.816 0 0 1 .616.228c.08.036.16.073.238.112l.107.055a5.835 5.835 0 0 1 .368.211 5.953 5.953 0 0 1 2.034 2.104c-.62-.437-1.733-.868-2.803-.681 4.183 2.09 3.06 9.292-2.737 9.02a5.164 5.164 0 0 1-1.513-.292 4.42 4.42 0 0 1-.538-.232c-1.42-.735-2.593-2.121-2.74-3.806 0 0 .537-2 3.845-2 .357 0 1.38-.998 1.398-1.287-.005-.095-2.029-.9-2.817-1.677-.422-.416-.622-.616-.8-.767a3.47 3.47 0 0 0-.301-.227 5.388 5.388 0 0 1-.032-2.842c-1.195.544-2.124 1.403-2.8 2.163h-.006c-.46-.584-.428-2.51-.402-2.913-.006-.025-.343.176-.389.206a8.43 8.43 0 0 0-1.136.974c-.397.403-.76.839-1.085 1.303a9.816 9.816 0 0 0-1.562 3.52c-.003.013-.11.487-.19 1.073-.013.09-.026.181-.037.272a7.8 7.8 0 0 0-.069.667l-.002.034-.023.387-.001.06C.386 18.795 5.593 24 12.016 24c5.752 0 10.527-4.176 11.463-9.661.02-.149.035-.298.052-.448.232-1.994-.025-4.09-.753-5.844z"}))}));cd.displayName="Firefoxbrowser";var ud=Te((function(e,n){return d(cn,ln({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),d("path",{d:"M12.504 0c-.155 0-.315.008-.48.021-4.226.333-3.105 4.807-3.17 6.298-.076 1.092-.3 1.953-1.05 3.02-.885 1.051-2.127 2.75-2.716 4.521-.278.832-.41 1.684-.287 2.489a.424.424 0 0 0-.11.135c-.26.268-.45.6-.663.839-.199.199-.485.267-.797.4-.313.136-.658.269-.864.68-.09.189-.136.394-.132.602 0 .199.027.4.055.536.058.399.116.728.04.97-.249.68-.28 1.145-.106 1.484.174.334.535.47.94.601.81.2 1.91.135 2.774.6.926.466 1.866.67 2.616.47.526-.116.97-.464 1.208-.946.587-.003 1.23-.269 2.26-.334.699-.058 1.574.267 2.577.2.025.134.063.198.114.333l.003.003c.391.778 1.113 1.132 1.884 1.071.771-.06 1.592-.536 2.257-1.306.631-.765 1.683-1.084 2.378-1.503.348-.199.629-.469.649-.853.023-.4-.2-.811-.714-1.376v-.097l-.003-.003c-.17-.2-.25-.535-.338-.926-.085-.401-.182-.786-.492-1.046h-.003c-.059-.054-.123-.067-.188-.135a.357.357 0 0 0-.19-.064c.431-1.278.264-2.55-.173-3.694-.533-1.41-1.465-2.638-2.175-3.483-.796-1.005-1.576-1.957-1.56-3.368.026-2.152.236-6.133-3.544-6.139zm.529 3.405h.013c.213 0 .396.062.584.198.19.135.33.332.438.533.105.259.158.459.166.724 0-.02.006-.04.006-.06v.105a.086.086 0 0 1-.004-.021l-.004-.024a1.807 1.807 0 0 1-.15.706.953.953 0 0 1-.213.335.71.71 0 0 0-.088-.042c-.104-.045-.198-.064-.284-.133a1.312 1.312 0 0 0-.22-.066c.05-.06.146-.133.183-.198.053-.128.082-.264.088-.402v-.02a1.21 1.21 0 0 0-.061-.4c-.045-.134-.101-.2-.183-.333-.084-.066-.167-.132-.267-.132h-.016c-.093 0-.176.03-.262.132a.8.8 0 0 0-.205.334 1.18 1.18 0 0 0-.09.4v.019c.002.089.008.179.02.267-.193-.067-.438-.135-.607-.202a1.635 1.635 0 0 1-.018-.2v-.02a1.772 1.772 0 0 1 .15-.768 1.08 1.08 0 0 1 .43-.533.985.985 0 0 1 .594-.2zm-2.962.059h.036c.142 0 .27.048.399.135.146.129.264.288.344.465.09.199.14.4.153.667v.004c.007.134.006.2-.002.266v.08c-.03.007-.056.018-.083.024-.152.055-.274.135-.393.2.012-.09.013-.18.003-.267v-.015c-.012-.133-.04-.2-.082-.333a.613.613 0 0 0-.166-.267.248.248 0 0 0-.183-.064h-.021c-.071.006-.13.04-.186.132a.552.552 0 0 0-.12.27.944.944 0 0 0-.023.33v.015c.012.135.037.2.08.334.046.134.098.2.166.268.01.009.02.018.034.024-.07.057-.117.07-.176.136a.304.304 0 0 1-.131.068 2.62 2.62 0 0 1-.275-.402 1.772 1.772 0 0 1-.155-.667 1.759 1.759 0 0 1 .08-.668 1.43 1.43 0 0 1 .283-.535c.128-.133.26-.2.418-.2zm1.37 1.706c.332 0 .733.065 1.216.399.293.2.523.269 1.052.468h.003c.255.136.405.266.478.399v-.131a.571.571 0 0 1 .016.47c-.123.31-.516.643-1.063.842v.002c-.268.135-.501.333-.775.465-.276.135-.588.292-1.012.267a1.139 1.139 0 0 1-.448-.067 3.566 3.566 0 0 1-.322-.198c-.195-.135-.363-.332-.612-.465v-.005h-.005c-.4-.246-.616-.512-.686-.71-.07-.268-.005-.47.193-.6.224-.135.38-.271.483-.336.104-.074.143-.102.176-.131h.002v-.003c.169-.202.436-.47.839-.601.139-.036.294-.065.466-.065zm2.8 2.142c.358 1.417 1.196 3.475 1.735 4.473.286.534.855 1.659 1.102 3.024.156-.005.33.018.513.064.646-1.671-.546-3.467-1.089-3.966-.22-.2-.232-.335-.123-.335.59.534 1.365 1.572 1.646 2.757.13.535.16 1.104.021 1.67.067.028.135.06.205.067 1.032.534 1.413.938 1.23 1.537v-.043c-.06-.003-.12 0-.18 0h-.016c.151-.467-.182-.825-1.065-1.224-.915-.4-1.646-.336-1.77.465-.008.043-.013.066-.018.135-.068.023-.139.053-.209.064-.43.268-.662.669-.793 1.187-.13.533-.17 1.156-.205 1.869v.003c-.02.334-.17.838-.319 1.35-1.5 1.072-3.58 1.538-5.348.334a2.645 2.645 0 0 0-.402-.533 1.45 1.45 0 0 0-.275-.333c.182 0 .338-.03.465-.067a.615.615 0 0 0 .314-.334c.108-.267 0-.697-.345-1.163-.345-.467-.931-.995-1.788-1.521-.63-.4-.986-.87-1.15-1.396-.165-.534-.143-1.085-.015-1.645.245-1.07.873-2.11 1.274-2.763.107-.065.037.135-.408.974-.396.751-1.14 2.497-.122 3.854a8.123 8.123 0 0 1 .647-2.876c.564-1.278 1.743-3.504 1.836-5.268.048.036.217.135.289.202.218.133.38.333.59.465.21.201.477.335.876.335.039.003.075.006.11.006.412 0 .73-.134.997-.268.29-.134.52-.334.74-.4h.005c.467-.135.835-.402 1.044-.7zm2.185 8.958c.037.6.343 1.245.882 1.377.588.134 1.434-.333 1.791-.765l.211-.01c.315-.007.577.01.847.268l.003.003c.208.199.305.53.391.876.085.4.154.78.409 1.066.486.527.645.906.636 1.14l.003-.007v.018l-.003-.012c-.015.262-.185.396-.498.595-.63.401-1.746.712-2.457 1.57-.618.737-1.37 1.14-2.036 1.191-.664.053-1.237-.2-1.574-.898l-.005-.003c-.21-.4-.12-1.025.056-1.69.176-.668.428-1.344.463-1.897.037-.714.076-1.335.195-1.814.12-.465.308-.797.641-.984l.045-.022zm-10.814.049h.01c.053 0 .105.005.157.014.376.055.706.333 1.023.752l.91 1.664.003.003c.243.533.754 1.064 1.189 1.637.434.598.77 1.131.729 1.57v.006c-.057.744-.48 1.148-1.125 1.294-.645.135-1.52.002-2.395-.464-.968-.536-2.118-.469-2.857-.602-.369-.066-.61-.2-.723-.4-.11-.2-.113-.602.123-1.23v-.004l.002-.003c.117-.334.03-.752-.027-1.118-.055-.401-.083-.71.043-.94.16-.334.396-.4.69-.533.294-.135.64-.202.915-.47h.002v-.002c.256-.268.445-.601.668-.838.19-.201.38-.336.663-.336zm7.159-9.074c-.435.201-.945.535-1.488.535-.542 0-.97-.267-1.28-.466-.154-.134-.28-.268-.373-.335-.164-.134-.144-.333-.074-.333.109.016.129.134.199.2.096.066.215.2.36.333.292.2.68.467 1.167.467.485 0 1.053-.267 1.398-.466.195-.135.445-.334.648-.467.156-.136.149-.267.279-.267.128.016.034.134-.147.332a8.097 8.097 0 0 1-.69.468zm-1.082-1.583V5.64c-.006-.02.013-.042.029-.05.074-.043.18-.027.26.004.063 0 .16.067.15.135-.006.049-.085.066-.135.066-.055 0-.092-.043-.141-.068-.052-.018-.146-.008-.163-.065zm-.551 0c-.02.058-.113.049-.166.066-.047.025-.086.068-.14.068-.05 0-.13-.02-.136-.068-.01-.066.088-.133.15-.133.08-.031.184-.047.259-.005.019.009.036.03.03.05v.02h.003z"}))}));ud.displayName="Linux";var dd=Te((function(e,n){return d(cn,ln({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),d("path",{d:"M0 14.727h.941v-2.453c0-.484.318-.835.771-.835.439 0 .71.276.71.722v2.566h.915V12.25c0-.48.31-.812.764-.812.46 0 .718.28.718.77v2.518h.94v-2.748c0-.801-.517-1.334-1.307-1.334-.578 0-1.054.31-1.247.805h-.023c-.147-.514-.552-.805-1.118-.805-.545 0-.968.306-1.142.771H.903v-.695H0v4.006zm7.82-.646c-.408 0-.68-.208-.68-.537 0-.318.26-.522.714-.552l.926-.057v.307c0 .483-.427.839-.96.839zm-.284.71c.514 0 1.017-.268 1.248-.703h.018v.639h.908v-2.76c0-.804-.647-1.33-1.64-1.33-1.021 0-1.66.537-1.701 1.285h.873c.06-.332.344-.548.79-.548.464 0 .748.242.748.662v.287l-1.058.06c-.976.061-1.524.488-1.524 1.199 0 .721.564 1.209 1.338 1.209zm6.305-2.642c-.065-.843-.719-1.512-1.777-1.512-1.164 0-1.92.805-1.92 2.087 0 1.3.756 2.082 1.928 2.082 1.005 0 1.697-.59 1.772-1.485h-.888c-.087.453-.397.725-.873.725-.597 0-.982-.483-.982-1.322 0-.824.381-1.323.975-1.323.502 0 .8.321.876.748h.889zm2.906-2.967c-1.591 0-2.589 1.085-2.589 2.82 0 1.735.998 2.816 2.59 2.816 1.586 0 2.584-1.081 2.584-2.816 0-1.735-.997-2.82-2.585-2.82zm0 .832c.971 0 1.591.77 1.591 1.988 0 1.213-.62 1.984-1.59 1.984-.976 0-1.592-.77-1.592-1.984 0-1.217.616-1.988 1.591-1.988zm2.982 3.178c.042 1.006.866 1.626 2.12 1.626 1.32 0 2.151-.65 2.151-1.686 0-.813-.469-1.27-1.576-1.523l-.627-.144c-.67-.158-.945-.37-.945-.733 0-.453.415-.756 1.032-.756.623 0 1.05.306 1.096.817h.93c-.023-.96-.817-1.61-2.019-1.61-1.187 0-2.03.653-2.03 1.62 0 .78.477 1.263 1.482 1.494l.707.166c.688.163.967.39.967.782 0 .454-.457.779-1.115.779-.665 0-1.167-.329-1.228-.832h-.945z"}))}));dd.displayName="Macos";var pd=Te((function(e,n){return d(cn,ln({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),d("path",{d:"M21.86 17.86q.14 0 .25.12.1.13.1.25t-.11.33l-.32.46-.43.53-.44.5q-.21.25-.38.42l-.22.23q-.58.53-1.34 1.04-.76.51-1.6.91-.86.4-1.74.64t-1.67.24q-.9 0-1.69-.28-.8-.28-1.48-.78-.68-.5-1.22-1.17-.53-.66-.92-1.44-.38-.77-.58-1.6-.2-.83-.2-1.67 0-1 .32-1.96.33-.97.87-1.8.14.95.55 1.77.41.82 1.02 1.5.6.68 1.38 1.21.78.54 1.64.9.86.36 1.77.56.92.2 1.8.2 1.12 0 2.18-.24 1.06-.23 2.06-.72l.2-.1.2-.05zm-15.5-1.27q0 1.1.27 2.15.27 1.06.78 2.03.51.96 1.24 1.77.74.82 1.66 1.4-1.47-.2-2.8-.74-1.33-.55-2.48-1.37-1.15-.83-2.08-1.9-.92-1.07-1.58-2.33T.36 14.94Q0 13.54 0 12.06q0-.81.32-1.49.31-.68.83-1.23.53-.55 1.2-.96.66-.4 1.35-.66.74-.27 1.5-.39.78-.12 1.55-.12.7 0 1.42.1.72.12 1.4.35.68.23 1.32.57.63.35 1.16.83-.35 0-.7.07-.33.07-.65.23v-.02q-.63.28-1.2.74-.57.46-1.05 1.04-.48.58-.87 1.26-.38.67-.65 1.39-.27.71-.42 1.44-.15.72-.15 1.38zM11.96.06q1.7 0 3.33.39 1.63.38 3.07 1.15 1.43.77 2.62 1.93 1.18 1.16 1.98 2.7.49.94.76 1.96.28 1 .28 2.08 0 .89-.23 1.7-.24.8-.69 1.48-.45.68-1.1 1.22-.64.53-1.45.88-.54.24-1.11.36-.58.13-1.16.13-.42 0-.97-.03-.54-.03-1.1-.12-.55-.1-1.05-.28-.5-.19-.84-.5-.12-.09-.23-.24-.1-.16-.1-.33 0-.15.16-.35.16-.2.35-.5.2-.28.36-.68.16-.4.16-.95 0-1.06-.4-1.96-.4-.91-1.06-1.64-.66-.74-1.52-1.28-.86-.55-1.79-.89-.84-.3-1.72-.44-.87-.14-1.76-.14-1.55 0-3.06.45T.94 7.55q.71-1.74 1.81-3.13 1.1-1.38 2.52-2.35Q6.68 1.1 8.37.58q1.7-.52 3.58-.52z"}))}));pd.displayName="Microsoftedge";var fd=Te((function(e,n){return d(cn,ln({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),d("path",{d:"M8.051 5.238c-1.328 1.566-2.186 3.883-2.246 6.48v.564c.061 2.598.918 4.912 2.246 6.479 1.721 2.236 4.279 3.654 7.139 3.654a8.65 8.65 0 0 0 4.807-1.471 11.928 11.928 0 0 1-8.567 3.042C5.064 23.689 0 18.436 0 12 0 5.371 5.373 0 12 0h.045a11.965 11.965 0 0 1 7.953 3.055c-1.408-.93-3.051-1.471-4.81-1.471-2.858 0-5.417 1.42-7.14 3.654h.003zM24 12c0 3.556-1.545 6.748-4.002 8.945-3.078 1.5-5.946.451-6.896-.205 3.023-.664 5.307-4.32 5.307-8.74 0-4.422-2.283-8.075-5.307-8.74.949-.654 3.818-1.703 6.896-.205A11.96 11.96 0 0 1 24 12z"}))}));fd.displayName="Opera";var hd=Te((function(e,n){return d(cn,ln({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),d("path",{d:"M12 24C5.373 24 0 18.627 0 12S5.373 0 12 0s12 5.373 12 12-5.373 12-12 12zm0-.75c6.213 0 11.25-5.037 11.25-11.25S18.213.75 12 .75.75 5.787.75 12 5.787 23.25 12 23.25zM12 2a.25.25 0 0 1 .25.25v1a.25.25 0 1 1-.5 0v-1A.25.25 0 0 1 12 2zm0 18.5a.25.25 0 0 1 .25.25v1a.25.25 0 1 1-.5 0v-1a.25.25 0 0 1 .25-.25zm7.071-15.571a.25.25 0 0 1 0 .353l-.707.708a.25.25 0 0 1-.354-.354l.708-.707a.25.25 0 0 1 .353 0zM5.99 18.01a.25.25 0 0 1 0 .354l-.708.707a.25.25 0 1 1-.353-.353l.707-.708a.25.25 0 0 1 .354 0zM4.929 4.93a.25.25 0 0 1 .353 0l.708.707a.25.25 0 0 1-.354.354l-.707-.708a.25.25 0 0 1 0-.353zM18.01 18.01a.25.25 0 0 1 .354 0l.707.708a.25.25 0 1 1-.353.353l-.708-.707a.25.25 0 0 1 0-.354zM2 12a.25.25 0 0 1 .25-.25h1a.25.25 0 1 1 0 .5h-1A.25.25 0 0 1 2 12zm18.5 0a.25.25 0 0 1 .25-.25h1a.25.25 0 1 1 0 .5h-1a.25.25 0 0 1-.25-.25zm-4.593-9.205a.25.25 0 0 1 .133.328l-.391.92a.25.25 0 1 1-.46-.195l.39-.92a.25.25 0 0 1 .328-.133zM8.68 19.825a.25.25 0 0 1 .132.327l-.39.92a.25.25 0 0 1-.46-.195l.39-.92a.25.25 0 0 1 .328-.133zM21.272 8.253a.25.25 0 0 1-.138.325l-.927.375a.25.25 0 1 1-.188-.464l.927-.374a.25.25 0 0 1 .326.138zm-17.153 6.93a.25.25 0 0 1-.138.326l-.927.374a.25.25 0 1 1-.188-.463l.927-.375a.25.25 0 0 1 .326.138zM8.254 2.728a.25.25 0 0 1 .325.138l.375.927a.25.25 0 0 1-.464.188l-.374-.927a.25.25 0 0 1 .138-.326zm6.93 17.153a.25.25 0 0 1 .326.138l.374.927a.25.25 0 1 1-.463.188l-.375-.927a.25.25 0 0 1 .138-.326zM2.795 8.093a.25.25 0 0 1 .328-.133l.92.391a.25.25 0 0 1-.195.46l-.92-.39a.25.25 0 0 1-.133-.328zm17.03 7.228a.25.25 0 0 1 .327-.132l.92.39a.25.25 0 1 1-.195.46l-.92-.39a.25.25 0 0 1-.133-.328zm-6.946-2.442L11.12 11.12l-4.141 5.9 5.899-4.142zm6.192-7.95-5.834 8.308-8.308 5.834 5.834-8.308 8.308-5.834z"}))}));hd.displayName="Safari";var vd=Te((function(e,n){return d(cn,ln({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:n}),d("path",{d:"m19.817 10.28.046 2.694h-.023l-.78-2.693h-1.283v3.392h.848l-.046-2.785h.023l.836 2.785h1.227v-3.392zm-16.15 0-.641 3.428h.928l.47-3.118h.023l.459 3.118h.916l-.63-3.427zm5.181 0-.424 2.614h-.023l-.424-2.613H6.58l-.069 3.427h.86l.023-3.083h.011l.573 3.083h.871l.573-3.083h.023l.023 3.083h.86l-.08-3.427zm-7.266 2.454a.48.48 0 0 1 .011.252c-.023.114-.103.229-.332.229-.218 0-.344-.126-.344-.31v-.332H0v.264c0 .768.607.997 1.25.997.618 0 1.134-.218 1.214-.78.046-.298.012-.492 0-.561-.16-.722-1.467-.929-1.559-1.33a.492.492 0 0 1 0-.183c.023-.115.104-.23.31-.23.206 0 .32.127.32.31v.206h.86v-.24c0-.745-.676-.86-1.157-.86-.608 0-1.112.206-1.204.757a1.04 1.04 0 0 0 .012.458c.137.71 1.364.917 1.536 1.352m11.152 0c.034.08.022.184.011.253-.023.114-.103.229-.332.229-.218 0-.344-.126-.344-.31v-.332h-.917v.264c0 .756.596.985 1.238.985.619 0 1.123-.206 1.203-.779.046-.298.012-.481 0-.562-.137-.71-1.433-.928-1.524-1.318a.488.488 0 0 1 0-.183c.023-.115.103-.23.31-.23.194 0 .32.127.32.31v.206h.848v-.24c0-.745-.665-.86-1.146-.86-.607 0-1.1.195-1.192.757-.023.149-.023.286.012.458.137.71 1.34.905 1.513 1.352m2.888.459c.24 0 .31-.16.332-.252.012-.035.012-.092.012-.126V10.28h.87v2.464c0 .069 0 .195-.01.23-.058.641-.562.847-1.193.847-.63 0-1.134-.206-1.192-.848 0-.034-.011-.16-.011-.229v-2.464h.87v2.533c0 .046 0 .091.012.126 0 .091.07.252.31.252m7.152-.034c.252 0 .332-.16.355-.253.011-.034.011-.091.011-.126v-.493h-.355v-.504H24v.917c0 .069 0 .115-.011.23-.058.63-.597.847-1.204.847s-1.146-.217-1.203-.848c-.012-.114-.012-.16-.012-.229v-1.444c0-.057.012-.172.012-.23.08-.641.596-.847 1.203-.847s1.135.206 1.203.848c.012.103.012.229.012.229v.115h-.86v-.195s0-.08-.011-.126c-.012-.08-.08-.252-.344-.252-.252 0-.32.16-.344.252-.011.045-.011.103-.011.16v1.57c0 .046 0 .092.011.126 0 .092.092.253.333.253"}))}));vd.displayName="Samsung";var gd=nn((function(e,n){e.exports=function(e,n,t){e=e||{};var r=n.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function a(e,n,t,i){return r.fromToBase(e,n,t,i)}t.en.relativeTime=i,r.fromToBase=function(n,r,a,o,s){for(var l,c,u,d=a.$locale().relativeTime||i,p=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],f=p.length,h=0;h<f;h+=1){var v=p[h];v.d&&(l=o?t(n).diff(a,v.d,!0):a.diff(n,v.d,!0));var g=(e.rounding||Math.round)(Math.abs(l));if(u=l>0,g<=v.r||!v.r){g<=1&&h>0&&(v=p[h-1]);var m=d[v.l];s&&(g=s(""+g)),c="string"==typeof m?m.replace("%d",g):m(g,r,v.l,u);break}}if(r)return c;var _=u?d.future:d.past;return"function"==typeof _?_(c):_.replace("%s",c)},r.to=function(e,n){return a(e,n,this,!0)},r.from=function(e,n){return a(e,n,this)};var o=function(e){return e.$u?t.utc():t()};r.toNow=function(e){return this.to(o(this),e)},r.fromNow=function(e){return this.from(o(this),e)}}}));function md(){const e=y(pt),n="object"==typeof e.session?e.session._id:void 0,[t,r]=U(void 0),[i,a]=U([]),o=b();if(f((()=>{e.req("GET","/auth/session/all").then((e=>{e.sort(((e,t)=>(t._id===n?1:0)-(e._id===n?1:0))),r(e)}))}),[e,r,n]),void 0===t)return d("div",{className:Vu.loader},d(Nt,{type:"ring"}));const c=t.map((e=>l(s({},e),{timestamp:ue(e._id)})));c.sort(((e,n)=>n.timestamp-e.timestamp));const u=c.findIndex((e=>e._id===n)),p=[c[u],...c.slice(0,u),...c.slice(u+1,c.length)];return d("div",{className:Vu.sessions},d("h3",null,d(m,{id:"app.settings.pages.sessions.active_sessions"})),p.map((o=>{const s=function(e){const n=e.name;switch(!0){case/linux/i.test(n):return d(ud,{size:14});case/android/i.test(n):return d(Pu,{size:14});case/mac.*os/i.test(n):return d(dd,{size:14});case/ios/i.test(n):return d(Uu,{size:14});case/windows/i.test(n):return d(Hu,{size:14});default:return null}}(o);return d("div",{key:o._id,className:Vu.entry,"data-active":o._id===n,"data-deleting":i.indexOf(o._id)>-1},n===o._id&&d("span",{className:Vu.label},d(m,{id:"app.settings.pages.sessions.this_device"})," "),d("div",{className:Vu.session},d("div",{className:Vu.detail},d("svg",{width:42,height:42,viewBox:"0 0 32 32"},d("foreignObject",{x:"0",y:"0",width:"32",height:"32",mask:s?"url(#session)":void 0},function(e){const n=e.name;switch(!0){case/firefox/i.test(n):return d(cd,{size:32});case/chrome/i.test(n):return d($u,{size:32});case/safari/i.test(n):return d(hd,{size:32});case/edge/i.test(n):return d(pd,{size:32});case/opera/i.test(n):return d(fd,{size:32});case/samsung/i.test(n):return d(vd,{size:32});case/desktop/i.test(n):return d(zn,{size:32});default:return d(Cn,{size:32})}}(o)),d("foreignObject",{x:"18",y:"18",width:"14",height:"14"},s)),d("div",{className:Vu.info},d("input",{type:"text",className:Vu.name,value:o.name,autocomplete:"off",style:{pointerEvents:"none"}}),d("span",{className:Vu.time},d(m,{id:"app.settings.pages.sessions.created",fields:{time_ago:lt(o.timestamp).fromNow()}})))),n!==o._id&&d(Gn,{onClick:async()=>{a([...i,o._id]),await e.req("DELETE",`/auth/session/${o._id}`),r(null==t?void 0:t.filter((e=>e._id!==o._id)))},disabled:i.indexOf(o._id)>-1},d(m,{id:"app.settings.pages.logOut"}))))})),d(Gn,{error:!0,onClick:async()=>{const i=[];p.forEach((e=>{n!==e._id&&i.push(e._id)})),a(i);for(const n of i)await e.req("DELETE",`/auth/session/${n}`);r(t.filter((e=>e._id===n)))}},d(m,{id:"app.settings.pages.sessions.logout"})),d(sr,null,d("span",null,d(m,{id:"app.settings.tips.sessions.a"}))," ",d("a",{onClick:()=>{return e="account",void o.replace(`/settings/${e}`);var e}},d(m,{id:"app.settings.tips.sessions.b"}))))}lt.extend(gd);const _d=Dn((function(e){return d("div",{className:Vu.notifications},d("h3",null,d(m,{id:"app.settings.pages.sync.categories"})),[["appearance","appearance.title"],["theme","appearance.theme"],["locale","language.title"]].map((([n,t])=>{var r,i;return d(ar,{key:n,checked:-1===(null!=(i=null==(r=e.options)?void 0:r.disabled)?i:[]).indexOf(n),description:d(m,{id:`app.settings.pages.sync.descriptions.${n}`}),onChange:e=>Un({type:e?"SYNC_ENABLE_KEY":"SYNC_DISABLE_KEY",key:n})},d(m,{id:`app.settings.pages.${t}`}))})))}),(e=>({options:e.sync})));const yd=_.article`
    display: grid;
    grid:
        "preview name creator" min-content
        "preview desc desc" 1fr
        / 200px 1fr 1fr;

    gap: 0.5rem 1rem;
    padding: 1rem;
    border-radius: var(--border-radius);
    background: var(--secondary-background);

    &[data-loaded] {
        .preview {
            opacity: 1;
        }
    }

    .preview {
        grid-area: preview;
        aspect-ratio: 323 / 202;

        background-color: var(--secondary-background);
        border-radius: calc(var(--border-radius) / 2);

        // prep style for later
        outline: 3px solid transparent;

        // hide random svg parts, crop border on firefox
        overflow: hidden;

        // hide until loaded
        opacity: 0;

        // style button
        border: 0;
        margin: 0;
        padding: 0;

        transition: 0.25s opacity, 0.25s outline;

        > * {
            grid-area: 1 / 1;
        }

        svg {
            height: 100%;
            width: 100%;
            object-fit: contain;
        }

        &:hover,
        &:active,
        &:focus-visible {
            outline: 3px solid var(--tertiary-background);
        }
    }

    .name {
        grid-area: name;
        margin: 0;
    }

    .creator {
        grid-area: creator;
        justify-self: end;
        font-size: 0.75rem;
    }

    .description {
        grid-area: desc;
    }
`,bd=_.div`
    display: grid;
    gap: 1rem;
`,wd=_.svg`
    ${e=>e.theme&&ct(e.theme)}
`,xd=e=>{var n=e,{theme:t}=n,r=u(n,["theme"]);return d(wd,l(s({},r),{theme:t,width:"323",height:"202","aria-hidden":"true","data-loaded":!!t}),d("use",{href:"/revite/refs/pull/288/merge/assets/preview.15d174ed.svg#preview",width:"100%",height:"100%"}))},kd=_.div`
    display: grid;
    gap: 1rem;
`;function Cd(){const[e,n]=U(null),[t,r]=U({});async function i(){const e=await fetch("https://themes.revolt.chat/manifest.json").then((e=>e.json()));n(Object.entries(e.themes).filter((e=>!e[1].commit||e[1].commit===Gu)))}async function a(e){const n=await(e=>fetch(`https://themes.revolt.chat/theme_${e}.json`).then((e=>e.json())))(e);r((t=>l(s({},t),{[e]:n})))}return f((()=>{i()}),[]),f((()=>{null==e||e.forEach((([e])=>{a(e)}))}),[e]),d(kd,null,d(sr,{warning:!0,hideSeparator:!0},"This section is under construction."),d(bd,null,null==e?void 0:e.map((([e,n])=>d(yd,{key:e,"data-loaded":Reflect.has(t,e)},d("h2",{class:"name"},n.name),d("div",{class:"creator"},"by ",n.creator),d("div",{class:"description"},n.description),d("button",{class:"preview",onClick:()=>{Un({type:"THEMES_SET_THEME",theme:{slug:e,meta:n,theme:t[e]}}),Un({type:"SETTINGS_SET_THEME",theme:{base:e}})}},d(xd,{slug:e,theme:t[e]})))))))}function zd(){var e,n;const t=b(),r=y(pt),i=y(rr);return d(uu,{pages:[{category:d(m,{id:"app.settings.categories.user_settings"}),id:"account",icon:d(Sn,{size:20}),title:d(m,{id:"app.settings.pages.account.title"})},{id:"profile",icon:d(Tn,{size:20}),title:d(m,{id:"app.settings.pages.profile.title"})},{id:"sessions",icon:d(Nn,{size:20}),title:d(m,{id:"app.settings.pages.sessions.title"})},{category:d(m,{id:"app.settings.categories.client_settings"}),id:"audio",icon:d(In,{size:20}),title:d(m,{id:"app.settings.pages.audio.title"})},{id:"appearance",icon:d(En,{size:20}),title:d(m,{id:"app.settings.pages.appearance.title"})},{id:"notifications",icon:d(On,{size:20}),title:d(m,{id:"app.settings.pages.notifications.title"})},{id:"language",icon:d(wn,{size:20}),title:d(m,{id:"app.settings.pages.language.title"})},{id:"sync",icon:d(Rn,{size:20}),title:d(m,{id:"app.settings.pages.sync.title"})},{id:"native",hidden:!window.isNative,icon:d(zn,{size:20}),title:d(m,{id:"app.settings.pages.native.title"})},{id:"experiments",icon:d(An,{size:20}),title:d(m,{id:"app.settings.pages.experiments.title"})},{divider:!rt("theme_shop"),category:"revolt",id:"bots",icon:d(Ln,{size:20}),title:d(m,{id:"app.settings.pages.bots.title"})},{hidden:!rt("theme_shop"),divider:!0,id:"theme_shop",icon:d(gn,{size:20}),title:d(m,{id:"app.settings.pages.theme_shop.title"})},{id:"feedback",icon:d(Mn,{size:20}),title:d(m,{id:"app.settings.pages.feedback.title"})}],children:d(se,null,d(oe,{path:"/settings/profile"},d(ld,null)),d(oe,{path:"/settings/sessions"},d(nr,null,d(md,null))),d(oe,{path:"/settings/appearance"},d(Ku,null)),d(oe,{path:"/settings/audio"},d(Zu,null)),d(oe,{path:"/settings/notifications"},d(sd,null)),d(oe,{path:"/settings/language"},d(nd,null)),d(oe,{path:"/settings/sync"},d(_d,null)),d(oe,{path:"/settings/native"},d(ad,null)),d(oe,{path:"/settings/experiments"},d(Qu,null)),d(oe,{path:"/settings/bots"},d(id,null)),rt("theme_shop")&&d(oe,{path:"/settings/theme_shop"},d(Cd,null)),d(oe,{path:"/settings/feedback"},d(Xu,null)),d(oe,{path:"/"},d(Wu,null))),defaultPage:"account",switchPage:function(e){e?t.replace(`/settings/${e}`):t.replace("/settings")},category:"pages",custom:d(v,null,d("a",{href:"https://github.com/revoltchat",target:"_blank",rel:"noreferrer"},d(la,{compact:!0},d(Fu,{size:20}),d(m,{id:"app.settings.pages.source_code"}))),d("a",{href:"https://insrt.uk/donate",target:"_blank",rel:"noreferrer"},d(la,{className:cu.donate,compact:!0},d(jn,{size:20}),d(m,{id:"app.settings.pages.donate.title"}))),d(Cr,null),d(la,{onClick:()=>i.logout(),className:cu.logOut,compact:!0},d(Bn,{size:20}),d(m,{id:"app.settings.pages.logOut"})),d("div",{className:cu.version},d("span",{className:cu.revision},d("a",{href:`https://github.com/revoltchat/revite/commit/${Gu}`,target:"_blank",rel:"noreferrer"},Gu.substr(0,7))," ",d("a",{href:void 0,target:"_blank",rel:"noreferrer"},"(","DETACHED",")")),d("span",null,"Nightly"," ",ur),window.isNative&&d("span",null,"Native: ",window.nativeVersion),d("span",null,"API: ",null!=(n=null==(e=r.configuration)?void 0:e.revolt)?n:"N/A"),d("span",null,"revolt.js: ",rn.LIBRARY_VERSION)))})}const Sd=_.div`
    min-width: 0;
    display: flex;
    overflow: hidden;
    flex-direction: column;
    background: var(--primary-background);
`;function Td(){const e=he().pathname,n="/"===e||"/settings"===e||e.startsWith("/friends"),t=e.includes("/channel"),r=e.startsWith("/friends")&&Dt||e.startsWith("/invite")||e.includes("/settings");return d(v,null,window.isNative&&!window.native.getConfig().frame&&d(dr,null),d(xr,{width:"100vw",height:window.isNative&&!window.native.getConfig().frame?"calc(var(--app-height) - var(--titlebar-height))":"var(--app-height)",leftPanel:r?void 0:{width:292,component:d(Ia,null)},rightPanel:!r&&t?{width:240,component:d(fc,null)}:void 0,bottomNav:{component:d(Yi,null),showIf:n?vr.Always:vr.Left,height:50},docked:Dt?fr.None:fr.Left},d(Sd,null,d(se,null,d(oe,{path:"/server/:server/channel/:channel/settings/:page",component:hu}),d(oe,{path:"/server/:server/channel/:channel/settings",component:hu}),d(oe,{path:"/server/:server/settings/:page",component:Du}),d(oe,{path:"/server/:server/settings",component:Du}),d(oe,{path:"/channel/:channel/settings/:page",component:hu}),d(oe,{path:"/channel/:channel/settings",component:hu}),d(oe,{path:"/channel/:channel/:message",component:Xc}),d(oe,{path:"/server/:server/channel/:channel/:message",component:Xc}),d(oe,{path:"/server/:server/channel/:channel",component:Xc}),d(oe,{path:"/server/:server",component:Xc}),d(oe,{path:"/channel/:channel",component:Xc}),d(oe,{path:"/settings/:page",component:zd}),d(oe,{path:"/settings",component:zd}),d(oe,{path:"/dev",component:eu}),d(oe,{path:"/friends",component:nu}),d(oe,{path:"/open/:id",component:hc}),d(oe,{path:"/bot/:id",component:lu}),d(oe,{path:"/invite/:code?",component:ir}),d(oe,{path:"/",component:su}))),d(zr,null),d(ji,null),d(Ui,null),d($i,null),d(Gi,null)))}export{Td as default};
//# sourceMappingURL=RevoltApp.8102a9c4.js.map
